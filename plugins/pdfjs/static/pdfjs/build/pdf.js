!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).pdfjsLib={})}(this,function(t){"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function n(t){if(Array.isArray(t))return t}function i(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function r(t){var e,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new a(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function a(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return a=function(t){this.s=t,this.n=t.next},a.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new a(t)}function s(t,e,n,i,r,a,s){try{var o=t[a](s),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(i,r)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){s(a,i,r,o,l,"next",t)}function l(t){s(a,i,r,o,l,"throw",t)}o(void 0)})}}function l(t,e,n){return e=k(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,A()?Reflect.construct(e,n||[],k(t).constructor):e.apply(t,n))}function u(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return t.get(i(t,e))}function d(t,e,n){u(t,e),e.set(t,n)}function f(t,e,n){return t.set(i(t,e),n),n}function v(t,e,n){return n(i(t,e))}function p(t,e){u(t,e),e.add(t)}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,F(i.key),i)}}function y(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=B(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function w(t,e,n){return(e=F(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},b.apply(null,arguments)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}function A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(A=function(){return!!t})()}function x(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach(function(e){w(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function C(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var l=i&&i.prototype instanceof o?i:o,u=Object.create(l.prototype);return R(u,"_invoke",function(n,i,r){var a,o,l,u=0,c=r||[],h=!1,d={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return a=e,o=0,l=t,d.n=n,s}};function f(n,i){for(o=n,l=i,e=0;!h&&u&&!r&&e<c.length;e++){var r,a=c[e],f=d.p,v=a[2];n>3?(r=v===i)&&(l=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=t):a[0]<=f&&((r=n<2&&f<a[1])?(o=0,d.v=i,d.n=a[1]):f<v&&(r=n<3||a[0]>i||i>v)&&(a[4]=n,a[5]=i,d.n=v,o=0))}if(r||n>1)return s;throw h=!0,i}return function(r,c,v){if(u>1)throw TypeError("Generator is already running");for(h&&1===c&&f(c,v),o=c,l=v;(e=o<2?t:l)||!h;){a||(o?o<3?(o>1&&(d.n=-1),f(o,l)):d.n=l:d.v=l);try{if(u=2,a){if(o||(r="next"),e=a[r]){if(!(e=e.call(a,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,o<2&&(o=0)}else 1===o&&(e=a.return)&&e.call(a),o<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),o=1);a=t}else if((e=(h=d.n<0)?l:n.call(i,d))!==s)break}catch(e){a=t,o=1,l=e}finally{u=1}}return{value:e,done:h}}}(n,r,a),!0),u}var s={};function o(){}function l(){}function u(){}e=Object.getPrototypeOf;var c=[][i]?e(e([][i]())):(R(e={},i,function(){return this}),e),h=u.prototype=o.prototype=Object.create(c);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,R(t,r,"GeneratorFunction")),t.prototype=Object.create(h),t}return l.prototype=u,R(h,"constructor",u),R(u,"constructor",l),l.displayName="GeneratorFunction",R(u,r,"GeneratorFunction"),R(h),R(h,r,"Generator"),R(h,i,function(){return this}),R(h,"toString",function(){return"[object Generator]"}),(C=function(){return{w:a,m:d}})()}function R(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}R=function(t,e,n,i){if(e)r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n;else{function a(e,n){R(t,e,function(t){return this._invoke(e,n,t)})}a("next",0),a("throw",1),a("return",2)}},R(t,e,n,i)}function T(t){var e=Object(t),n=[];for(var i in e)n.unshift(i);return function t(){for(;n.length;)if((i=n.pop())in e)return t.value=i,t.done=!1,t;return t.done=!0,t}}function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}function P(t,e){return n(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(t,e)||B(t,e)||S()}function D(t,e,n,i){var r=b(k(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}function L(t){return n(t)||x(t)||B(t)||S()}function O(t){return function(t){if(Array.isArray(t))return e(t)}(t)||x(t)||B(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function N(t,e,n){e||(e=[]);var i=e.length++;return Object.defineProperty({},"_",{set:function(r){e[i]=r,t.apply(n,e)}})}function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function B(t,n){if(t){if("string"==typeof t)return e(t,n);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}var j,z,U,H,G,V,q,X,Y,K,Q,J,Z,$,tt,et="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nt={exports:{}};!function(t,e){(function(){var n,i="Expected a function",r="__lodash_hash_undefined__",a="__lodash_placeholder__",s=16,o=32,l=64,u=128,c=256,h=1/0,d=9007199254740991,f=NaN,v=4294967295,p=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",o],["partialRight",l],["rearg",c]],g="[object Arguments]",y="[object Array]",m="[object Boolean]",w="[object Date]",b="[object Error]",k="[object Function]",_="[object GeneratorFunction]",A="[object Map]",x="[object Number]",S="[object Object]",E="[object Promise]",M="[object RegExp]",C="[object Set]",R="[object String]",T="[object Symbol]",I="[object WeakMap]",P="[object ArrayBuffer]",D="[object DataView]",L="[object Float32Array]",O="[object Float64Array]",F="[object Int8Array]",N="[object Int16Array]",B="[object Int32Array]",j="[object Uint8Array]",z="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",G=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,K=RegExp(X.source),Q=RegExp(Y.source),J=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,at=RegExp(rt.source),st=/^\s+/,ot=/\s/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,vt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,gt=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,wt=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,kt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,At=/['\n\r\u2028\u2029\\]/g,xt="\\ud800-\\udfff",St="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Et="\\u2700-\\u27bf",Mt="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",Rt="\\ufe0e\\ufe0f",Tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",It="['’]",Pt="["+xt+"]",Dt="["+Tt+"]",Lt="["+St+"]",Ot="\\d+",Ft="["+Et+"]",Nt="["+Mt+"]",Wt="[^"+xt+Tt+Ot+Et+Mt+Ct+"]",Bt="\\ud83c[\\udffb-\\udfff]",jt="[^"+xt+"]",zt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ut="[\\ud800-\\udbff][\\udc00-\\udfff]",Ht="["+Ct+"]",Gt="\\u200d",Vt="(?:"+Nt+"|"+Wt+")",qt="(?:"+Ht+"|"+Wt+")",Xt="(?:['’](?:d|ll|m|re|s|t|ve))?",Yt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Kt="(?:"+Lt+"|"+Bt+")"+"?",Qt="["+Rt+"]?",Jt=Qt+Kt+("(?:"+Gt+"(?:"+[jt,zt,Ut].join("|")+")"+Qt+Kt+")*"),Zt="(?:"+[Ft,zt,Ut].join("|")+")"+Jt,$t="(?:"+[jt+Lt+"?",Lt,zt,Ut,Pt].join("|")+")",te=RegExp(It,"g"),ee=RegExp(Lt,"g"),ne=RegExp(Bt+"(?="+Bt+")|"+$t+Jt,"g"),ie=RegExp([Ht+"?"+Nt+"+"+Xt+"(?="+[Dt,Ht,"$"].join("|")+")",qt+"+"+Yt+"(?="+[Dt,Ht+Vt,"$"].join("|")+")",Ht+"?"+Vt+"+"+Xt,Ht+"+"+Yt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ot,Zt].join("|"),"g"),re=RegExp("["+Gt+xt+St+Rt+"]"),ae=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,se=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oe=-1,le={};le[L]=le[O]=le[F]=le[N]=le[B]=le[j]=le[z]=le[U]=le[H]=!0,le[g]=le[y]=le[P]=le[m]=le[D]=le[w]=le[b]=le[k]=le[A]=le[x]=le[S]=le[M]=le[C]=le[R]=le[I]=!1;var ue={};ue[g]=ue[y]=ue[P]=ue[D]=ue[m]=ue[w]=ue[L]=ue[O]=ue[F]=ue[N]=ue[B]=ue[A]=ue[x]=ue[S]=ue[M]=ue[C]=ue[R]=ue[T]=ue[j]=ue[z]=ue[U]=ue[H]=!0,ue[b]=ue[k]=ue[I]=!1;var ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,de=parseInt,fe="object"==W(et)&&et&&et.Object===Object&&et,ve="object"==("undefined"==typeof self?"undefined":W(self))&&self&&self.Object===Object&&self,pe=fe||ve||Function("return this")(),ge=e&&!e.nodeType&&e,ye=ge&&t&&!t.nodeType&&t,me=ye&&ye.exports===ge,we=me&&fe.process,be=function(){try{var t=ye&&ye.require&&ye.require("util").types;return t||we&&we.binding&&we.binding("util")}catch(t){}}(),ke=be&&be.isArrayBuffer,_e=be&&be.isDate,Ae=be&&be.isMap,xe=be&&be.isRegExp,Se=be&&be.isSet,Ee=be&&be.isTypedArray;function Me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ce(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var s=t[r];e(i,s,n(s),t)}return i}function Re(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ie(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Pe(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var s=t[n];e(s,n,t)&&(a[r++]=s)}return a}function De(t,e){return!!(null==t?0:t.length)&&He(t,e,0)>-1}function Le(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Oe(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Fe(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Ne(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function We(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Be(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var je=Xe("length");function ze(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function Ue(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function He(t,e,n){return e==e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Ue(t,Ve,n)}function Ge(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function Ve(t){return t!=t}function qe(t,e){var n=null==t?0:t.length;return n?Qe(t,e)/n:f}function Xe(t){return function(e){return null==e?n:e[t]}}function Ye(t){return function(e){return null==t?n:t[e]}}function Ke(t,e,n,i,r){return r(t,function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)}),n}function Qe(t,e){for(var i,r=-1,a=t.length;++r<a;){var s=e(t[r]);s!==n&&(i=i===n?s:i+s)}return i}function Je(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Ze(t){return t?t.slice(0,gn(t)+1).replace(st,""):t}function $e(t){return function(e){return t(e)}}function tn(t,e){return Oe(e,function(e){return t[e]})}function en(t,e){return t.has(e)}function nn(t,e){for(var n=-1,i=t.length;++n<i&&He(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&He(e,t[n],0)>-1;);return n}var an=Ye({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),sn=Ye({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(t){return"\\"+ce[t]}function ln(t){return re.test(t)}function un(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function cn(t,e){return function(n){return t(e(n))}}function hn(t,e){for(var n=-1,i=t.length,r=0,s=[];++n<i;){var o=t[n];o!==e&&o!==a||(t[n]=a,s[r++]=n)}return s}function dn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function fn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function vn(t){return ln(t)?function(t){var e=ne.lastIndex=0;for(;ne.test(t);)++e;return e}(t):je(t)}function pn(t){return ln(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.split("")}(t)}function gn(t){for(var e=t.length;e--&&ot.test(t.charAt(e)););return e}var yn=Ye({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mn=function t(e){var et,ot=(e=null==e?pe:mn.defaults(pe.Object(),e,mn.pick(pe,se))).Array,xt=e.Date,St=e.Error,Et=e.Function,Mt=e.Math,Ct=e.Object,Rt=e.RegExp,Tt=e.String,It=e.TypeError,Pt=ot.prototype,Dt=Et.prototype,Lt=Ct.prototype,Ot=e["__core-js_shared__"],Ft=Dt.toString,Nt=Lt.hasOwnProperty,Wt=0,Bt=(et=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||""))?"Symbol(src)_1."+et:"",jt=Lt.toString,zt=Ft.call(Ct),Ut=pe._,Ht=Rt("^"+Ft.call(Nt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gt=me?e.Buffer:n,Vt=e.Symbol,qt=e.Uint8Array,Xt=Gt?Gt.allocUnsafe:n,Yt=cn(Ct.getPrototypeOf,Ct),Kt=Ct.create,Qt=Lt.propertyIsEnumerable,Jt=Pt.splice,Zt=Vt?Vt.isConcatSpreadable:n,$t=Vt?Vt.iterator:n,ne=Vt?Vt.toStringTag:n,re=function(){try{var t=fa(Ct,"defineProperty");return t({},"",{}),t}catch(t){}}(),ce=e.clearTimeout!==pe.clearTimeout&&e.clearTimeout,fe=xt&&xt.now!==pe.Date.now&&xt.now,ve=e.setTimeout!==pe.setTimeout&&e.setTimeout,ge=Mt.ceil,ye=Mt.floor,we=Ct.getOwnPropertySymbols,be=Gt?Gt.isBuffer:n,je=e.isFinite,Ye=Pt.join,wn=cn(Ct.keys,Ct),bn=Mt.max,kn=Mt.min,_n=xt.now,An=e.parseInt,xn=Mt.random,Sn=Pt.reverse,En=fa(e,"DataView"),Mn=fa(e,"Map"),Cn=fa(e,"Promise"),Rn=fa(e,"Set"),Tn=fa(e,"WeakMap"),In=fa(Ct,"create"),Pn=Tn&&new Tn,Dn={},Ln=Ba(En),On=Ba(Mn),Fn=Ba(Cn),Nn=Ba(Rn),Wn=Ba(Tn),Bn=Vt?Vt.prototype:n,jn=Bn?Bn.valueOf:n,zn=Bn?Bn.toString:n;function Un(t){if(no(t)&&!Vs(t)&&!(t instanceof qn)){if(t instanceof Vn)return t;if(Nt.call(t,"__wrapped__"))return ja(t)}return new Vn(t)}var Hn=function(){function t(){}return function(e){if(!eo(e))return{};if(Kt)return Kt(e);t.prototype=e;var i=new t;return t.prototype=n,i}}();function Gn(){}function Vn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function qn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Kn;++e<n;)this.add(t[e])}function Jn(t){var e=this.__data__=new Yn(t);this.size=e.size}function Zn(t,e){var n=Vs(t),i=!n&&Gs(t),r=!n&&!i&&Ks(t),a=!n&&!i&&!r&&co(t),s=n||i||r||a,o=s?Je(t.length,Tt):[],l=o.length;for(var u in t)!e&&!Nt.call(t,u)||s&&("length"==u||r&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ba(u,l))||o.push(u);return o}function $n(t){var e=t.length;return e?t[Qi(0,e-1)]:n}function ti(t,e){return Fa(Ir(t),ui(e,0,t.length))}function ei(t){return Fa(Ir(t))}function ni(t,e,i){(i!==n&&!zs(t[e],i)||i===n&&!(e in t))&&oi(t,e,i)}function ii(t,e,i){var r=t[e];Nt.call(t,e)&&zs(r,i)&&(i!==n||e in t)||oi(t,e,i)}function ri(t,e){for(var n=t.length;n--;)if(zs(t[n][0],e))return n;return-1}function ai(t,e,n,i){return vi(t,function(t,r,a){e(i,t,n(t),a)}),i}function si(t,e){return t&&Pr(e,Do(e),t)}function oi(t,e,n){"__proto__"==e&&re?re(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function li(t,e){for(var i=-1,r=e.length,a=ot(r),s=null==t;++i<r;)a[i]=s?n:Co(t,e[i]);return a}function ui(t,e,i){return t==t&&(i!==n&&(t=t<=i?t:i),e!==n&&(t=t>=e?t:e)),t}function ci(t,e,i,r,a,s){var o,l=1&e,u=2&e,c=4&e;if(i&&(o=a?i(t,r,a,s):i(t)),o!==n)return o;if(!eo(t))return t;var h=Vs(t);if(h){if(o=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Nt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!l)return Ir(t,o)}else{var d=ga(t),f=d==k||d==_;if(Ks(t))return Sr(t,l);if(d==S||d==g||f&&!a){if(o=u||f?{}:ma(t),!l)return u?function(t,e){return Pr(t,pa(t),e)}(t,function(t,e){return t&&Pr(e,Lo(e),t)}(o,t)):function(t,e){return Pr(t,va(t),e)}(t,si(o,t))}else{if(!ue[d])return a?t:{};o=function(t,e,n){var i=t.constructor;switch(e){case P:return Er(t);case m:case w:return new i(+t);case D:return function(t,e){var n=e?Er(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case L:case O:case F:case N:case B:case j:case z:case U:case H:return Mr(t,n);case A:return new i;case x:case R:return new i(t);case M:return function(t){var e=new t.constructor(t.source,pt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case C:return new i;case T:return r=t,jn?Ct(jn.call(r)):{}}var r}(t,d,l)}}s||(s=new Jn);var v=s.get(t);if(v)return v;s.set(t,o),oo(t)?t.forEach(function(n){o.add(ci(n,e,i,n,t,s))}):io(t)&&t.forEach(function(n,r){o.set(r,ci(n,e,i,r,t,s))});var p=h?n:(c?u?sa:aa:u?Lo:Do)(t);return Re(p||t,function(n,r){p&&(n=t[r=n]),ii(o,r,ci(n,e,i,r,t,s))}),o}function hi(t,e,i){var r=i.length;if(null==t)return!r;for(t=Ct(t);r--;){var a=i[r],s=e[a],o=t[a];if(o===n&&!(a in t)||!s(o))return!1}return!0}function di(t,e,r){if("function"!=typeof t)throw new It(i);return Pa(function(){t.apply(n,r)},e)}function fi(t,e,n,i){var r=-1,a=De,s=!0,o=t.length,l=[],u=e.length;if(!o)return l;n&&(e=Oe(e,$e(n))),i?(a=Le,s=!1):e.length>=200&&(a=en,s=!1,e=new Qn(e));t:for(;++r<o;){var c=t[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,s&&h==h){for(var d=u;d--;)if(e[d]===h)continue t;l.push(c)}else a(e,h,i)||l.push(c)}return l}Un.templateSettings={escape:J,evaluate:Z,interpolate:$,variable:"",imports:{_:Un}},Un.prototype=Gn.prototype,Un.prototype.constructor=Un,Vn.prototype=Hn(Gn.prototype),Vn.prototype.constructor=Vn,qn.prototype=Hn(Gn.prototype),qn.prototype.constructor=qn,Xn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Xn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Xn.prototype.get=function(t){var e=this.__data__;if(In){var i=e[t];return i===r?n:i}return Nt.call(e,t)?e[t]:n},Xn.prototype.has=function(t){var e=this.__data__;return In?e[t]!==n:Nt.call(e,t)},Xn.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=In&&e===n?r:e,this},Yn.prototype.clear=function(){this.__data__=[],this.size=0},Yn.prototype.delete=function(t){var e=this.__data__,n=ri(e,t);return!(n<0)&&(n==e.length-1?e.pop():Jt.call(e,n,1),--this.size,!0)},Yn.prototype.get=function(t){var e=this.__data__,i=ri(e,t);return i<0?n:e[i][1]},Yn.prototype.has=function(t){return ri(this.__data__,t)>-1},Yn.prototype.set=function(t,e){var n=this.__data__,i=ri(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Kn.prototype.clear=function(){this.size=0,this.__data__={hash:new Xn,map:new(Mn||Yn),string:new Xn}},Kn.prototype.delete=function(t){var e=ha(this,t).delete(t);return this.size-=e?1:0,e},Kn.prototype.get=function(t){return ha(this,t).get(t)},Kn.prototype.has=function(t){return ha(this,t).has(t)},Kn.prototype.set=function(t,e){var n=ha(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Qn.prototype.add=Qn.prototype.push=function(t){return this.__data__.set(t,r),this},Qn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.clear=function(){this.__data__=new Yn,this.size=0},Jn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Jn.prototype.get=function(t){return this.__data__.get(t)},Jn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Yn){var i=n.__data__;if(!Mn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Kn(i)}return n.set(t,e),this.size=n.size,this};var vi=Or(_i),pi=Or(Ai,!0);function gi(t,e){var n=!0;return vi(t,function(t,i,r){return n=!!e(t,i,r)}),n}function yi(t,e,i){for(var r=-1,a=t.length;++r<a;){var s=t[r],o=e(s);if(null!=o&&(l===n?o==o&&!uo(o):i(o,l)))var l=o,u=s}return u}function mi(t,e){var n=[];return vi(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function wi(t,e,n,i,r){var a=-1,s=t.length;for(n||(n=wa),r||(r=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?wi(o,e-1,n,i,r):Fe(r,o):i||(r[r.length]=o)}return r}var bi=Fr(),ki=Fr(!0);function _i(t,e){return t&&bi(t,e,Do)}function Ai(t,e){return t&&ki(t,e,Do)}function xi(t,e){return Pe(e,function(e){return Zs(t[e])})}function Si(t,e){for(var i=0,r=(e=kr(e,t)).length;null!=t&&i<r;)t=t[Wa(e[i++])];return i&&i==r?t:n}function Ei(t,e,n){var i=e(t);return Vs(t)?i:Fe(i,n(t))}function Mi(t){return null==t?t===n?"[object Undefined]":"[object Null]":ne&&ne in Ct(t)?function(t){var e=Nt.call(t,ne),i=t[ne];try{t[ne]=n;var r=!0}catch(t){}var a=jt.call(t);r&&(e?t[ne]=i:delete t[ne]);return a}(t):function(t){return jt.call(t)}(t)}function Ci(t,e){return t>e}function Ri(t,e){return null!=t&&Nt.call(t,e)}function Ti(t,e){return null!=t&&e in Ct(t)}function Ii(t,e,i){for(var r=i?Le:De,a=t[0].length,s=t.length,o=s,l=ot(s),u=1/0,c=[];o--;){var h=t[o];o&&e&&(h=Oe(h,$e(e))),u=kn(h.length,u),l[o]=!i&&(e||a>=120&&h.length>=120)?new Qn(o&&h):n}h=t[0];var d=-1,f=l[0];t:for(;++d<a&&c.length<u;){var v=h[d],p=e?e(v):v;if(v=i||0!==v?v:0,!(f?en(f,p):r(c,p,i))){for(o=s;--o;){var g=l[o];if(!(g?en(g,p):r(t[o],p,i)))continue t}f&&f.push(p),c.push(v)}}return c}function Pi(t,e,i){var r=null==(t=Ra(t,e=kr(e,t)))?t:t[Wa(Ja(e))];return null==r?n:Me(r,t,i)}function Di(t){return no(t)&&Mi(t)==g}function Li(t,e,i,r,a){return t===e||(null==t||null==e||!no(t)&&!no(e)?t!=t&&e!=e:function(t,e,i,r,a,s){var o=Vs(t),l=Vs(e),u=o?y:ga(t),c=l?y:ga(e),h=(u=u==g?S:u)==S,d=(c=c==g?S:c)==S,f=u==c;if(f&&Ks(t)){if(!Ks(e))return!1;o=!0,h=!1}if(f&&!h)return s||(s=new Jn),o||co(t)?ia(t,e,i,r,a,s):function(t,e,n,i,r,a,s){switch(n){case D:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!a(new qt(t),new qt(e)));case m:case w:case x:return zs(+t,+e);case b:return t.name==e.name&&t.message==e.message;case M:case R:return t==e+"";case A:var o=un;case C:var l=1&i;if(o||(o=dn),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;i|=2,s.set(t,e);var c=ia(o(t),o(e),i,r,a,s);return s.delete(t),c;case T:if(jn)return jn.call(t)==jn.call(e)}return!1}(t,e,u,i,r,a,s);if(!(1&i)){var v=h&&Nt.call(t,"__wrapped__"),p=d&&Nt.call(e,"__wrapped__");if(v||p){var k=v?t.value():t,_=p?e.value():e;return s||(s=new Jn),a(k,_,i,r,s)}}if(!f)return!1;return s||(s=new Jn),function(t,e,i,r,a,s){var o=1&i,l=aa(t),u=l.length,c=aa(e),h=c.length;if(u!=h&&!o)return!1;var d=u;for(;d--;){var f=l[d];if(!(o?f in e:Nt.call(e,f)))return!1}var v=s.get(t),p=s.get(e);if(v&&p)return v==e&&p==t;var g=!0;s.set(t,e),s.set(e,t);var y=o;for(;++d<u;){var m=t[f=l[d]],w=e[f];if(r)var b=o?r(w,m,f,e,t,s):r(m,w,f,t,e,s);if(!(b===n?m===w||a(m,w,i,r,s):b)){g=!1;break}y||(y="constructor"==f)}if(g&&!y){var k=t.constructor,_=e.constructor;k==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof k&&k instanceof k&&"function"==typeof _&&_ instanceof _||(g=!1)}return s.delete(t),s.delete(e),g}(t,e,i,r,a,s)}(t,e,i,r,Li,a))}function Oi(t,e,i,r){var a=i.length,s=a,o=!r;if(null==t)return!s;for(t=Ct(t);a--;){var l=i[a];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){var u=(l=i[a])[0],c=t[u],h=l[1];if(o&&l[2]){if(c===n&&!(u in t))return!1}else{var d=new Jn;if(r)var f=r(c,h,u,t,e,d);if(!(f===n?Li(h,c,3,r,d):f))return!1}}return!0}function Fi(t){return!(!eo(t)||(e=t,Bt&&Bt in e))&&(Zs(t)?Ht:mt).test(Ba(t));var e}function Ni(t){return"function"==typeof t?t:null==t?al:"object"==W(t)?Vs(t)?Hi(t[0],t[1]):Ui(t):vl(t)}function Wi(t){if(!Sa(t))return wn(t);var e=[];for(var n in Ct(t))Nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Bi(t){if(!eo(t))return function(t){var e=[];if(null!=t)for(var n in Ct(t))e.push(n);return e}(t);var e=Sa(t),n=[];for(var i in t)("constructor"!=i||!e&&Nt.call(t,i))&&n.push(i);return n}function ji(t,e){return t<e}function zi(t,e){var n=-1,i=Xs(t)?ot(t.length):[];return vi(t,function(t,r,a){i[++n]=e(t,r,a)}),i}function Ui(t){var e=da(t);return 1==e.length&&e[0][2]?Ma(e[0][0],e[0][1]):function(n){return n===t||Oi(n,t,e)}}function Hi(t,e){return _a(t)&&Ea(e)?Ma(Wa(t),e):function(i){var r=Co(i,t);return r===n&&r===e?Ro(i,t):Li(e,r,3)}}function Gi(t,e,i,r,a){t!==e&&bi(e,function(s,o){if(a||(a=new Jn),eo(s))!function(t,e,i,r,a,s,o){var l=Ta(t,i),u=Ta(e,i),c=o.get(u);if(c)return void ni(t,i,c);var h=s?s(l,u,i+"",t,e,o):n,d=h===n;if(d){var f=Vs(u),v=!f&&Ks(u),p=!f&&!v&&co(u);h=u,f||v||p?Vs(l)?h=l:Ys(l)?h=Ir(l):v?(d=!1,h=Sr(u,!0)):p?(d=!1,h=Mr(u,!0)):h=[]:ao(u)||Gs(u)?(h=l,Gs(l)?h=wo(l):eo(l)&&!Zs(l)||(h=ma(u))):d=!1}d&&(o.set(u,h),a(h,u,r,s,o),o.delete(u));ni(t,i,h)}(t,e,o,i,Gi,r,a);else{var l=r?r(Ta(t,o),s,o+"",t,e,a):n;l===n&&(l=s),ni(t,o,l)}},Lo)}function Vi(t,e){var i=t.length;if(i)return ba(e+=e<0?i:0,i)?t[e]:n}function qi(t,e,n){e=e.length?Oe(e,function(t){return Vs(t)?function(e){return Si(e,1===t.length?t[0]:t)}:t}):[al];var i=-1;e=Oe(e,$e(ca()));var r=zi(t,function(t,n,r){var a=Oe(e,function(e){return e(t)});return{criteria:a,index:++i,value:t}});return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(r,function(t,e){return function(t,e,n){var i=-1,r=t.criteria,a=e.criteria,s=r.length,o=n.length;for(;++i<s;){var l=Cr(r[i],a[i]);if(l)return i>=o?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)})}function Xi(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var s=e[i],o=Si(t,s);n(o,s)&&er(a,kr(s,t),o)}return a}function Yi(t,e,n,i){var r=i?Ge:He,a=-1,s=e.length,o=t;for(t===e&&(e=Ir(e)),n&&(o=Oe(t,$e(n)));++a<s;)for(var l=0,u=e[a],c=n?n(u):u;(l=r(o,c,l,i))>-1;)o!==t&&Jt.call(o,l,1),Jt.call(t,l,1);return t}function Ki(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;ba(r)?Jt.call(t,r,1):fr(t,r)}}return t}function Qi(t,e){return t+ye(xn()*(e-t+1))}function Ji(t,e){var n="";if(!t||e<1||e>d)return n;do{e%2&&(n+=t),(e=ye(e/2))&&(t+=t)}while(e);return n}function Zi(t,e){return Da(Ca(t,e,al),t+"")}function $i(t){return $n(Uo(t))}function tr(t,e){var n=Uo(t);return Fa(n,ui(e,0,n.length))}function er(t,e,i,r){if(!eo(t))return t;for(var a=-1,s=(e=kr(e,t)).length,o=s-1,l=t;null!=l&&++a<s;){var u=Wa(e[a]),c=i;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(a!=o){var h=l[u];(c=r?r(h,u,l):n)===n&&(c=eo(h)?h:ba(e[a+1])?[]:{})}ii(l,u,c),l=l[u]}return t}var nr=Pn?function(t,e){return Pn.set(t,e),t}:al,ir=re?function(t,e){return re(t,"toString",{configurable:!0,enumerable:!1,value:nl(e),writable:!0})}:al;function rr(t){return Fa(Uo(t))}function ar(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=ot(r);++i<r;)a[i]=t[i+e];return a}function sr(t,e){var n;return vi(t,function(t,i,r){return!(n=e(t,i,r))}),!!n}function or(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var a=i+r>>>1,s=t[a];null!==s&&!uo(s)&&(n?s<=e:s<e)?i=a+1:r=a}return r}return lr(t,e,al,n)}function lr(t,e,i,r){var a=0,s=null==t?0:t.length;if(0===s)return 0;for(var o=(e=i(e))!=e,l=null===e,u=uo(e),c=e===n;a<s;){var h=ye((a+s)/2),d=i(t[h]),f=d!==n,v=null===d,p=d==d,g=uo(d);if(o)var y=r||p;else y=c?p&&(r||f):l?p&&f&&(r||!v):u?p&&f&&!v&&(r||!g):!v&&!g&&(r?d<=e:d<e);y?a=h+1:s=h}return kn(s,4294967294)}function ur(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var s=t[n],o=e?e(s):s;if(!n||!zs(o,l)){var l=o;a[r++]=0===s?0:s}}return a}function cr(t){return"number"==typeof t?t:uo(t)?f:+t}function hr(t){if("string"==typeof t)return t;if(Vs(t))return Oe(t,hr)+"";if(uo(t))return zn?zn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function dr(t,e,n){var i=-1,r=De,a=t.length,s=!0,o=[],l=o;if(n)s=!1,r=Le;else if(a>=200){var u=e?null:Jr(t);if(u)return dn(u);s=!1,r=en,l=new Qn}else l=e?[]:o;t:for(;++i<a;){var c=t[i],h=e?e(c):c;if(c=n||0!==c?c:0,s&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),o.push(c)}else r(l,h,n)||(l!==o&&l.push(h),o.push(c))}return o}function fr(t,e){return null==(t=Ra(t,e=kr(e,t)))||delete t[Wa(Ja(e))]}function vr(t,e,n,i){return er(t,e,n(Si(t,e)),i)}function pr(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?ar(t,i?0:a,i?a+1:r):ar(t,i?a+1:0,i?r:a)}function gr(t,e){var n=t;return n instanceof qn&&(n=n.value()),Ne(e,function(t,e){return e.func.apply(e.thisArg,Fe([t],e.args))},n)}function yr(t,e,n){var i=t.length;if(i<2)return i?dr(t[0]):[];for(var r=-1,a=ot(i);++r<i;)for(var s=t[r],o=-1;++o<i;)o!=r&&(a[r]=fi(a[r]||s,t[o],e,n));return dr(wi(a,1),e,n)}function mr(t,e,i){for(var r=-1,a=t.length,s=e.length,o={};++r<a;){var l=r<s?e[r]:n;i(o,t[r],l)}return o}function wr(t){return Ys(t)?t:[]}function br(t){return"function"==typeof t?t:al}function kr(t,e){return Vs(t)?t:_a(t,e)?[t]:Na(bo(t))}var _r=Zi;function Ar(t,e,i){var r=t.length;return i=i===n?r:i,!e&&i>=r?t:ar(t,e,i)}var xr=ce||function(t){return pe.clearTimeout(t)};function Sr(t,e){if(e)return t.slice();var n=t.length,i=Xt?Xt(n):new t.constructor(n);return t.copy(i),i}function Er(t){var e=new t.constructor(t.byteLength);return new qt(e).set(new qt(t)),e}function Mr(t,e){var n=e?Er(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Cr(t,e){if(t!==e){var i=t!==n,r=null===t,a=t==t,s=uo(t),o=e!==n,l=null===e,u=e==e,c=uo(e);if(!l&&!c&&!s&&t>e||s&&o&&u&&!l&&!c||r&&o&&u||!i&&u||!a)return 1;if(!r&&!s&&!c&&t<e||c&&i&&a&&!r&&!s||l&&i&&a||!o&&a||!u)return-1}return 0}function Rr(t,e,n,i){for(var r=-1,a=t.length,s=n.length,o=-1,l=e.length,u=bn(a-s,0),c=ot(l+u),h=!i;++o<l;)c[o]=e[o];for(;++r<s;)(h||r<a)&&(c[n[r]]=t[r]);for(;u--;)c[o++]=t[r++];return c}function Tr(t,e,n,i){for(var r=-1,a=t.length,s=-1,o=n.length,l=-1,u=e.length,c=bn(a-o,0),h=ot(c+u),d=!i;++r<c;)h[r]=t[r];for(var f=r;++l<u;)h[f+l]=e[l];for(;++s<o;)(d||r<a)&&(h[f+n[s]]=t[r++]);return h}function Ir(t,e){var n=-1,i=t.length;for(e||(e=ot(i));++n<i;)e[n]=t[n];return e}function Pr(t,e,i,r){var a=!i;i||(i={});for(var s=-1,o=e.length;++s<o;){var l=e[s],u=r?r(i[l],t[l],l,i,t):n;u===n&&(u=t[l]),a?oi(i,l,u):ii(i,l,u)}return i}function Dr(t,e){return function(n,i){var r=Vs(n)?Ce:ai,a=e?e():{};return r(n,t,ca(i,2),a)}}function Lr(t){return Zi(function(e,i){var r=-1,a=i.length,s=a>1?i[a-1]:n,o=a>2?i[2]:n;for(s=t.length>3&&"function"==typeof s?(a--,s):n,o&&ka(i[0],i[1],o)&&(s=a<3?n:s,a=1),e=Ct(e);++r<a;){var l=i[r];l&&t(e,l,r,s)}return e})}function Or(t,e){return function(n,i){if(null==n)return n;if(!Xs(n))return t(n,i);for(var r=n.length,a=e?r:-1,s=Ct(n);(e?a--:++a<r)&&!1!==i(s[a],a,s););return n}}function Fr(t){return function(e,n,i){for(var r=-1,a=Ct(e),s=i(e),o=s.length;o--;){var l=s[t?o:++r];if(!1===n(a[l],l,a))break}return e}}function Nr(t){return function(e){var i=ln(e=bo(e))?pn(e):n,r=i?i[0]:e.charAt(0),a=i?Ar(i,1).join(""):e.slice(1);return r[t]()+a}}function Wr(t){return function(e){return Ne($o(Vo(e).replace(te,"")),t,"")}}function Br(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Hn(t.prototype),i=t.apply(n,e);return eo(i)?i:n}}function jr(t){return function(e,i,r){var a=Ct(e);if(!Xs(e)){var s=ca(i,3);e=Do(e),i=function(t){return s(a[t],t,a)}}var o=t(e,i,r);return o>-1?a[s?e[o]:o]:n}}function zr(t){return ra(function(e){var r=e.length,a=r,s=Vn.prototype.thru;for(t&&e.reverse();a--;){var o=e[a];if("function"!=typeof o)throw new It(i);if(s&&!l&&"wrapper"==la(o))var l=new Vn([],!0)}for(a=l?a:r;++a<r;){var u=la(o=e[a]),c="wrapper"==u?oa(o):n;l=c&&Aa(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[la(c[0])].apply(l,c[3]):1==o.length&&Aa(o)?l[u]():l.thru(o)}return function(){var t=arguments,n=t[0];if(l&&1==t.length&&Vs(n))return l.plant(n).value();for(var i=0,a=r?e[i].apply(this,t):n;++i<r;)a=e[i].call(this,a);return a}})}function Ur(t,e,i,r,a,s,o,l,c,h){var d=e&u,f=1&e,v=2&e,p=24&e,g=512&e,y=v?n:Br(t);return function u(){for(var m=arguments.length,w=ot(m),b=m;b--;)w[b]=arguments[b];if(p)var k=ua(u),_=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(w,k);if(r&&(w=Rr(w,r,a,p)),s&&(w=Tr(w,s,o,p)),m-=_,p&&m<h){var A=hn(w,k);return Kr(t,e,Ur,u.placeholder,i,w,A,l,c,h-m)}var x=f?i:this,S=v?x[t]:t;return m=w.length,l?w=function(t,e){var i=t.length,r=kn(e.length,i),a=Ir(t);for(;r--;){var s=e[r];t[r]=ba(s,i)?a[s]:n}return t}(w,l):g&&m>1&&w.reverse(),d&&c<m&&(w.length=c),this&&this!==pe&&this instanceof u&&(S=y||Br(S)),S.apply(x,w)}}function Hr(t,e){return function(n,i){return function(t,e,n,i){return _i(t,function(t,r,a){e(i,n(t),r,a)}),i}(n,t,e(i),{})}}function Gr(t,e){return function(i,r){var a;if(i===n&&r===n)return e;if(i!==n&&(a=i),r!==n){if(a===n)return r;"string"==typeof i||"string"==typeof r?(i=hr(i),r=hr(r)):(i=cr(i),r=cr(r)),a=t(i,r)}return a}}function Vr(t){return ra(function(e){return e=Oe(e,$e(ca())),Zi(function(n){var i=this;return t(e,function(t){return Me(t,i,n)})})})}function qr(t,e){var i=(e=e===n?" ":hr(e)).length;if(i<2)return i?Ji(e,t):e;var r=Ji(e,ge(t/vn(e)));return ln(e)?Ar(pn(r),0,t).join(""):r.slice(0,t)}function Xr(t){return function(e,i,r){return r&&"number"!=typeof r&&ka(e,i,r)&&(i=r=n),e=po(e),i===n?(i=e,e=0):i=po(i),function(t,e,n,i){for(var r=-1,a=bn(ge((e-t)/(n||1)),0),s=ot(a);a--;)s[i?a:++r]=t,t+=n;return s}(e,i,r=r===n?e<i?1:-1:po(r),t)}}function Yr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=mo(e),n=mo(n)),t(e,n)}}function Kr(t,e,i,r,a,s,u,c,h,d){var f=8&e;e|=f?o:l,4&(e&=~(f?l:o))||(e&=-4);var v=[t,e,a,f?s:n,f?u:n,f?n:s,f?n:u,c,h,d],p=i.apply(n,v);return Aa(t)&&Ia(p,v),p.placeholder=r,La(p,t,e)}function Qr(t){var e=Mt[t];return function(t,n){if(t=mo(t),(n=null==n?0:kn(go(n),292))&&je(t)){var i=(bo(t)+"e").split("e");return+((i=(bo(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Jr=Rn&&1/dn(new Rn([,-0]))[1]==h?function(t){return new Rn(t)}:cl;function Zr(t){return function(e){var n=ga(e);return n==A?un(e):n==C?fn(e):function(t,e){return Oe(e,function(e){return[e,t[e]]})}(e,t(e))}}function $r(t,e,r,h,d,f,v,p){var g=2&e;if(!g&&"function"!=typeof t)throw new It(i);var y=h?h.length:0;if(y||(e&=-97,h=d=n),v=v===n?v:bn(go(v),0),p=p===n?p:go(p),y-=d?d.length:0,e&l){var m=h,w=d;h=d=n}var b=g?n:oa(t),k=[t,e,r,h,d,m,w,f,v,p];if(b&&function(t,e){var n=t[1],i=e[1],r=n|i,s=r<131,o=i==u&&8==n||i==u&&n==c&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!s&&!o)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var l=e[3];if(l){var h=t[3];t[3]=h?Rr(h,l,e[4]):l,t[4]=h?hn(t[3],a):e[4]}(l=e[5])&&(h=t[5],t[5]=h?Tr(h,l,e[6]):l,t[6]=h?hn(t[5],a):e[6]);(l=e[7])&&(t[7]=l);i&u&&(t[8]=null==t[8]?e[8]:kn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=r}(k,b),t=k[0],e=k[1],r=k[2],h=k[3],d=k[4],!(p=k[9]=k[9]===n?g?0:t.length:bn(k[9]-y,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||e==s?function(t,e,i){var r=Br(t);return function a(){for(var s=arguments.length,o=ot(s),l=s,u=ua(a);l--;)o[l]=arguments[l];var c=s<3&&o[0]!==u&&o[s-1]!==u?[]:hn(o,u);return(s-=c.length)<i?Kr(t,e,Ur,a.placeholder,n,o,c,n,n,i-s):Me(this&&this!==pe&&this instanceof a?r:t,this,o)}}(t,e,p):e!=o&&33!=e||d.length?Ur.apply(n,k):function(t,e,n,i){var r=1&e,a=Br(t);return function e(){for(var s=-1,o=arguments.length,l=-1,u=i.length,c=ot(u+o),h=this&&this!==pe&&this instanceof e?a:t;++l<u;)c[l]=i[l];for(;o--;)c[l++]=arguments[++s];return Me(h,r?n:this,c)}}(t,e,r,h);else var _=function(t,e,n){var i=1&e,r=Br(t);return function e(){return(this&&this!==pe&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,r);return La((b?nr:Ia)(_,k),t,e)}function ta(t,e,i,r){return t===n||zs(t,Lt[i])&&!Nt.call(r,i)?e:t}function ea(t,e,i,r,a,s){return eo(t)&&eo(e)&&(s.set(e,t),Gi(t,e,n,ea,s),s.delete(e)),t}function na(t){return ao(t)?n:t}function ia(t,e,i,r,a,s){var o=1&i,l=t.length,u=e.length;if(l!=u&&!(o&&u>l))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var d=-1,f=!0,v=2&i?new Qn:n;for(s.set(t,e),s.set(e,t);++d<l;){var p=t[d],g=e[d];if(r)var y=o?r(g,p,d,e,t,s):r(p,g,d,t,e,s);if(y!==n){if(y)continue;f=!1;break}if(v){if(!Be(e,function(t,e){if(!en(v,e)&&(p===t||a(p,t,i,r,s)))return v.push(e)})){f=!1;break}}else if(p!==g&&!a(p,g,i,r,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function ra(t){return Da(Ca(t,n,qa),t+"")}function aa(t){return Ei(t,Do,va)}function sa(t){return Ei(t,Lo,pa)}var oa=Pn?function(t){return Pn.get(t)}:cl;function la(t){for(var e=t.name+"",n=Dn[e],i=Nt.call(Dn,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function ua(t){return(Nt.call(Un,"placeholder")?Un:t).placeholder}function ca(){var t=Un.iteratee||sl;return t=t===sl?Ni:t,arguments.length?t(arguments[0],arguments[1]):t}function ha(t,e){var n,i,r=t.__data__;return("string"==(i=W(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function da(t){for(var e=Do(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Ea(r)]}return e}function fa(t,e){var i=function(t,e){return null==t?n:t[e]}(t,e);return Fi(i)?i:n}var va=we?function(t){return null==t?[]:(t=Ct(t),Pe(we(t),function(e){return Qt.call(t,e)}))}:yl,pa=we?function(t){for(var e=[];t;)Fe(e,va(t)),t=Yt(t);return e}:yl,ga=Mi;function ya(t,e,n){for(var i=-1,r=(e=kr(e,t)).length,a=!1;++i<r;){var s=Wa(e[i]);if(!(a=null!=t&&n(t,s)))break;t=t[s]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&to(r)&&ba(s,r)&&(Vs(t)||Gs(t))}function ma(t){return"function"!=typeof t.constructor||Sa(t)?{}:Hn(Yt(t))}function wa(t){return Vs(t)||Gs(t)||!!(Zt&&t&&t[Zt])}function ba(t,e){var n=W(t);return!!(e=null==e?d:e)&&("number"==n||"symbol"!=n&&bt.test(t))&&t>-1&&t%1==0&&t<e}function ka(t,e,n){if(!eo(n))return!1;var i=W(e);return!!("number"==i?Xs(n)&&ba(e,n.length):"string"==i&&e in n)&&zs(n[e],t)}function _a(t,e){if(Vs(t))return!1;var n=W(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!uo(t))||(nt.test(t)||!tt.test(t)||null!=e&&t in Ct(e))}function Aa(t){var e=la(t),n=Un[e];if("function"!=typeof n||!(e in qn.prototype))return!1;if(t===n)return!0;var i=oa(n);return!!i&&t===i[0]}(En&&ga(new En(new ArrayBuffer(1)))!=D||Mn&&ga(new Mn)!=A||Cn&&ga(Cn.resolve())!=E||Rn&&ga(new Rn)!=C||Tn&&ga(new Tn)!=I)&&(ga=function(t){var e=Mi(t),i=e==S?t.constructor:n,r=i?Ba(i):"";if(r)switch(r){case Ln:return D;case On:return A;case Fn:return E;case Nn:return C;case Wn:return I}return e});var xa=Ot?Zs:ml;function Sa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lt)}function Ea(t){return t==t&&!eo(t)}function Ma(t,e){return function(i){return null!=i&&(i[t]===e&&(e!==n||t in Ct(i)))}}function Ca(t,e,i){return e=bn(e===n?t.length-1:e,0),function(){for(var n=arguments,r=-1,a=bn(n.length-e,0),s=ot(a);++r<a;)s[r]=n[e+r];r=-1;for(var o=ot(e+1);++r<e;)o[r]=n[r];return o[e]=i(s),Me(t,this,o)}}function Ra(t,e){return e.length<2?t:Si(t,ar(e,0,-1))}function Ta(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ia=Oa(nr),Pa=ve||function(t,e){return pe.setTimeout(t,e)},Da=Oa(ir);function La(t,e,n){var i=e+"";return Da(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(lt,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Re(p,function(n){var i="_."+n[0];e&n[1]&&!De(t,i)&&t.push(i)}),t.sort()}(function(t){var e=t.match(ut);return e?e[1].split(ct):[]}(i),n)))}function Oa(t){var e=0,i=0;return function(){var r=_n(),a=16-(r-i);if(i=r,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function Fa(t,e){var i=-1,r=t.length,a=r-1;for(e=e===n?r:e;++i<e;){var s=Qi(i,a),o=t[s];t[s]=t[i],t[i]=o}return t.length=e,t}var Na=function(t){var e=Os(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(it,function(t,n,i,r){e.push(i?r.replace(ft,"$1"):n||t)}),e});function Wa(t){if("string"==typeof t||uo(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ba(t){if(null!=t){try{return Ft.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ja(t){if(t instanceof qn)return t.clone();var e=new Vn(t.__wrapped__,t.__chain__);return e.__actions__=Ir(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var za=Zi(function(t,e){return Ys(t)?fi(t,wi(e,1,Ys,!0)):[]}),Ua=Zi(function(t,e){var i=Ja(e);return Ys(i)&&(i=n),Ys(t)?fi(t,wi(e,1,Ys,!0),ca(i,2)):[]}),Ha=Zi(function(t,e){var i=Ja(e);return Ys(i)&&(i=n),Ys(t)?fi(t,wi(e,1,Ys,!0),n,i):[]});function Ga(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:go(n);return r<0&&(r=bn(i+r,0)),Ue(t,ca(e,3),r)}function Va(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var a=r-1;return i!==n&&(a=go(i),a=i<0?bn(r+a,0):kn(a,r-1)),Ue(t,ca(e,3),a,!0)}function qa(t){return(null==t?0:t.length)?wi(t,1):[]}function Xa(t){return t&&t.length?t[0]:n}var Ya=Zi(function(t){var e=Oe(t,wr);return e.length&&e[0]===t[0]?Ii(e):[]}),Ka=Zi(function(t){var e=Ja(t),i=Oe(t,wr);return e===Ja(i)?e=n:i.pop(),i.length&&i[0]===t[0]?Ii(i,ca(e,2)):[]}),Qa=Zi(function(t){var e=Ja(t),i=Oe(t,wr);return(e="function"==typeof e?e:n)&&i.pop(),i.length&&i[0]===t[0]?Ii(i,n,e):[]});function Ja(t){var e=null==t?0:t.length;return e?t[e-1]:n}var Za=Zi($a);function $a(t,e){return t&&t.length&&e&&e.length?Yi(t,e):t}var ts=ra(function(t,e){var n=null==t?0:t.length,i=li(t,e);return Ki(t,Oe(e,function(t){return ba(t,n)?+t:t}).sort(Cr)),i});function es(t){return null==t?t:Sn.call(t)}var ns=Zi(function(t){return dr(wi(t,1,Ys,!0))}),is=Zi(function(t){var e=Ja(t);return Ys(e)&&(e=n),dr(wi(t,1,Ys,!0),ca(e,2))}),rs=Zi(function(t){var e=Ja(t);return e="function"==typeof e?e:n,dr(wi(t,1,Ys,!0),n,e)});function as(t){if(!t||!t.length)return[];var e=0;return t=Pe(t,function(t){if(Ys(t))return e=bn(t.length,e),!0}),Je(e,function(e){return Oe(t,Xe(e))})}function ss(t,e){if(!t||!t.length)return[];var i=as(t);return null==e?i:Oe(i,function(t){return Me(e,n,t)})}var os=Zi(function(t,e){return Ys(t)?fi(t,e):[]}),ls=Zi(function(t){return yr(Pe(t,Ys))}),us=Zi(function(t){var e=Ja(t);return Ys(e)&&(e=n),yr(Pe(t,Ys),ca(e,2))}),cs=Zi(function(t){var e=Ja(t);return e="function"==typeof e?e:n,yr(Pe(t,Ys),n,e)}),hs=Zi(as);var ds=Zi(function(t){var e=t.length,i=e>1?t[e-1]:n;return i="function"==typeof i?(t.pop(),i):n,ss(t,i)});function fs(t){var e=Un(t);return e.__chain__=!0,e}function vs(t,e){return e(t)}var ps=ra(function(t){var e=t.length,i=e?t[0]:0,r=this.__wrapped__,a=function(e){return li(e,t)};return!(e>1||this.__actions__.length)&&r instanceof qn&&ba(i)?((r=r.slice(i,+i+(e?1:0))).__actions__.push({func:vs,args:[a],thisArg:n}),new Vn(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(n),t})):this.thru(a)});var gs=Dr(function(t,e,n){Nt.call(t,n)?++t[n]:oi(t,n,1)});var ys=jr(Ga),ms=jr(Va);function ws(t,e){return(Vs(t)?Re:vi)(t,ca(e,3))}function bs(t,e){return(Vs(t)?Te:pi)(t,ca(e,3))}var ks=Dr(function(t,e,n){Nt.call(t,n)?t[n].push(e):oi(t,n,[e])});var _s=Zi(function(t,e,n){var i=-1,r="function"==typeof e,a=Xs(t)?ot(t.length):[];return vi(t,function(t){a[++i]=r?Me(e,t,n):Pi(t,e,n)}),a}),As=Dr(function(t,e,n){oi(t,n,e)});function xs(t,e){return(Vs(t)?Oe:zi)(t,ca(e,3))}var Ss=Dr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Es=Zi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&ka(t,e[0],e[1])?e=[]:n>2&&ka(e[0],e[1],e[2])&&(e=[e[0]]),qi(t,wi(e,1),[])}),Ms=fe||function(){return pe.Date.now()};function Cs(t,e,i){return e=i?n:e,e=t&&null==e?t.length:e,$r(t,u,n,n,n,n,e)}function Rs(t,e){var r;if("function"!=typeof e)throw new It(i);return t=go(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=n),r}}var Ts=Zi(function(t,e,n){var i=1;if(n.length){var r=hn(n,ua(Ts));i|=o}return $r(t,i,e,n,r)}),Is=Zi(function(t,e,n){var i=3;if(n.length){var r=hn(n,ua(Is));i|=o}return $r(e,i,t,n,r)});function Ps(t,e,r){var a,s,o,l,u,c,h=0,d=!1,f=!1,v=!0;if("function"!=typeof t)throw new It(i);function p(e){var i=a,r=s;return a=s=n,h=e,l=t.apply(r,i)}function g(t){var i=t-c;return c===n||i>=e||i<0||f&&t-h>=o}function y(){var t=Ms();if(g(t))return m(t);u=Pa(y,function(t){var n=e-(t-c);return f?kn(n,o-(t-h)):n}(t))}function m(t){return u=n,v&&a?p(t):(a=s=n,l)}function w(){var t=Ms(),i=g(t);if(a=arguments,s=this,c=t,i){if(u===n)return function(t){return h=t,u=Pa(y,e),d?p(t):l}(c);if(f)return xr(u),u=Pa(y,e),p(c)}return u===n&&(u=Pa(y,e)),l}return e=mo(e)||0,eo(r)&&(d=!!r.leading,o=(f="maxWait"in r)?bn(mo(r.maxWait)||0,e):o,v="trailing"in r?!!r.trailing:v),w.cancel=function(){u!==n&&xr(u),h=0,a=c=s=u=n},w.flush=function(){return u===n?l:m(Ms())},w}var Ds=Zi(function(t,e){return di(t,1,e)}),Ls=Zi(function(t,e,n){return di(t,mo(e)||0,n)});function Os(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new It(i);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var s=t.apply(this,i);return n.cache=a.set(r,s)||a,s};return n.cache=new(Os.Cache||Kn),n}function Fs(t){if("function"!=typeof t)throw new It(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Os.Cache=Kn;var Ns=_r(function(t,e){var n=(e=1==e.length&&Vs(e[0])?Oe(e[0],$e(ca())):Oe(wi(e,1),$e(ca()))).length;return Zi(function(i){for(var r=-1,a=kn(i.length,n);++r<a;)i[r]=e[r].call(this,i[r]);return Me(t,this,i)})}),Ws=Zi(function(t,e){var i=hn(e,ua(Ws));return $r(t,o,n,e,i)}),Bs=Zi(function(t,e){var i=hn(e,ua(Bs));return $r(t,l,n,e,i)}),js=ra(function(t,e){return $r(t,c,n,n,n,e)});function zs(t,e){return t===e||t!=t&&e!=e}var Us=Yr(Ci),Hs=Yr(function(t,e){return t>=e}),Gs=Di(function(){return arguments}())?Di:function(t){return no(t)&&Nt.call(t,"callee")&&!Qt.call(t,"callee")},Vs=ot.isArray,qs=ke?$e(ke):function(t){return no(t)&&Mi(t)==P};function Xs(t){return null!=t&&to(t.length)&&!Zs(t)}function Ys(t){return no(t)&&Xs(t)}var Ks=be||ml,Qs=_e?$e(_e):function(t){return no(t)&&Mi(t)==w};function Js(t){if(!no(t))return!1;var e=Mi(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ao(t)}function Zs(t){if(!eo(t))return!1;var e=Mi(t);return e==k||e==_||"[object AsyncFunction]"==e||"[object Proxy]"==e}function $s(t){return"number"==typeof t&&t==go(t)}function to(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}function eo(t){var e=W(t);return null!=t&&("object"==e||"function"==e)}function no(t){return null!=t&&"object"==W(t)}var io=Ae?$e(Ae):function(t){return no(t)&&ga(t)==A};function ro(t){return"number"==typeof t||no(t)&&Mi(t)==x}function ao(t){if(!no(t)||Mi(t)!=S)return!1;var e=Yt(t);if(null===e)return!0;var n=Nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ft.call(n)==zt}var so=xe?$e(xe):function(t){return no(t)&&Mi(t)==M};var oo=Se?$e(Se):function(t){return no(t)&&ga(t)==C};function lo(t){return"string"==typeof t||!Vs(t)&&no(t)&&Mi(t)==R}function uo(t){return"symbol"==W(t)||no(t)&&Mi(t)==T}var co=Ee?$e(Ee):function(t){return no(t)&&to(t.length)&&!!le[Mi(t)]};var ho=Yr(ji),fo=Yr(function(t,e){return t<=e});function vo(t){if(!t)return[];if(Xs(t))return lo(t)?pn(t):Ir(t);if($t&&t[$t])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[$t]());var e=ga(t);return(e==A?un:e==C?dn:Uo)(t)}function po(t){return t?(t=mo(t))===h||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function go(t){var e=po(t),n=e%1;return e==e?n?e-n:e:0}function yo(t){return t?ui(go(t),0,v):0}function mo(t){if("number"==typeof t)return t;if(uo(t))return f;if(eo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=eo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ze(t);var n=yt.test(t);return n||wt.test(t)?de(t.slice(2),n?2:8):gt.test(t)?f:+t}function wo(t){return Pr(t,Lo(t))}function bo(t){return null==t?"":hr(t)}var ko=Lr(function(t,e){if(Sa(e)||Xs(e))Pr(e,Do(e),t);else for(var n in e)Nt.call(e,n)&&ii(t,n,e[n])}),_o=Lr(function(t,e){Pr(e,Lo(e),t)}),Ao=Lr(function(t,e,n,i){Pr(e,Lo(e),t,i)}),xo=Lr(function(t,e,n,i){Pr(e,Do(e),t,i)}),So=ra(li);var Eo=Zi(function(t,e){t=Ct(t);var i=-1,r=e.length,a=r>2?e[2]:n;for(a&&ka(e[0],e[1],a)&&(r=1);++i<r;)for(var s=e[i],o=Lo(s),l=-1,u=o.length;++l<u;){var c=o[l],h=t[c];(h===n||zs(h,Lt[c])&&!Nt.call(t,c))&&(t[c]=s[c])}return t}),Mo=Zi(function(t){return t.push(n,ea),Me(Fo,n,t)});function Co(t,e,i){var r=null==t?n:Si(t,e);return r===n?i:r}function Ro(t,e){return null!=t&&ya(t,e,Ti)}var To=Hr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),t[e]=n},nl(al)),Io=Hr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),Nt.call(t,e)?t[e].push(n):t[e]=[n]},ca),Po=Zi(Pi);function Do(t){return Xs(t)?Zn(t):Wi(t)}function Lo(t){return Xs(t)?Zn(t,!0):Bi(t)}var Oo=Lr(function(t,e,n){Gi(t,e,n)}),Fo=Lr(function(t,e,n,i){Gi(t,e,n,i)}),No=ra(function(t,e){var n={};if(null==t)return n;var i=!1;e=Oe(e,function(e){return e=kr(e,t),i||(i=e.length>1),e}),Pr(t,sa(t),n),i&&(n=ci(n,7,na));for(var r=e.length;r--;)fr(n,e[r]);return n});var Wo=ra(function(t,e){return null==t?{}:function(t,e){return Xi(t,e,function(e,n){return Ro(t,n)})}(t,e)});function Bo(t,e){if(null==t)return{};var n=Oe(sa(t),function(t){return[t]});return e=ca(e),Xi(t,n,function(t,n){return e(t,n[0])})}var jo=Zr(Do),zo=Zr(Lo);function Uo(t){return null==t?[]:tn(t,Do(t))}var Ho=Wr(function(t,e,n){return e=e.toLowerCase(),t+(n?Go(e):e)});function Go(t){return Zo(bo(t).toLowerCase())}function Vo(t){return(t=bo(t))&&t.replace(kt,an).replace(ee,"")}var qo=Wr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Xo=Wr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Yo=Nr("toLowerCase");var Ko=Wr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var Qo=Wr(function(t,e,n){return t+(n?" ":"")+Zo(e)});var Jo=Wr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Zo=Nr("toUpperCase");function $o(t,e,i){return t=bo(t),(e=i?n:e)===n?function(t){return ae.test(t)}(t)?function(t){return t.match(ie)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var tl=Zi(function(t,e){try{return Me(t,n,e)}catch(t){return Js(t)?t:new St(t)}}),el=ra(function(t,e){return Re(e,function(e){e=Wa(e),oi(t,e,Ts(t[e],t))}),t});function nl(t){return function(){return t}}var il=zr(),rl=zr(!0);function al(t){return t}function sl(t){return Ni("function"==typeof t?t:ci(t,1))}var ol=Zi(function(t,e){return function(n){return Pi(n,t,e)}}),ll=Zi(function(t,e){return function(n){return Pi(t,n,e)}});function ul(t,e,n){var i=Do(e),r=xi(e,i);null!=n||eo(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=xi(e,Do(e)));var a=!(eo(n)&&"chain"in n&&!n.chain),s=Zs(t);return Re(r,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=Ir(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Fe([this.value()],arguments))})}),t}function cl(){}var hl=Vr(Oe),dl=Vr(Ie),fl=Vr(Be);function vl(t){return _a(t)?Xe(Wa(t)):function(t){return function(e){return Si(e,t)}}(t)}var pl=Xr(),gl=Xr(!0);function yl(){return[]}function ml(){return!1}var wl=Gr(function(t,e){return t+e},0),bl=Qr("ceil"),kl=Gr(function(t,e){return t/e},1),_l=Qr("floor");var Al,xl=Gr(function(t,e){return t*e},1),Sl=Qr("round"),El=Gr(function(t,e){return t-e},0);return Un.after=function(t,e){if("function"!=typeof e)throw new It(i);return t=go(t),function(){if(--t<1)return e.apply(this,arguments)}},Un.ary=Cs,Un.assign=ko,Un.assignIn=_o,Un.assignInWith=Ao,Un.assignWith=xo,Un.at=So,Un.before=Rs,Un.bind=Ts,Un.bindAll=el,Un.bindKey=Is,Un.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Vs(t)?t:[t]},Un.chain=fs,Un.chunk=function(t,e,i){e=(i?ka(t,e,i):e===n)?1:bn(go(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var a=0,s=0,o=ot(ge(r/e));a<r;)o[s++]=ar(t,a,a+=e);return o},Un.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r},Un.concat=function(){var t=arguments.length;if(!t)return[];for(var e=ot(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Fe(Vs(n)?Ir(n):[n],wi(e,1))},Un.cond=function(t){var e=null==t?0:t.length,n=ca();return t=e?Oe(t,function(t){if("function"!=typeof t[1])throw new It(i);return[n(t[0]),t[1]]}):[],Zi(function(n){for(var i=-1;++i<e;){var r=t[i];if(Me(r[0],this,n))return Me(r[1],this,n)}})},Un.conforms=function(t){return function(t){var e=Do(t);return function(n){return hi(n,t,e)}}(ci(t,1))},Un.constant=nl,Un.countBy=gs,Un.create=function(t,e){var n=Hn(t);return null==e?n:si(n,e)},Un.curry=function t(e,i,r){var a=$r(e,8,n,n,n,n,n,i=r?n:i);return a.placeholder=t.placeholder,a},Un.curryRight=function t(e,i,r){var a=$r(e,s,n,n,n,n,n,i=r?n:i);return a.placeholder=t.placeholder,a},Un.debounce=Ps,Un.defaults=Eo,Un.defaultsDeep=Mo,Un.defer=Ds,Un.delay=Ls,Un.difference=za,Un.differenceBy=Ua,Un.differenceWith=Ha,Un.drop=function(t,e,i){var r=null==t?0:t.length;return r?ar(t,(e=i||e===n?1:go(e))<0?0:e,r):[]},Un.dropRight=function(t,e,i){var r=null==t?0:t.length;return r?ar(t,0,(e=r-(e=i||e===n?1:go(e)))<0?0:e):[]},Un.dropRightWhile=function(t,e){return t&&t.length?pr(t,ca(e,3),!0,!0):[]},Un.dropWhile=function(t,e){return t&&t.length?pr(t,ca(e,3),!0):[]},Un.fill=function(t,e,i,r){var a=null==t?0:t.length;return a?(i&&"number"!=typeof i&&ka(t,e,i)&&(i=0,r=a),function(t,e,i,r){var a=t.length;for((i=go(i))<0&&(i=-i>a?0:a+i),(r=r===n||r>a?a:go(r))<0&&(r+=a),r=i>r?0:yo(r);i<r;)t[i++]=e;return t}(t,e,i,r)):[]},Un.filter=function(t,e){return(Vs(t)?Pe:mi)(t,ca(e,3))},Un.flatMap=function(t,e){return wi(xs(t,e),1)},Un.flatMapDeep=function(t,e){return wi(xs(t,e),h)},Un.flatMapDepth=function(t,e,i){return i=i===n?1:go(i),wi(xs(t,e),i)},Un.flatten=qa,Un.flattenDeep=function(t){return(null==t?0:t.length)?wi(t,h):[]},Un.flattenDepth=function(t,e){return(null==t?0:t.length)?wi(t,e=e===n?1:go(e)):[]},Un.flip=function(t){return $r(t,512)},Un.flow=il,Un.flowRight=rl,Un.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Un.functions=function(t){return null==t?[]:xi(t,Do(t))},Un.functionsIn=function(t){return null==t?[]:xi(t,Lo(t))},Un.groupBy=ks,Un.initial=function(t){return(null==t?0:t.length)?ar(t,0,-1):[]},Un.intersection=Ya,Un.intersectionBy=Ka,Un.intersectionWith=Qa,Un.invert=To,Un.invertBy=Io,Un.invokeMap=_s,Un.iteratee=sl,Un.keyBy=As,Un.keys=Do,Un.keysIn=Lo,Un.map=xs,Un.mapKeys=function(t,e){var n={};return e=ca(e,3),_i(t,function(t,i,r){oi(n,e(t,i,r),t)}),n},Un.mapValues=function(t,e){var n={};return e=ca(e,3),_i(t,function(t,i,r){oi(n,i,e(t,i,r))}),n},Un.matches=function(t){return Ui(ci(t,1))},Un.matchesProperty=function(t,e){return Hi(t,ci(e,1))},Un.memoize=Os,Un.merge=Oo,Un.mergeWith=Fo,Un.method=ol,Un.methodOf=ll,Un.mixin=ul,Un.negate=Fs,Un.nthArg=function(t){return t=go(t),Zi(function(e){return Vi(e,t)})},Un.omit=No,Un.omitBy=function(t,e){return Bo(t,Fs(ca(e)))},Un.once=function(t){return Rs(2,t)},Un.orderBy=function(t,e,i,r){return null==t?[]:(Vs(e)||(e=null==e?[]:[e]),Vs(i=r?n:i)||(i=null==i?[]:[i]),qi(t,e,i))},Un.over=hl,Un.overArgs=Ns,Un.overEvery=dl,Un.overSome=fl,Un.partial=Ws,Un.partialRight=Bs,Un.partition=Ss,Un.pick=Wo,Un.pickBy=Bo,Un.property=vl,Un.propertyOf=function(t){return function(e){return null==t?n:Si(t,e)}},Un.pull=Za,Un.pullAll=$a,Un.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Yi(t,e,ca(n,2)):t},Un.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?Yi(t,e,n,i):t},Un.pullAt=ts,Un.range=pl,Un.rangeRight=gl,Un.rearg=js,Un.reject=function(t,e){return(Vs(t)?Pe:mi)(t,Fs(ca(e,3)))},Un.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=ca(e,3);++i<a;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return Ki(t,r),n},Un.rest=function(t,e){if("function"!=typeof t)throw new It(i);return Zi(t,e=e===n?e:go(e))},Un.reverse=es,Un.sampleSize=function(t,e,i){return e=(i?ka(t,e,i):e===n)?1:go(e),(Vs(t)?ti:tr)(t,e)},Un.set=function(t,e,n){return null==t?t:er(t,e,n)},Un.setWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:er(t,e,i,r)},Un.shuffle=function(t){return(Vs(t)?ei:rr)(t)},Un.slice=function(t,e,i){var r=null==t?0:t.length;return r?(i&&"number"!=typeof i&&ka(t,e,i)?(e=0,i=r):(e=null==e?0:go(e),i=i===n?r:go(i)),ar(t,e,i)):[]},Un.sortBy=Es,Un.sortedUniq=function(t){return t&&t.length?ur(t):[]},Un.sortedUniqBy=function(t,e){return t&&t.length?ur(t,ca(e,2)):[]},Un.split=function(t,e,i){return i&&"number"!=typeof i&&ka(t,e,i)&&(e=i=n),(i=i===n?v:i>>>0)?(t=bo(t))&&("string"==typeof e||null!=e&&!so(e))&&!(e=hr(e))&&ln(t)?Ar(pn(t),0,i):t.split(e,i):[]},Un.spread=function(t,e){if("function"!=typeof t)throw new It(i);return e=null==e?0:bn(go(e),0),Zi(function(n){var i=n[e],r=Ar(n,0,e);return i&&Fe(r,i),Me(t,this,r)})},Un.tail=function(t){var e=null==t?0:t.length;return e?ar(t,1,e):[]},Un.take=function(t,e,i){return t&&t.length?ar(t,0,(e=i||e===n?1:go(e))<0?0:e):[]},Un.takeRight=function(t,e,i){var r=null==t?0:t.length;return r?ar(t,(e=r-(e=i||e===n?1:go(e)))<0?0:e,r):[]},Un.takeRightWhile=function(t,e){return t&&t.length?pr(t,ca(e,3),!1,!0):[]},Un.takeWhile=function(t,e){return t&&t.length?pr(t,ca(e,3)):[]},Un.tap=function(t,e){return e(t),t},Un.throttle=function(t,e,n){var r=!0,a=!0;if("function"!=typeof t)throw new It(i);return eo(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Ps(t,e,{leading:r,maxWait:e,trailing:a})},Un.thru=vs,Un.toArray=vo,Un.toPairs=jo,Un.toPairsIn=zo,Un.toPath=function(t){return Vs(t)?Oe(t,Wa):uo(t)?[t]:Ir(Na(bo(t)))},Un.toPlainObject=wo,Un.transform=function(t,e,n){var i=Vs(t),r=i||Ks(t)||co(t);if(e=ca(e,4),null==n){var a=t&&t.constructor;n=r?i?new a:[]:eo(t)&&Zs(a)?Hn(Yt(t)):{}}return(r?Re:_i)(t,function(t,i,r){return e(n,t,i,r)}),n},Un.unary=function(t){return Cs(t,1)},Un.union=ns,Un.unionBy=is,Un.unionWith=rs,Un.uniq=function(t){return t&&t.length?dr(t):[]},Un.uniqBy=function(t,e){return t&&t.length?dr(t,ca(e,2)):[]},Un.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?dr(t,n,e):[]},Un.unset=function(t,e){return null==t||fr(t,e)},Un.unzip=as,Un.unzipWith=ss,Un.update=function(t,e,n){return null==t?t:vr(t,e,br(n))},Un.updateWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:vr(t,e,br(i),r)},Un.values=Uo,Un.valuesIn=function(t){return null==t?[]:tn(t,Lo(t))},Un.without=os,Un.words=$o,Un.wrap=function(t,e){return Ws(br(e),t)},Un.xor=ls,Un.xorBy=us,Un.xorWith=cs,Un.zip=hs,Un.zipObject=function(t,e){return mr(t||[],e||[],ii)},Un.zipObjectDeep=function(t,e){return mr(t||[],e||[],er)},Un.zipWith=ds,Un.entries=jo,Un.entriesIn=zo,Un.extend=_o,Un.extendWith=Ao,ul(Un,Un),Un.add=wl,Un.attempt=tl,Un.camelCase=Ho,Un.capitalize=Go,Un.ceil=bl,Un.clamp=function(t,e,i){return i===n&&(i=e,e=n),i!==n&&(i=(i=mo(i))==i?i:0),e!==n&&(e=(e=mo(e))==e?e:0),ui(mo(t),e,i)},Un.clone=function(t){return ci(t,4)},Un.cloneDeep=function(t){return ci(t,5)},Un.cloneDeepWith=function(t,e){return ci(t,5,e="function"==typeof e?e:n)},Un.cloneWith=function(t,e){return ci(t,4,e="function"==typeof e?e:n)},Un.conformsTo=function(t,e){return null==e||hi(t,e,Do(e))},Un.deburr=Vo,Un.defaultTo=function(t,e){return null==t||t!=t?e:t},Un.divide=kl,Un.endsWith=function(t,e,i){t=bo(t),e=hr(e);var r=t.length,a=i=i===n?r:ui(go(i),0,r);return(i-=e.length)>=0&&t.slice(i,a)==e},Un.eq=zs,Un.escape=function(t){return(t=bo(t))&&Q.test(t)?t.replace(Y,sn):t},Un.escapeRegExp=function(t){return(t=bo(t))&&at.test(t)?t.replace(rt,"\\$&"):t},Un.every=function(t,e,i){var r=Vs(t)?Ie:gi;return i&&ka(t,e,i)&&(e=n),r(t,ca(e,3))},Un.find=ys,Un.findIndex=Ga,Un.findKey=function(t,e){return ze(t,ca(e,3),_i)},Un.findLast=ms,Un.findLastIndex=Va,Un.findLastKey=function(t,e){return ze(t,ca(e,3),Ai)},Un.floor=_l,Un.forEach=ws,Un.forEachRight=bs,Un.forIn=function(t,e){return null==t?t:bi(t,ca(e,3),Lo)},Un.forInRight=function(t,e){return null==t?t:ki(t,ca(e,3),Lo)},Un.forOwn=function(t,e){return t&&_i(t,ca(e,3))},Un.forOwnRight=function(t,e){return t&&Ai(t,ca(e,3))},Un.get=Co,Un.gt=Us,Un.gte=Hs,Un.has=function(t,e){return null!=t&&ya(t,e,Ri)},Un.hasIn=Ro,Un.head=Xa,Un.identity=al,Un.includes=function(t,e,n,i){t=Xs(t)?t:Uo(t),n=n&&!i?go(n):0;var r=t.length;return n<0&&(n=bn(r+n,0)),lo(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&He(t,e,n)>-1},Un.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:go(n);return r<0&&(r=bn(i+r,0)),He(t,e,r)},Un.inRange=function(t,e,i){return e=po(e),i===n?(i=e,e=0):i=po(i),function(t,e,n){return t>=kn(e,n)&&t<bn(e,n)}(t=mo(t),e,i)},Un.invoke=Po,Un.isArguments=Gs,Un.isArray=Vs,Un.isArrayBuffer=qs,Un.isArrayLike=Xs,Un.isArrayLikeObject=Ys,Un.isBoolean=function(t){return!0===t||!1===t||no(t)&&Mi(t)==m},Un.isBuffer=Ks,Un.isDate=Qs,Un.isElement=function(t){return no(t)&&1===t.nodeType&&!ao(t)},Un.isEmpty=function(t){if(null==t)return!0;if(Xs(t)&&(Vs(t)||"string"==typeof t||"function"==typeof t.splice||Ks(t)||co(t)||Gs(t)))return!t.length;var e=ga(t);if(e==A||e==C)return!t.size;if(Sa(t))return!Wi(t).length;for(var n in t)if(Nt.call(t,n))return!1;return!0},Un.isEqual=function(t,e){return Li(t,e)},Un.isEqualWith=function(t,e,i){var r=(i="function"==typeof i?i:n)?i(t,e):n;return r===n?Li(t,e,n,i):!!r},Un.isError=Js,Un.isFinite=function(t){return"number"==typeof t&&je(t)},Un.isFunction=Zs,Un.isInteger=$s,Un.isLength=to,Un.isMap=io,Un.isMatch=function(t,e){return t===e||Oi(t,e,da(e))},Un.isMatchWith=function(t,e,i){return i="function"==typeof i?i:n,Oi(t,e,da(e),i)},Un.isNaN=function(t){return ro(t)&&t!=+t},Un.isNative=function(t){if(xa(t))throw new St("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fi(t)},Un.isNil=function(t){return null==t},Un.isNull=function(t){return null===t},Un.isNumber=ro,Un.isObject=eo,Un.isObjectLike=no,Un.isPlainObject=ao,Un.isRegExp=so,Un.isSafeInteger=function(t){return $s(t)&&t>=-9007199254740991&&t<=d},Un.isSet=oo,Un.isString=lo,Un.isSymbol=uo,Un.isTypedArray=co,Un.isUndefined=function(t){return t===n},Un.isWeakMap=function(t){return no(t)&&ga(t)==I},Un.isWeakSet=function(t){return no(t)&&"[object WeakSet]"==Mi(t)},Un.join=function(t,e){return null==t?"":Ye.call(t,e)},Un.kebabCase=qo,Un.last=Ja,Un.lastIndexOf=function(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var a=r;return i!==n&&(a=(a=go(i))<0?bn(r+a,0):kn(a,r-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,a):Ue(t,Ve,a,!0)},Un.lowerCase=Xo,Un.lowerFirst=Yo,Un.lt=ho,Un.lte=fo,Un.max=function(t){return t&&t.length?yi(t,al,Ci):n},Un.maxBy=function(t,e){return t&&t.length?yi(t,ca(e,2),Ci):n},Un.mean=function(t){return qe(t,al)},Un.meanBy=function(t,e){return qe(t,ca(e,2))},Un.min=function(t){return t&&t.length?yi(t,al,ji):n},Un.minBy=function(t,e){return t&&t.length?yi(t,ca(e,2),ji):n},Un.stubArray=yl,Un.stubFalse=ml,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=xl,Un.nth=function(t,e){return t&&t.length?Vi(t,go(e)):n},Un.noConflict=function(){return pe._===this&&(pe._=Ut),this},Un.noop=cl,Un.now=Ms,Un.pad=function(t,e,n){t=bo(t);var i=(e=go(e))?vn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return qr(ye(r),n)+t+qr(ge(r),n)},Un.padEnd=function(t,e,n){t=bo(t);var i=(e=go(e))?vn(t):0;return e&&i<e?t+qr(e-i,n):t},Un.padStart=function(t,e,n){t=bo(t);var i=(e=go(e))?vn(t):0;return e&&i<e?qr(e-i,n)+t:t},Un.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),An(bo(t).replace(st,""),e||0)},Un.random=function(t,e,i){if(i&&"boolean"!=typeof i&&ka(t,e,i)&&(e=i=n),i===n&&("boolean"==typeof e?(i=e,e=n):"boolean"==typeof t&&(i=t,t=n)),t===n&&e===n?(t=0,e=1):(t=po(t),e===n?(e=t,t=0):e=po(e)),t>e){var r=t;t=e,e=r}if(i||t%1||e%1){var a=xn();return kn(t+a*(e-t+he("1e-"+((a+"").length-1))),e)}return Qi(t,e)},Un.reduce=function(t,e,n){var i=Vs(t)?Ne:Ke,r=arguments.length<3;return i(t,ca(e,4),n,r,vi)},Un.reduceRight=function(t,e,n){var i=Vs(t)?We:Ke,r=arguments.length<3;return i(t,ca(e,4),n,r,pi)},Un.repeat=function(t,e,i){return e=(i?ka(t,e,i):e===n)?1:go(e),Ji(bo(t),e)},Un.replace=function(){var t=arguments,e=bo(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Un.result=function(t,e,i){var r=-1,a=(e=kr(e,t)).length;for(a||(a=1,t=n);++r<a;){var s=null==t?n:t[Wa(e[r])];s===n&&(r=a,s=i),t=Zs(s)?s.call(t):s}return t},Un.round=Sl,Un.runInContext=t,Un.sample=function(t){return(Vs(t)?$n:$i)(t)},Un.size=function(t){if(null==t)return 0;if(Xs(t))return lo(t)?vn(t):t.length;var e=ga(t);return e==A||e==C?t.size:Wi(t).length},Un.snakeCase=Ko,Un.some=function(t,e,i){var r=Vs(t)?Be:sr;return i&&ka(t,e,i)&&(e=n),r(t,ca(e,3))},Un.sortedIndex=function(t,e){return or(t,e)},Un.sortedIndexBy=function(t,e,n){return lr(t,e,ca(n,2))},Un.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=or(t,e);if(i<n&&zs(t[i],e))return i}return-1},Un.sortedLastIndex=function(t,e){return or(t,e,!0)},Un.sortedLastIndexBy=function(t,e,n){return lr(t,e,ca(n,2),!0)},Un.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=or(t,e,!0)-1;if(zs(t[n],e))return n}return-1},Un.startCase=Qo,Un.startsWith=function(t,e,n){return t=bo(t),n=null==n?0:ui(go(n),0,t.length),e=hr(e),t.slice(n,n+e.length)==e},Un.subtract=El,Un.sum=function(t){return t&&t.length?Qe(t,al):0},Un.sumBy=function(t,e){return t&&t.length?Qe(t,ca(e,2)):0},Un.template=function(t,e,i){var r=Un.templateSettings;i&&ka(t,e,i)&&(e=n),t=bo(t),e=Ao({},e,r,ta);var a,s,o=Ao({},e.imports,r.imports,ta),l=Do(o),u=tn(o,l),c=0,h=e.interpolate||_t,d="__p += '",f=Rt((e.escape||_t).source+"|"+h.source+"|"+(h===$?vt:_t).source+"|"+(e.evaluate||_t).source+"|$","g"),v="//# sourceURL="+(Nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++oe+"]")+"\n";t.replace(f,function(e,n,i,r,o,l){return i||(i=r),d+=t.slice(c,l).replace(At,on),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),o&&(s=!0,d+="';\n"+o+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),d+="';\n";var p=Nt.call(e,"variable")&&e.variable;if(p){if(dt.test(p))throw new St("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(G,""):d).replace(V,"$1").replace(q,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=tl(function(){return Et(l,v+"return "+d).apply(n,u)});if(g.source=d,Js(g))throw g;return g},Un.times=function(t,e){if((t=go(t))<1||t>d)return[];var n=v,i=kn(t,v);e=ca(e),t-=v;for(var r=Je(i,e);++n<t;)e(n);return r},Un.toFinite=po,Un.toInteger=go,Un.toLength=yo,Un.toLower=function(t){return bo(t).toLowerCase()},Un.toNumber=mo,Un.toSafeInteger=function(t){return t?ui(go(t),-9007199254740991,d):0===t?t:0},Un.toString=bo,Un.toUpper=function(t){return bo(t).toUpperCase()},Un.trim=function(t,e,i){if((t=bo(t))&&(i||e===n))return Ze(t);if(!t||!(e=hr(e)))return t;var r=pn(t),a=pn(e);return Ar(r,nn(r,a),rn(r,a)+1).join("")},Un.trimEnd=function(t,e,i){if((t=bo(t))&&(i||e===n))return t.slice(0,gn(t)+1);if(!t||!(e=hr(e)))return t;var r=pn(t);return Ar(r,0,rn(r,pn(e))+1).join("")},Un.trimStart=function(t,e,i){if((t=bo(t))&&(i||e===n))return t.replace(st,"");if(!t||!(e=hr(e)))return t;var r=pn(t);return Ar(r,nn(r,pn(e))).join("")},Un.truncate=function(t,e){var i=30,r="...";if(eo(e)){var a="separator"in e?e.separator:a;i="length"in e?go(e.length):i,r="omission"in e?hr(e.omission):r}var s=(t=bo(t)).length;if(ln(t)){var o=pn(t);s=o.length}if(i>=s)return t;var l=i-vn(r);if(l<1)return r;var u=o?Ar(o,0,l).join(""):t.slice(0,l);if(a===n)return u+r;if(o&&(l+=u.length-l),so(a)){if(t.slice(l).search(a)){var c,h=u;for(a.global||(a=Rt(a.source,bo(pt.exec(a))+"g")),a.lastIndex=0;c=a.exec(h);)var d=c.index;u=u.slice(0,d===n?l:d)}}else if(t.indexOf(hr(a),l)!=l){var f=u.lastIndexOf(a);f>-1&&(u=u.slice(0,f))}return u+r},Un.unescape=function(t){return(t=bo(t))&&K.test(t)?t.replace(X,yn):t},Un.uniqueId=function(t){var e=++Wt;return bo(t)+e},Un.upperCase=Jo,Un.upperFirst=Zo,Un.each=ws,Un.eachRight=bs,Un.first=Xa,ul(Un,(Al={},_i(Un,function(t,e){Nt.call(Un.prototype,e)||(Al[e]=t)}),Al),{chain:!1}),Un.VERSION="4.17.21",Re(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Un[t].placeholder=Un}),Re(["drop","take"],function(t,e){qn.prototype[t]=function(i){i=i===n?1:bn(go(i),0);var r=this.__filtered__&&!e?new qn(this):this.clone();return r.__filtered__?r.__takeCount__=kn(i,r.__takeCount__):r.__views__.push({size:kn(i,v),type:t+(r.__dir__<0?"Right":"")}),r},qn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Re(["filter","map","takeWhile"],function(t,e){var n=e+1,i=1==n||3==n;qn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ca(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),Re(["head","last"],function(t,e){var n="take"+(e?"Right":"");qn.prototype[t]=function(){return this[n](1).value()[0]}}),Re(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");qn.prototype[t]=function(){return this.__filtered__?new qn(this):this[n](1)}}),qn.prototype.compact=function(){return this.filter(al)},qn.prototype.find=function(t){return this.filter(t).head()},qn.prototype.findLast=function(t){return this.reverse().find(t)},qn.prototype.invokeMap=Zi(function(t,e){return"function"==typeof t?new qn(this):this.map(function(n){return Pi(n,t,e)})}),qn.prototype.reject=function(t){return this.filter(Fs(ca(t)))},qn.prototype.slice=function(t,e){t=go(t);var i=this;return i.__filtered__&&(t>0||e<0)?new qn(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==n&&(i=(e=go(e))<0?i.dropRight(-e):i.take(e-t)),i)},qn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},qn.prototype.toArray=function(){return this.take(v)},_i(qn.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),a=Un[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);a&&(Un.prototype[e]=function(){var e=this.__wrapped__,o=r?[1]:arguments,l=e instanceof qn,u=o[0],c=l||Vs(e),h=function(t){var e=a.apply(Un,Fe([t],o));return r&&d?e[0]:e};c&&i&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,v=s&&!d,p=l&&!f;if(!s&&c){e=p?e:new qn(this);var g=t.apply(e,o);return g.__actions__.push({func:vs,args:[h],thisArg:n}),new Vn(g,d)}return v&&p?t.apply(this,o):(g=this.thru(h),v?r?g.value()[0]:g.value():g)})}),Re(["pop","push","shift","sort","splice","unshift"],function(t){var e=Pt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Un.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Vs(r)?r:[],t)}return this[n](function(n){return e.apply(Vs(n)?n:[],t)})}}),_i(qn.prototype,function(t,e){var n=Un[e];if(n){var i=n.name+"";Nt.call(Dn,i)||(Dn[i]=[]),Dn[i].push({name:e,func:n})}}),Dn[Ur(n,2).name]=[{name:"wrapper",func:n}],qn.prototype.clone=function(){var t=new qn(this.__wrapped__);return t.__actions__=Ir(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ir(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ir(this.__views__),t},qn.prototype.reverse=function(){if(this.__filtered__){var t=new qn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},qn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Vs(t),i=e<0,r=n?t.length:0,a=function(t,e,n){var i=-1,r=n.length;for(;++i<r;){var a=n[i],s=a.size;switch(a.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=kn(e,t+s);break;case"takeRight":t=bn(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=a.start,o=a.end,l=o-s,u=i?o:s-1,c=this.__iteratees__,h=c.length,d=0,f=kn(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return gr(t,this.__actions__);var v=[];t:for(;l--&&d<f;){for(var p=-1,g=t[u+=e];++p<h;){var y=c[p],m=y.iteratee,w=y.type,b=m(g);if(2==w)g=b;else if(!b){if(1==w)continue t;break t}}v[d++]=g}return v},Un.prototype.at=ps,Un.prototype.chain=function(){return fs(this)},Un.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===n&&(this.__values__=vo(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},Un.prototype.plant=function(t){for(var e,i=this;i instanceof Gn;){var r=ja(i);r.__index__=0,r.__values__=n,e?a.__wrapped__=r:e=r;var a=r;i=i.__wrapped__}return a.__wrapped__=t,e},Un.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof qn){var e=t;return this.__actions__.length&&(e=new qn(this)),(e=e.reverse()).__actions__.push({func:vs,args:[es],thisArg:n}),new Vn(e,this.__chain__)}return this.thru(es)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return gr(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,$t&&(Un.prototype[$t]=function(){return this}),Un}();ye?((ye.exports=mn)._=mn,ge._=mn):pe._=mn}).call(et)}(nt,nt.exports);
/**
   * @licstart The following is the entire license notice for the
   * JavaScript code in this page
   *
   * Copyright 2024 Mozilla Foundation
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * @licend The above is the entire license notice for the
   * JavaScript code in this page
   */var it={34:function(t,e,n){var i=n(4901);t.exports=function(t){return"object"==W(t)?null!==t:i(t)}},81:function(t,e,n){var i=n(9565),r=n(9306),a=n(8551),s=n(6823),o=n(851),l=TypeError;t.exports=function(t,e){var n=arguments.length<2?o(t):e;if(r(n))return a(i(n,t));throw new l(s(t)+" is not iterable")}},283:function(t,e,n){var i=n(9504),r=n(9039),a=n(4901),s=n(9297),o=n(3724),l=n(350).CONFIGURABLE,u=n(3706),c=n(1181),h=c.enforce,d=c.get,f=String,v=Object.defineProperty,p=i("".slice),g=i("".replace),y=i([].join),m=o&&!r(function(){return 8!==v(function(){},"length",{value:8}).length}),w=String(String).split("String"),b=t.exports=function(t,e,n){"Symbol("===p(f(e),0,7)&&(e="["+g(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(o?v(t,"name",{value:e,configurable:!0}):t.name=e),m&&n&&s(n,"arity")&&t.length!==n.arity&&v(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?o&&v(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var i=h(t);return s(i,"source")||(i.source=y(w,"string"==typeof e?e:"")),t};Function.prototype.toString=b(function(){return a(this)&&d(this).source||u(this)},"toString")},350:function(t,e,n){var i=n(3724),r=n(9297),a=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,o=r(a,"name"),l=o&&"something"===function(){}.name,u=o&&(!i||i&&s(a,"name").configurable);t.exports={EXISTS:o,PROPER:l,CONFIGURABLE:u}},397:function(t,e,n){var i=n(7751);t.exports=i("document","documentElement")},421:function(t){t.exports={}},507:function(t,e,n){var i=n(9565);t.exports=function(t,e,n){for(var r,a,s=n?t:t.iterator,o=t.next;!(r=i(o,s)).done;)if(void 0!==(a=e(r.value)))return a}},531:function(t,e,n){var i=n(6518),r=n(9565),a=n(9306),s=n(8551),o=n(1767),l=n(8646),u=n(9462),c=n(9539),h=n(6395),d=n(4549),f=!h&&d("flatMap",TypeError),v=u(function(){for(var t,e,n=this.iterator,i=this.mapper;;){if(e=this.inner)try{if(!(t=s(r(e.next,e.iterator))).done)return t.value;this.inner=null}catch(t){c(n,"throw",t)}if(t=s(r(this.next,n)),this.done=!!t.done)return;try{this.inner=l(i(t.value,this.counter++),!1)}catch(t){c(n,"throw",t)}}});i({target:"Iterator",proto:!0,real:!0,forced:h||f},{flatMap:function(t){s(this);try{a(t)}catch(t){c(this,"throw",t)}return f?r(f,this,t):new v(o(this),{mapper:t,inner:null})}})},616:function(t,e,n){var i=n(9039);t.exports=!i(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},655:function(t,e,n){var i=n(6955),r=String;t.exports=function(t){if("Symbol"===i(t))throw new TypeError("Cannot convert a Symbol value to a string");return r(t)}},679:function(t,e,n){var i=n(1625),r=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw new r("Incorrect invocation")}},741:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},757:function(t,e,n){var i=n(7751),r=n(4901),a=n(1625),s=n(7040),o=Object;t.exports=s?function(t){return"symbol"==W(t)}:function(t){var e=i("Symbol");return r(e)&&a(e.prototype,o(t))}},851:function(t,e,n){var i=n(6955),r=n(5966),a=n(4117),s=n(6269),o=n(8227)("iterator");t.exports=function(t){if(!a(t))return r(t,o)||r(t,"@@iterator")||s[i(t)]}},944:function(t){var e=TypeError;t.exports=function(t){var n=t&&t.alphabet;if(void 0===n||"base64"===n||"base64url"===n)return n||"base64";throw new e("Incorrect `alphabet` option")}},1072:function(t,e,n){var i=n(1828),r=n(8727);t.exports=Object.keys||function(t){return i(t,r)}},1103:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},1148:function(t,e,n){var i=n(6518),r=n(9565),a=n(2652),s=n(9306),o=n(8551),l=n(1767),u=n(9539),c=n(4549)("every",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:c},{every:function(t){o(this);try{s(t)}catch(t){u(this,"throw",t)}if(c)return r(c,this,t);var e=l(this),n=0;return!a(e,function(e,i){if(!t(e,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1181:function(t,e,n){var i,r,a,s=n(8622),o=n(4576),l=n(34),u=n(6699),c=n(9297),h=n(7629),d=n(6119),f=n(421),v="Object already initialized",p=o.TypeError,g=o.WeakMap;if(s||h.state){var y=h.state||(h.state=new g);y.get=y.get,y.has=y.has,y.set=y.set,i=function(t,e){if(y.has(t))throw new p(v);return e.facade=t,y.set(t,e),e},r=function(t){return y.get(t)||{}},a=function(t){return y.has(t)}}else{var m=d("state");f[m]=!0,i=function(t,e){if(c(t,m))throw new p(v);return e.facade=t,u(t,m,e),e},r=function(t){return c(t,m)?t[m]:{}},a=function(t){return c(t,m)}}t.exports={set:i,get:r,has:a,enforce:function(t){return a(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var n;if(!l(e)||(n=r(e)).type!==t)throw new p("Incompatible receiver, "+t+" required");return n}}}},1291:function(t,e,n){var i=n(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:i(e)}},1548:function(t,e,n){var i=n(4576),r=n(9039),a=n(9519),s=n(4215),o=i.structuredClone;t.exports=!!o&&!r(function(){if("DENO"===s&&a>92||"NODE"===s&&a>94||"BROWSER"===s&&a>97)return!1;var t=new ArrayBuffer(8),e=o(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength})},1549:function(t,e,n){var i=n(6518),r=n(4576),a=n(9143),s=n(4154),o=r.Uint8Array,l=!o||!o.prototype.setFromBase64||!function(){var t=new o([255,255,255,255,255]);try{t.setFromBase64("MjYyZg===")}catch(e){return 50===t[0]&&54===t[1]&&50===t[2]&&255===t[3]&&255===t[4]}}();o&&i({target:"Uint8Array",proto:!0,forced:l},{setFromBase64:function(t){s(this);var e=a(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:e.read,written:e.written}}})},1625:function(t,e,n){var i=n(9504);t.exports=i({}.isPrototypeOf)},1689:function(t,e,n){var i=n(6518),r=n(4576),a=n(8745),s=n(7680),o=n(6043),l=n(9306),u=n(1103),c=r.Promise,h=!1;i({target:"Promise",stat:!0,forced:!c||!c.try||u(function(){c.try(function(t){h=8===t},8)}).error||!h},{try:function(t){var e=arguments.length>1?s(arguments,1):[],n=o.f(this),i=u(function(){return a(l(t),void 0,e)});return(i.error?n.reject:n.resolve)(i.value),n.promise}})},1698:function(t,e,n){var i=n(6518),r=n(4204);i({target:"Set",proto:!0,real:!0,forced:!n(4916)("union")},{union:r})},1701:function(t,e,n){var i=n(6518),r=n(9565),a=n(9306),s=n(8551),o=n(1767),l=n(9462),u=n(6319),c=n(9539),h=n(4549),d=n(6395),f=!d&&h("map",TypeError),v=l(function(){var t=this.iterator,e=s(r(this.next,t));if(!(this.done=!!e.done))return u(t,this.mapper,[e.value,this.counter++],!0)});i({target:"Iterator",proto:!0,real:!0,forced:d||f},{map:function(t){s(this);try{a(t)}catch(t){c(this,"throw",t)}return f?r(f,this,t):new v(o(this),{mapper:t})}})},1767:function(t){t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1828:function(t,e,n){var i=n(9504),r=n(9297),a=n(5397),s=n(9617).indexOf,o=n(421),l=i([].push);t.exports=function(t,e){var n,i=a(t),u=0,c=[];for(n in i)!r(o,n)&&r(i,n)&&l(c,n);for(;e.length>u;)r(i,n=e[u++])&&(~s(c,n)||l(c,n));return c}},2106:function(t,e,n){var i=n(283),r=n(4913);t.exports=function(t,e,n){return n.get&&i(n.get,e,{getter:!0}),n.set&&i(n.set,e,{setter:!0}),r.f(t,e,n)}},2140:function(t,e,n){var i={};i[n(8227)("toStringTag")]="z",t.exports="[object z]"===String(i)},2195:function(t,e,n){var i=n(9504),r=i({}.toString),a=i("".slice);t.exports=function(t){return a(r(t),8,-1)}},2211:function(t,e,n){var i=n(9039);t.exports=!i(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},2303:function(t,e,n){var i=n(4576),r=n(9504),a=i.Uint8Array,s=i.SyntaxError,o=i.parseInt,l=Math.min,u=/[^\da-f]/i,c=r(u.exec),h=r("".slice);t.exports=function(t,e){var n=t.length;if(n%2!=0)throw new s("String should be an even number of characters");for(var i=e?l(e.length,n/2):n/2,r=e||new a(i),d=0,f=0;f<i;){var v=h(t,d,d+=2);if(c(u,v))throw new s("String should only contain hex characters");r[f++]=o(v,16)}return{bytes:r,read:d}}},2360:function(t,e,n){var i,r=n(8551),a=n(6801),s=n(8727),o=n(421),l=n(397),u=n(4055),c=n(6119),h="prototype",d="script",f=c("IE_PROTO"),v=function(){},p=function(t){return"<"+d+">"+t+"</"+d+">"},g=function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;y="undefined"!=typeof document?document.domain&&i?g(i):(e=u("iframe"),n="java"+d+":",e.style.display="none",l.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F):g(i);for(var r=s.length;r--;)delete y[h][s[r]];return y()};o[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(v[h]=r(t),n=new v,v[h]=null,n[f]=t):n=y(),void 0===e?n:a.f(n,e)}},2475:function(t,e,n){var i=n(6518),r=n(8527);i({target:"Set",proto:!0,real:!0,forced:!n(4916)("isSupersetOf",function(t){return!t})},{isSupersetOf:r})},2489:function(t,e,n){var i=n(6518),r=n(9565),a=n(9306),s=n(8551),o=n(1767),l=n(9462),u=n(6319),c=n(6395),h=n(9539),d=n(4549),f=!c&&d("filter",TypeError),v=l(function(){for(var t,e,n=this.iterator,i=this.predicate,a=this.next;;){if(t=s(r(a,n)),this.done=!!t.done)return;if(e=t.value,u(n,i,[e,this.counter++],!0))return e}});i({target:"Iterator",proto:!0,real:!0,forced:c||f},{filter:function(t){s(this);try{a(t)}catch(t){h(this,"throw",t)}return f?r(f,this,t):new v(o(this),{predicate:t})}})},2529:function(t){t.exports=function(t,e){return{value:t,done:e}}},2603:function(t,e,n){var i=n(655);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:i(t)}},2652:function(t,e,n){var i=n(6080),r=n(9565),a=n(8551),s=n(6823),o=n(4209),l=n(6198),u=n(1625),c=n(81),h=n(851),d=n(9539),f=TypeError,v=function(t,e){this.stopped=t,this.result=e},p=v.prototype;t.exports=function(t,e,n){var g,y,m,w,b,k,_,A=n&&n.that,x=!(!n||!n.AS_ENTRIES),S=!(!n||!n.IS_RECORD),E=!(!n||!n.IS_ITERATOR),M=!(!n||!n.INTERRUPTED),C=i(e,A),R=function(t){return g&&d(g,"normal",t),new v(!0,t)},T=function(t){return x?(a(t),M?C(t[0],t[1],R):C(t[0],t[1])):M?C(t,R):C(t)};if(S)g=t.iterator;else if(E)g=t;else{if(!(y=h(t)))throw new f(s(t)+" is not iterable");if(o(y)){for(m=0,w=l(t);w>m;m++)if((b=T(t[m]))&&u(p,b))return b;return new v(!1)}g=c(t,y)}for(k=S?t.next:g.next;!(_=r(k,g)).done;){try{b=T(_.value)}catch(t){d(g,"throw",t)}if("object"==W(b)&&b&&u(p,b))return b}return new v(!1)}},2777:function(t,e,n){var i=n(9565),r=n(34),a=n(757),s=n(5966),o=n(4270),l=n(8227),u=TypeError,c=l("toPrimitive");t.exports=function(t,e){if(!r(t)||a(t))return t;var n,l=s(t,c);if(l){if(void 0===e&&(e="default"),n=i(l,t,e),!r(n)||a(n))return n;throw new u("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},2787:function(t,e,n){var i=n(9297),r=n(4901),a=n(8981),s=n(6119),o=n(2211),l=s("IE_PROTO"),u=Object,c=u.prototype;t.exports=o?u.getPrototypeOf:function(t){var e=a(t);if(i(e,l))return e[l];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof u?c:null}},2796:function(t,e,n){var i=n(9039),r=n(4901),a=/#|\.prototype\./,s=function(t,e){var n=l[o(t)];return n===c||n!==u&&(r(e)?i(e):!!e)},o=s.normalize=function(t){return String(t).replace(a,".").toLowerCase()},l=s.data={},u=s.NATIVE="N",c=s.POLYFILL="P";t.exports=s},2804:function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e+"+/",i=e+"-_",r=function(t){for(var e={},n=0;n<64;n++)e[t.charAt(n)]=n;return e};t.exports={i2c:n,c2i:r(n),i2cUrl:i,c2iUrl:r(i)}},2812:function(t){var e=TypeError;t.exports=function(t,n){if(t<n)throw new e("Not enough arguments");return t}},2839:function(t,e,n){var i=n(4576).navigator,r=i&&i.userAgent;t.exports=r?String(r):""},2967:function(t,e,n){var i=n(6706),r=n(34),a=n(7750),s=n(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=i(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return a(n),s(i),r(n)?(e?t(n,i):n.__proto__=i,n):n}}():void 0)},3167:function(t,e,n){var i=n(4901),r=n(34),a=n(2967);t.exports=function(t,e,n){var s,o;return a&&i(s=e.constructor)&&s!==n&&r(o=s.prototype)&&o!==n.prototype&&a(t,o),t}},3238:function(t,e,n){var i=n(4576),r=n(7811),a=n(7394),s=i.DataView;t.exports=function(t){if(!r||0!==a(t))return!1;try{return new s(t),!1}catch(t){return!0}}},3392:function(t,e,n){var i=n(9504),r=0,a=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+a,36)}},3440:function(t,e,n){var i=n(7080),r=n(4402),a=n(9286),s=n(5170),o=n(3789),l=n(8469),u=n(507),c=r.has,h=r.remove;t.exports=function(t){var e=i(this),n=o(t),r=a(e);return s(e)<=n.size?l(e,function(t){n.includes(t)&&h(r,t)}):u(n.getIterator(),function(t){c(e,t)&&h(r,t)}),r}},3463:function(t){var e=TypeError;t.exports=function(t){if("string"==typeof t)return t;throw new e("Argument is not a string")}},3506:function(t,e,n){var i=n(3925),r=String,a=TypeError;t.exports=function(t){if(i(t))return t;throw new a("Can't set "+r(t)+" as a prototype")}},3579:function(t,e,n){var i=n(6518),r=n(9565),a=n(2652),s=n(9306),o=n(8551),l=n(1767),u=n(9539),c=n(4549)("some",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:c},{some:function(t){o(this);try{s(t)}catch(t){u(this,"throw",t)}if(c)return r(c,this,t);var e=l(this),n=0;return a(e,function(e,i){if(t(e,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3650:function(t,e,n){var i=n(7080),r=n(4402),a=n(9286),s=n(3789),o=n(507),l=r.add,u=r.has,c=r.remove;t.exports=function(t){var e=i(this),n=s(t).getIterator(),r=a(e);return o(n,function(t){u(e,t)?c(r,t):l(r,t)}),r}},3706:function(t,e,n){var i=n(9504),r=n(4901),a=n(7629),s=i(Function.toString);r(a.inspectSource)||(a.inspectSource=function(t){return s(t)}),t.exports=a.inspectSource},3717:function(t,e){e.f=Object.getOwnPropertySymbols},3724:function(t,e,n){var i=n(9039);t.exports=!i(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},3789:function(t,e,n){var i=n(9306),r=n(8551),a=n(9565),s=n(1291),o=n(1767),l="Invalid size",u=RangeError,c=TypeError,h=Math.max,d=function(t,e){this.set=t,this.size=h(e,0),this.has=i(t.has),this.keys=i(t.keys)};d.prototype={getIterator:function(){return o(r(a(this.keys,this.set)))},includes:function(t){return a(this.has,this.set,t)}},t.exports=function(t){r(t);var e=+t.size;if(e!=e)throw new c(l);var n=s(e);if(n<0)throw new u(l);return new d(t,n)}},3838:function(t,e,n){var i=n(7080),r=n(5170),a=n(8469),s=n(3789);t.exports=function(t){var e=i(this),n=s(t);return!(r(e)>n.size)&&!1!==a(e,function(t){if(!n.includes(t))return!1},!0)}},3853:function(t,e,n){var i=n(6518),r=n(4449);i({target:"Set",proto:!0,real:!0,forced:!n(4916)("isDisjointFrom",function(t){return!t})},{isDisjointFrom:r})},3925:function(t,e,n){var i=n(34);t.exports=function(t){return i(t)||null===t}},3972:function(t,e,n){var i=n(34),r=String,a=TypeError;t.exports=function(t){if(void 0===t||i(t))return t;throw new a(r(t)+" is not an object or undefined")}},4055:function(t,e,n){var i=n(4576),r=n(34),a=i.document,s=r(a)&&r(a.createElement);t.exports=function(t){return s?a.createElement(t):{}}},4114:function(t,e,n){var i=n(6518),r=n(8981),a=n(6198),s=n(4527),o=n(6837);i({target:"Array",proto:!0,arity:1,forced:n(9039)(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=r(this),n=a(e),i=arguments.length;o(n+i);for(var l=0;l<i;l++)e[n]=arguments[l],n++;return s(e,n),n}})},4117:function(t){t.exports=function(t){return null==t}},4149:function(t){var e=RangeError;t.exports=function(t){if(t==t)return t;throw new e("NaN is not allowed")}},4154:function(t,e,n){var i=n(6955),r=TypeError;t.exports=function(t){if("Uint8Array"===i(t))return t;throw new r("Argument is not an Uint8Array")}},4204:function(t,e,n){var i=n(7080),r=n(4402).add,a=n(9286),s=n(3789),o=n(507);t.exports=function(t){var e=i(this),n=s(t).getIterator(),l=a(e);return o(n,function(t){r(l,t)}),l}},4209:function(t,e,n){var i=n(8227),r=n(6269),a=i("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[a]===t)}},4215:function(t,e,n){var i=n(4576),r=n(2839),a=n(2195),s=function(t){return r.slice(0,t.length)===t};t.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":i.Bun&&"string"==typeof Bun.version?"BUN":i.Deno&&"object"==W(Deno.version)?"DENO":"process"===a(i.process)?"NODE":i.window&&i.document?"BROWSER":"REST"},4270:function(t,e,n){var i=n(9565),r=n(4901),a=n(34),s=TypeError;t.exports=function(t,e){var n,o;if("string"===e&&r(n=t.toString)&&!a(o=i(n,t)))return o;if(r(n=t.valueOf)&&!a(o=i(n,t)))return o;if("string"!==e&&r(n=t.toString)&&!a(o=i(n,t)))return o;throw new s("Can't convert object to primitive value")}},4376:function(t,e,n){var i=n(2195);t.exports=Array.isArray||function(t){return"Array"===i(t)}},4402:function(t,e,n){var i=n(9504),r=Set.prototype;t.exports={Set:Set,add:i(r.add),has:i(r.has),remove:i(r.delete),proto:r}},4449:function(t,e,n){var i=n(7080),r=n(4402).has,a=n(5170),s=n(3789),o=n(8469),l=n(507),u=n(9539);t.exports=function(t){var e=i(this),n=s(t);if(a(e)<=n.size)return!1!==o(e,function(t){if(n.includes(t))return!1},!0);var c=n.getIterator();return!1!==l(c,function(t){if(r(e,t))return u(c,"normal",!1)})}},4483:function(t,e,n){var i,r,a,s,o=n(4576),l=n(9429),u=n(1548),c=o.structuredClone,h=o.ArrayBuffer,d=o.MessageChannel,f=!1;if(u)f=function(t){c(t,{transfer:[t]})};else if(h)try{d||(i=l("worker_threads"))&&(d=i.MessageChannel),d&&(r=new d,a=new h(2),s=function(t){r.port1.postMessage(null,[t])},2===a.byteLength&&(s(a),0===a.byteLength&&(f=s)))}catch(t){}t.exports=f},4495:function(t,e,n){var i=n(9519),r=n(9039),a=n(4576).String;t.exports=!!Object.getOwnPropertySymbols&&!r(function(){var t=Symbol("symbol detection");return!a(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41})},4527:function(t,e,n){var i=n(3724),r=n(4376),a=TypeError,s=Object.getOwnPropertyDescriptor,o=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(r(t)&&!s(t,"length").writable)throw new a("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4549:function(t,e,n){var i=n(4576);t.exports=function(t,e){var n=i.Iterator,r=n&&n.prototype,a=r&&r[t],s=!1;if(a)try{a.call({next:function(){return{done:!0}},return:function(){s=!0}},-1)}catch(t){t instanceof e||(s=!1)}if(!s)return a}},4576:function(t){var e=function(t){return t&&t.Math===Math&&t};t.exports=e("object"==("undefined"==typeof globalThis?"undefined":W(globalThis))&&globalThis)||e("object"==("undefined"==typeof window?"undefined":W(window))&&window)||e("object"==("undefined"==typeof self?"undefined":W(self))&&self)||e("object"==("undefined"==typeof global?"undefined":W(global))&&global)||e("object"==W(this)&&this)||function(){return this}()||Function("return this")()},4603:function(t,e,n){var i=n(6840),r=n(9504),a=n(655),s=n(2812),o=URLSearchParams,l=o.prototype,u=r(l.append),c=r(l.delete),h=r(l.forEach),d=r([].push),f=new o("a=1&a=2&b=3");f.delete("a",1),f.delete("b",void 0),f+""!="a=2"&&i(l,"delete",function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return c(this,t);var i=[];h(this,function(t,e){d(i,{key:e,value:t})}),s(e,1);for(var r,o=a(t),l=a(n),f=0,v=0,p=!1,g=i.length;f<g;)r=i[f++],p||r.key===o?(p=!0,c(this,r.key)):v++;for(;v<g;)(r=i[v++]).key===o&&r.value===l||u(this,r.key,r.value)},{enumerable:!0,unsafe:!0})},4628:function(t,e,n){var i=n(6518),r=n(6043);i({target:"Promise",stat:!0},{withResolvers:function(){var t=r.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})},4659:function(t,e,n){var i=n(3724),r=n(4913),a=n(6980);t.exports=function(t,e,n){i?r.f(t,e,a(0,n)):t[e]=n}},4901:function(t){var e="object"==("undefined"==typeof document?"undefined":W(document))&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},4913:function(t,e,n){var i=n(3724),r=n(5917),a=n(8686),s=n(8551),o=n(6969),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";e.f=i?a?function(t,e,n){if(s(t),e=o(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var i=c(t,e);i&&i[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:i[d],enumerable:h in n?n[h]:i[h],writable:!1})}return u(t,e,n)}:u:function(t,e,n){if(s(t),e=o(e),s(n),r)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},4916:function(t,e,n){var i=n(7751),r=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},a=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};t.exports=function(t,e){var n=i("Set");try{(new n)[t](r(0));try{return(new n)[t](r(-1)),!1}catch(i){if(!e)return!0;try{return(new n)[t](a(-1/0)),!1}catch(i){var s=new n;return s.add(1),s.add(2),e(s[t](a(1/0)))}}}catch(t){return!1}}},4979:function(t,e,n){var i=n(6518),r=n(4576),a=n(7751),s=n(6980),o=n(4913).f,l=n(9297),u=n(679),c=n(3167),h=n(2603),d=n(5002),f=n(8574),v=n(3724),p=n(6395),g="DOMException",y=a("Error"),m=a(g),w=function(){u(this,b);var t=arguments.length,e=h(t<1?void 0:arguments[0]),n=h(t<2?void 0:arguments[1],"Error"),i=new m(e,n),r=new y(e);return r.name=g,o(i,"stack",s(1,f(r.stack,1))),c(i,this,w),i},b=w.prototype=m.prototype,k="stack"in new y(g),_="stack"in new m(1,2),A=m&&v&&Object.getOwnPropertyDescriptor(r,g),x=!(!A||A.writable&&A.configurable),S=k&&!x&&!_;i({global:!0,constructor:!0,forced:p||S},{DOMException:S?w:m});var E=a(g),M=E.prototype;if(M.constructor!==E)for(var C in p||o(M,"constructor",s(1,E)),d)if(l(d,C)){var R=d[C],T=R.s;l(E,T)||o(E,T,s(6,R.c))}},5002:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5024:function(t,e,n){var i=n(6518),r=n(3650);i({target:"Set",proto:!0,real:!0,forced:!n(4916)("symmetricDifference")},{symmetricDifference:r})},5031:function(t,e,n){var i=n(7751),r=n(9504),a=n(8480),s=n(3717),o=n(8551),l=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=a.f(o(t)),n=s.f;return n?l(e,n(t)):e}},5169:function(t,e,n){var i=n(3238),r=TypeError;t.exports=function(t){if(i(t))throw new r("ArrayBuffer is detached");return t}},5170:function(t,e,n){var i=n(6706),r=n(4402);t.exports=i(r.proto,"size","get")||function(t){return t.size}},5370:function(t,e,n){var i=n(6198);t.exports=function(t,e,n){for(var r=0,a=arguments.length>2?n:i(e),s=new t(a);a>r;)s[r]=e[r++];return s}},5397:function(t,e,n){var i=n(7055),r=n(7750);t.exports=function(t){return i(r(t))}},5610:function(t,e,n){var i=n(1291),r=Math.max,a=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):a(n,e)}},5623:function(t,e,n){var i=n(6518),r=n(4576),a=n(9504),s=n(4154),o=n(5169),l=a(1..toString);r.Uint8Array&&i({target:"Uint8Array",proto:!0},{toHex:function(){s(this),o(this.buffer);for(var t="",e=0,n=this.length;e<n;e++){var i=l(this[e],16);t+=1===i.length?"0"+i:i}return t}})},5636:function(t,e,n){var i=n(4576),r=n(9504),a=n(6706),s=n(7696),o=n(5169),l=n(7394),u=n(4483),c=n(1548),h=i.structuredClone,d=i.ArrayBuffer,f=i.DataView,v=Math.min,p=d.prototype,g=f.prototype,y=r(p.slice),m=a(p,"resizable","get"),w=a(p,"maxByteLength","get"),b=r(g.getInt8),k=r(g.setInt8);t.exports=(c||u)&&function(t,e,n){var i,r=l(t),a=void 0===e?r:s(e),p=!m||!m(t);if(o(t),c&&(t=h(t,{transfer:[t]}),r===a&&(n||p)))return t;if(r>=a&&(!n||p))i=y(t,0,a);else{var g=n&&!p&&w?{maxByteLength:w(t)}:void 0;i=new d(a,g);for(var _=new f(t),A=new f(i),x=v(a,r),S=0;S<x;S++)k(A,S,b(_,S))}return c||u(t),i}},5745:function(t,e,n){var i=n(7629);t.exports=function(t,e){return i[t]||(i[t]=e||{})}},5781:function(t,e,n){var i=n(6518),r=n(7751),a=n(2812),s=n(655),o=n(7416),l=r("URL");i({target:"URL",stat:!0,forced:!o},{parse:function(t){var e=a(arguments.length,1),n=s(t),i=e<2||void 0===arguments[1]?void 0:s(arguments[1]);try{return new l(n,i)}catch(t){return null}}})},5876:function(t,e,n){var i=n(6518),r=n(3838);i({target:"Set",proto:!0,real:!0,forced:!n(4916)("isSubsetOf",function(t){return t})},{isSubsetOf:r})},5917:function(t,e,n){var i=n(3724),r=n(9039),a=n(4055);t.exports=!i&&!r(function(){return 7!==Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},5966:function(t,e,n){var i=n(9306),r=n(4117);t.exports=function(t,e){var n=t[e];return r(n)?void 0:i(n)}},6043:function(t,e,n){var i=n(9306),r=TypeError,a=function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw new r("Bad Promise constructor");e=t,n=i}),this.resolve=i(e),this.reject=i(n)};t.exports.f=function(t){return new a(t)}},6080:function(t,e,n){var i=n(7476),r=n(9306),a=n(616),s=i(i.bind);t.exports=function(t,e){return r(t),void 0===e?t:a?s(t,e):function(){return t.apply(e,arguments)}}},6119:function(t,e,n){var i=n(5745),r=n(3392),a=i("keys");t.exports=function(t){return a[t]||(a[t]=r(t))}},6193:function(t,e,n){var i=n(4215);t.exports="NODE"===i},6198:function(t,e,n){var i=n(8014);t.exports=function(t){return i(t.length)}},6269:function(t){t.exports={}},6279:function(t,e,n){var i=n(6840);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},6319:function(t,e,n){var i=n(8551),r=n(9539);t.exports=function(t,e,n,a){try{return a?e(i(n)[0],n[1]):e(n)}catch(e){r(t,"throw",e)}}},6395:function(t){t.exports=!1},6518:function(t,e,n){var i=n(4576),r=n(7347).f,a=n(6699),s=n(6840),o=n(9433),l=n(7740),u=n(2796);t.exports=function(t,e){var n,c,h,d,f,v=t.target,p=t.global,g=t.stat;if(n=p?i:g?i[v]||o(v,{}):i[v]&&i[v].prototype)for(c in e){if(d=e[c],h=t.dontCallGetSet?(f=r(n,c))&&f.value:n[c],!u(p?c:v+(g?".":"#")+c,t.forced)&&void 0!==h){if(W(d)==W(h))continue;l(d,h)}(t.sham||h&&h.sham)&&a(d,"sham",!0),s(n,c,d,t)}}},6573:function(t,e,n){var i=n(3724),r=n(2106),a=n(3238),s=ArrayBuffer.prototype;i&&!("detached"in s)&&r(s,"detached",{configurable:!0,get:function(){return a(this)}})},6699:function(t,e,n){var i=n(3724),r=n(4913),a=n(6980);t.exports=i?function(t,e,n){return r.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},6706:function(t,e,n){var i=n(9504),r=n(9306);t.exports=function(t,e,n){try{return i(r(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},6801:function(t,e,n){var i=n(3724),r=n(8686),a=n(4913),s=n(8551),o=n(5397),l=n(1072);e.f=i&&!r?Object.defineProperties:function(t,e){s(t);for(var n,i=o(e),r=l(e),u=r.length,c=0;u>c;)a.f(t,n=r[c++],i[n]);return t}},6823:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6837:function(t){var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},6840:function(t,e,n){var i=n(4901),r=n(4913),a=n(283),s=n(9433);t.exports=function(t,e,n,o){o||(o={});var l=o.enumerable,u=void 0!==o.name?o.name:e;if(i(n)&&a(n,u,o),o.global)l?t[e]=n:s(e,n);else{try{o.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return t}},6955:function(t,e,n){var i=n(2140),r=n(4901),a=n(2195),s=n(8227)("toStringTag"),o=Object,l="Arguments"===a(function(){return arguments}());t.exports=i?a:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=o(t),s))?n:l?a(e):"Object"===(i=a(e))&&r(e.callee)?"Arguments":i}},6969:function(t,e,n){var i=n(2777),r=n(757);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},6980:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7040:function(t,e,n){var i=n(4495);t.exports=i&&!Symbol.sham&&"symbol"==W(Symbol.iterator)},7055:function(t,e,n){var i=n(9504),r=n(9039),a=n(2195),s=Object,o=i("".split);t.exports=r(function(){return!s("z").propertyIsEnumerable(0)})?function(t){return"String"===a(t)?o(t,""):s(t)}:s},7080:function(t,e,n){var i=n(4402).has;t.exports=function(t){return i(t),t}},7347:function(t,e,n){var i=n(3724),r=n(9565),a=n(8773),s=n(6980),o=n(5397),l=n(6969),u=n(9297),c=n(5917),h=Object.getOwnPropertyDescriptor;e.f=i?h:function(t,e){if(t=o(t),e=l(e),c)try{return h(t,e)}catch(t){}if(u(t,e))return s(!r(a.f,t,e),t[e])}},7394:function(t,e,n){var i=n(4576),r=n(6706),a=n(2195),s=i.ArrayBuffer,o=i.TypeError;t.exports=s&&r(s.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==a(t))throw new o("ArrayBuffer expected");return t.byteLength}},7416:function(t,e,n){var i=n(9039),r=n(8227),a=n(3724),s=n(6395),o=r("iterator");t.exports=!i(function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),i="";return t.pathname="c%20d",e.forEach(function(t,n){e.delete("b"),i+=n+t}),n.delete("a",2),n.delete("b",void 0),s&&(!t.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!e.size&&(s||!a)||!e.sort||"https://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==i||"x"!==new URL("https://x",void 0).host})},7476:function(t,e,n){var i=n(2195),r=n(9504);t.exports=function(t){if("Function"===i(t))return r(t)}},7566:function(t,e,n){var i=n(6840),r=n(9504),a=n(655),s=n(2812),o=URLSearchParams,l=o.prototype,u=r(l.getAll),c=r(l.has),h=new o("a=1");!h.has("a",2)&&h.has("a",void 0)||i(l,"has",function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return c(this,t);var i=u(this,t);s(e,1);for(var r=a(n),o=0;o<i.length;)if(i[o++]===r)return!0;return!1},{enumerable:!0,unsafe:!0})},7629:function(t,e,n){var i=n(6395),r=n(4576),a=n(9433),s="__core-js_shared__",o=t.exports=r[s]||a(s,{});(o.versions||(o.versions=[])).push({version:"3.42.0",mode:i?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7642:function(t,e,n){var i=n(6518),r=n(3440);i({target:"Set",proto:!0,real:!0,forced:!n(4916)("difference",function(t){return 0===t.size})},{difference:r})},7657:function(t,e,n){var i,r,a,s=n(9039),o=n(4901),l=n(34),u=n(2360),c=n(2787),h=n(6840),d=n(8227),f=n(6395),v=d("iterator"),p=!1;[].keys&&("next"in(a=[].keys())?(r=c(c(a)))!==Object.prototype&&(i=r):p=!0),!l(i)||s(function(){var t={};return i[v].call(t)!==t})?i={}:f&&(i=u(i)),o(i[v])||h(i,v,function(){return this}),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},7680:function(t,e,n){var i=n(9504);t.exports=i([].slice)},7696:function(t,e,n){var i=n(1291),r=n(8014),a=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=r(e);if(e!==n)throw new a("Wrong length or index");return n}},7740:function(t,e,n){var i=n(9297),r=n(5031),a=n(7347),s=n(4913);t.exports=function(t,e,n){for(var o=r(e),l=s.f,u=a.f,c=0;c<o.length;c++){var h=o[c];i(t,h)||n&&i(n,h)||l(t,h,u(e,h))}}},7750:function(t,e,n){var i=n(4117),r=TypeError;t.exports=function(t){if(i(t))throw new r("Can't call method on "+t);return t}},7751:function(t,e,n){var i=n(4576),r=n(4901);t.exports=function(t,e){return arguments.length<2?(n=i[t],r(n)?n:void 0):i[t]&&i[t][e];var n}},7811:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7936:function(t,e,n){var i=n(6518),r=n(5636);r&&i({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return r(this,arguments.length?arguments[0]:void 0,!1)}})},8004:function(t,e,n){var i=n(6518),r=n(9039),a=n(8750);i({target:"Set",proto:!0,real:!0,forced:!n(4916)("intersection",function(t){return 2===t.size&&t.has(1)&&t.has(2)})||r(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))})},{intersection:a})},8014:function(t,e,n){var i=n(1291),r=Math.min;t.exports=function(t){var e=i(t);return e>0?r(e,9007199254740991):0}},8100:function(t,e,n){var i=n(6518),r=n(5636);r&&i({target:"ArrayBuffer",proto:!0},{transfer:function(){return r(this,arguments.length?arguments[0]:void 0,!0)}})},8111:function(t,e,n){var i=n(6518),r=n(4576),a=n(679),s=n(8551),o=n(4901),l=n(2787),u=n(2106),c=n(4659),h=n(9039),d=n(9297),f=n(8227),v=n(7657).IteratorPrototype,p=n(3724),g=n(6395),y="constructor",m="Iterator",w=f("toStringTag"),b=TypeError,k=r[m],_=g||!o(k)||k.prototype!==v||!h(function(){k({})}),A=function(){if(a(this,v),l(this)===v)throw new b("Abstract class Iterator not directly constructable")},x=function(t,e){p?u(v,t,{configurable:!0,get:function(){return e},set:function(e){if(s(this),this===v)throw new b("You can't redefine this property");d(this,t)?this[t]=e:c(this,t,e)}}):v[t]=e};d(v,w)||x(w,m),!_&&d(v,y)&&v[y]!==Object||x(y,A),A.prototype=v,i({global:!0,constructor:!0,forced:_},{Iterator:A})},8227:function(t,e,n){var i=n(4576),r=n(5745),a=n(9297),s=n(3392),o=n(4495),l=n(7040),u=i.Symbol,c=r("wks"),h=l?u.for||u:u&&u.withoutSetter||s;t.exports=function(t){return a(c,t)||(c[t]=o&&a(u,t)?u[t]:h("Symbol."+t)),c[t]}},8235:function(t,e,n){var i=n(9504),r=n(9297),a=SyntaxError,s=parseInt,o=String.fromCharCode,l=i("".charAt),u=i("".slice),c=i(/./.exec),h={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"},d=/^[\da-f]{4}$/i,f=/^[\u0000-\u001F]$/;t.exports=function(t,e){for(var n=!0,i="";e<t.length;){var v=l(t,e);if("\\"===v){var p=u(t,e,e+2);if(r(h,p))i+=h[p],e+=2;else{if("\\u"!==p)throw new a('Unknown escape sequence: "'+p+'"');var g=u(t,e+=2,e+4);if(!c(d,g))throw new a("Bad Unicode escape at: "+e);i+=o(s(g,16)),e+=4}}else{if('"'===v){n=!1,e++;break}if(c(f,v))throw new a("Bad control character in string literal at: "+e);i+=v,e++}}if(n)throw new a("Unterminated string at: "+e);return{value:i,end:e}}},8237:function(t,e,n){var i=n(6518),r=n(2652),a=n(9306),s=n(8551),o=n(1767),l=n(9539),u=n(4549),c=n(8745),h=n(9039),d=TypeError,f=h(function(){[].keys().reduce(function(){},void 0)}),v=!f&&u("reduce",d);i({target:"Iterator",proto:!0,real:!0,forced:f||v},{reduce:function(t){s(this);try{a(t)}catch(t){l(this,"throw",t)}var e=arguments.length<2,n=e?void 0:arguments[1];if(v)return c(v,this,e?[t]:[t,n]);var i=o(this),u=0;if(r(i,function(i){e?(e=!1,n=i):n=t(n,i,u),u++},{IS_RECORD:!0}),e)throw new d("Reduce of empty iterator with no initial value");return n}})},8335:function(t,e,n){var i=n(6518),r=n(3724),a=n(4576),s=n(7751),o=n(9504),l=n(9565),u=n(4901),c=n(34),h=n(4376),d=n(9297),f=n(655),v=n(6198),p=n(4659),g=n(9039),y=n(8235),m=n(4495),w=a.JSON,b=a.Number,k=a.SyntaxError,_=w&&w.parse,A=s("Object","keys"),x=Object.getOwnPropertyDescriptor,S=o("".charAt),E=o("".slice),M=o(/./.exec),C=o([].push),R=/^\d$/,T=/^[1-9]$/,I=/^[\d-]$/,P=/^[\t\n\r ]$/,D=function(t,e,n,i){var r,a,s,o,u,f=t[e],p=i&&f===i.value,g=p&&"string"==typeof i.source?{source:i.source}:{};if(c(f)){var y=h(f),m=p?i.nodes:y?[]:{};if(y)for(r=m.length,s=v(f),o=0;o<s;o++)L(f,o,D(f,""+o,n,o<r?m[o]:void 0));else for(a=A(f),s=v(a),o=0;o<s;o++)u=a[o],L(f,u,D(f,u,n,d(m,u)?m[u]:void 0))}return l(n,t,e,f,g)},L=function(t,e,n){if(r){var i=x(t,e);if(i&&!i.configurable)return}void 0===n?delete t[e]:p(t,e,n)},O=function(t,e,n,i){this.value=t,this.end=e,this.source=n,this.nodes=i},F=function(t,e){this.source=t,this.index=e};F.prototype={fork:function(t){return new F(this.source,t)},parse:function(){var t=this.source,e=this.skip(P,this.index),n=this.fork(e),i=S(t,e);if(M(I,i))return n.number();switch(i){case"{":return n.object();case"[":return n.array();case'"':return n.string();case"t":return n.keyword(!0);case"f":return n.keyword(!1);case"n":return n.keyword(null)}throw new k('Unexpected character: "'+i+'" at: '+e)},node:function(t,e,n,i,r){return new O(e,i,t?null:E(this.source,n,i),r)},object:function(){for(var t=this.source,e=this.index+1,n=!1,i={},r={};e<t.length;){if(e=this.until(['"',"}"],e),"}"===S(t,e)&&!n){e++;break}var a=this.fork(e).string(),s=a.value;e=a.end,e=this.until([":"],e)+1,e=this.skip(P,e),a=this.fork(e).parse(),p(r,s,a),p(i,s,a.value),e=this.until([",","}"],a.end);var o=S(t,e);if(","===o)n=!0,e++;else if("}"===o){e++;break}}return this.node(1,i,this.index,e,r)},array:function(){for(var t=this.source,e=this.index+1,n=!1,i=[],r=[];e<t.length;){if(e=this.skip(P,e),"]"===S(t,e)&&!n){e++;break}var a=this.fork(e).parse();if(C(r,a),C(i,a.value),e=this.until([",","]"],a.end),","===S(t,e))n=!0,e++;else if("]"===S(t,e)){e++;break}}return this.node(1,i,this.index,e,r)},string:function(){var t=this.index,e=y(this.source,this.index+1);return this.node(0,e.value,t,e.end)},number:function(){var t=this.source,e=this.index,n=e;if("-"===S(t,n)&&n++,"0"===S(t,n))n++;else{if(!M(T,S(t,n)))throw new k("Failed to parse number at: "+n);n=this.skip(R,n+1)}if(("."===S(t,n)&&(n=this.skip(R,n+1)),"e"===S(t,n)||"E"===S(t,n))&&(n++,"+"!==S(t,n)&&"-"!==S(t,n)||n++,n===(n=this.skip(R,n))))throw new k("Failed to parse number's exponent value at: "+n);return this.node(0,b(E(t,e,n)),e,n)},keyword:function(t){var e=""+t,n=this.index,i=n+e.length;if(E(this.source,n,i)!==e)throw new k("Failed to parse value at: "+n);return this.node(0,t,n,i)},skip:function(t,e){for(var n=this.source;e<n.length&&M(t,S(n,e));e++);return e},until:function(t,e){e=this.skip(P,e);for(var n=S(this.source,e),i=0;i<t.length;i++)if(t[i]===n)return e;throw new k('Unexpected character: "'+n+'" at: '+e)}};var N=g(function(){var t,e="9007199254740993";return _(e,function(e,n,i){t=i.source}),t!==e}),W=m&&!g(function(){return 1/_("-0 \t")!=-1/0});i({target:"JSON",stat:!0,forced:N},{parse:function(t,e){return W&&!u(e)?_(t):function(t,e){t=f(t);var n=new F(t,0),i=n.parse(),r=i.value,a=n.skip(P,i.end);if(a<t.length)throw new k('Unexpected extra character: "'+S(t,a)+'" after the parsed data at: '+a);return u(e)?D({"":r},"",e,i):r}(t,e)}})},8469:function(t,e,n){var i=n(9504),r=n(507),a=n(4402),s=a.Set,o=a.proto,l=i(o.forEach),u=i(o.keys),c=u(new s).next;t.exports=function(t,e,n){return n?r({iterator:u(t),next:c},e):l(t,e)}},8480:function(t,e,n){var i=n(1828),r=n(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},8527:function(t,e,n){var i=n(7080),r=n(4402).has,a=n(5170),s=n(3789),o=n(507),l=n(9539);t.exports=function(t){var e=i(this),n=s(t);if(a(e)<n.size)return!1;var u=n.getIterator();return!1!==o(u,function(t){if(!r(e,t))return l(u,"normal",!1)})}},8551:function(t,e,n){var i=n(34),r=String,a=TypeError;t.exports=function(t){if(i(t))return t;throw new a(r(t)+" is not an object")}},8574:function(t,e,n){var i=n(9504),r=Error,a=i("".replace),s=String(new r("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,l=o.test(s);t.exports=function(t,e){if(l&&"string"==typeof t&&!r.prepareStackTrace)for(;e--;)t=a(t,o,"");return t}},8622:function(t,e,n){var i=n(4576),r=n(4901),a=i.WeakMap;t.exports=r(a)&&/native code/.test(String(a))},8646:function(t,e,n){var i=n(9565),r=n(8551),a=n(1767),s=n(851);t.exports=function(t,e){e&&"string"==typeof t||r(t);var n=s(t);return a(r(void 0!==n?i(n,t):t))}},8686:function(t,e,n){var i=n(3724),r=n(9039);t.exports=i&&r(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8721:function(t,e,n){var i=n(3724),r=n(9504),a=n(2106),s=URLSearchParams.prototype,o=r(s.forEach);i&&!("size"in s)&&a(s,"size",{get:function(){var t=0;return o(this,function(){t++}),t},configurable:!0,enumerable:!0})},8727:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:function(t,e,n){var i=n(616),r=Function.prototype,a=r.apply,s=r.call;t.exports="object"==("undefined"==typeof Reflect?"undefined":W(Reflect))&&Reflect.apply||(i?s.bind(a):function(){return s.apply(a,arguments)})},8750:function(t,e,n){var i=n(7080),r=n(4402),a=n(5170),s=n(3789),o=n(8469),l=n(507),u=r.Set,c=r.add,h=r.has;t.exports=function(t){var e=i(this),n=s(t),r=new u;return a(e)>n.size?l(n.getIterator(),function(t){h(e,t)&&c(r,t)}):o(e,function(t){n.includes(t)&&c(r,t)}),r}},8773:function(t,e){var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},8981:function(t,e,n){var i=n(7750),r=Object;t.exports=function(t){return r(i(t))}},9039:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},9143:function(t,e,n){var i=n(4576),r=n(9504),a=n(3972),s=n(3463),o=n(9297),l=n(2804),u=n(944),c=n(5169),h=l.c2i,d=l.c2iUrl,f=i.SyntaxError,v=i.TypeError,p=r("".charAt),g=function(t,e){for(var n=t.length;e<n;e++){var i=p(t,e);if(" "!==i&&"\t"!==i&&"\n"!==i&&"\f"!==i&&"\r"!==i)break}return e},y=function(t,e,n){var i=t.length;i<4&&(t+=2===i?"AA":"A");var r=(e[p(t,0)]<<18)+(e[p(t,1)]<<12)+(e[p(t,2)]<<6)+e[p(t,3)],a=[r>>16&255,r>>8&255,255&r];if(2===i){if(n&&0!==a[1])throw new f("Extra bits");return[a[0]]}if(3===i){if(n&&0!==a[2])throw new f("Extra bits");return[a[0],a[1]]}return a},m=function(t,e,n){for(var i=e.length,r=0;r<i;r++)t[n+r]=e[r];return n+i};t.exports=function(t,e,n,i){s(t),a(e);var r="base64"===u(e)?h:d,l=e?e.lastChunkHandling:void 0;if(void 0===l&&(l="loose"),"loose"!==l&&"strict"!==l&&"stop-before-partial"!==l)throw new v("Incorrect `lastChunkHandling` option");n&&c(n.buffer);var w=n||[],b=0,k=0,_="",A=0;if(i)for(;;){if((A=g(t,A))===t.length){if(_.length>0){if("stop-before-partial"===l)break;if("loose"!==l)throw new f("Missing padding");if(1===_.length)throw new f("Malformed padding: exactly one additional character");b=m(w,y(_,r,!1),b)}k=t.length;break}var x=p(t,A);if(++A,"="===x){if(_.length<2)throw new f("Padding is too early");if(A=g(t,A),2===_.length){if(A===t.length){if("stop-before-partial"===l)break;throw new f("Malformed padding: only one =")}"="===p(t,A)&&(++A,A=g(t,A))}if(A<t.length)throw new f("Unexpected character after padding");b=m(w,y(_,r,"strict"===l),b),k=t.length;break}if(!o(r,x))throw new f("Unexpected character");var S=i-b;if(1===S&&2===_.length||2===S&&3===_.length)break;if(4===(_+=x).length&&(b=m(w,y(_,r,!1),b),_="",k=A,b===i))break}return{bytes:w,read:k,written:b}}},9286:function(t,e,n){var i=n(4402),r=n(8469),a=i.Set,s=i.add;t.exports=function(t){var e=new a;return r(t,function(t){s(e,t)}),e}},9297:function(t,e,n){var i=n(9504),r=n(8981),a=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return a(r(t),e)}},9306:function(t,e,n){var i=n(4901),r=n(6823),a=TypeError;t.exports=function(t){if(i(t))return t;throw new a(r(t)+" is not a function")}},9314:function(t,e,n){var i=n(6518),r=n(9565),a=n(8551),s=n(1767),o=n(4149),l=n(9590),u=n(9539),c=n(9462),h=n(4549),d=n(6395),f=!d&&h("drop",RangeError),v=c(function(){for(var t,e=this.iterator,n=this.next;this.remaining;)if(this.remaining--,t=a(r(n,e)),this.done=!!t.done)return;if(t=a(r(n,e)),!(this.done=!!t.done))return t.value});i({target:"Iterator",proto:!0,real:!0,forced:d||f},{drop:function(t){var e;a(this);try{e=l(o(+t))}catch(t){u(this,"throw",t)}return f?r(f,this,e):new v(s(this),{remaining:e})}})},9429:function(t,e,n){var i=n(4576),r=n(6193);t.exports=function(t){if(r){try{return i.process.getBuiltinModule(t)}catch(t){}try{return Function('return require("'+t+'")')()}catch(t){}}}},9432:function(t,e,n){var i=n(6518),r=n(4576),a=n(5370),s=n(9143),o=r.Uint8Array;o&&i({target:"Uint8Array",stat:!0},{fromBase64:function(t){var e=s(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return a(o,e.bytes)}})},9433:function(t,e,n){var i=n(4576),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},9462:function(t,e,n){var i=n(9565),r=n(2360),a=n(6699),s=n(6279),o=n(8227),l=n(1181),u=n(5966),c=n(7657).IteratorPrototype,h=n(2529),d=n(9539),f=o("toStringTag"),v="IteratorHelper",p="WrapForValidIterator",g=l.set,y=function(t){var e=l.getterFor(t?p:v);return s(r(c),{next:function(){var n=e(this);if(t)return n.nextHandler();if(n.done)return h(void 0,!0);try{var i=n.nextHandler();return n.returnHandlerResult?i:h(i,n.done)}catch(t){throw n.done=!0,t}},return:function(){var n=e(this),r=n.iterator;if(n.done=!0,t){var a=u(r,"return");return a?i(a,r):h(void 0,!0)}if(n.inner)try{d(n.inner.iterator,"normal")}catch(t){return d(r,"throw",t)}return r&&d(r,"normal"),h(void 0,!0)}})},m=y(!0),w=y(!1);a(w,f,"Iterator Helper"),t.exports=function(t,e,n){var i=function(i,r){r?(r.iterator=i.iterator,r.next=i.next):r=i,r.type=e?p:v,r.returnHandlerResult=!!n,r.nextHandler=t,r.counter=0,r.done=!1,g(this,r)};return i.prototype=e?m:w,i}},9504:function(t,e,n){var i=n(616),r=Function.prototype,a=r.call,s=i&&r.bind.bind(a,a);t.exports=i?s:function(t){return function(){return a.apply(t,arguments)}}},9519:function(t,e,n){var i,r,a=n(4576),s=n(2839),o=a.process,l=a.Deno,u=o&&o.versions||l&&l.version,c=u&&u.v8;c&&(r=(i=c.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=+i[1]),t.exports=r},9539:function(t,e,n){var i=n(9565),r=n(8551),a=n(5966);t.exports=function(t,e,n){var s,o;r(t);try{if(!(s=a(t,"return"))){if("throw"===e)throw n;return n}s=i(s,t)}catch(t){o=!0,s=t}if("throw"===e)throw n;if(o)throw s;return r(s),n}},9565:function(t,e,n){var i=n(616),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},9590:function(t,e,n){var i=n(1291),r=RangeError;t.exports=function(t){var e=i(t);if(e<0)throw new r("The argument can't be less than 0");return e}},9617:function(t,e,n){var i=n(5397),r=n(5610),a=n(6198),s=function(t){return function(e,n,s){var o=i(e),l=a(o);if(0===l)return!t&&-1;var u,c=r(s,l);if(t&&n!=n){for(;l>c;)if((u=o[c++])!=u)return!0}else for(;l>c;c++)if((t||c in o)&&o[c]===n)return t||c||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},9631:function(t,e,n){var i=n(6518),r=n(4576),a=n(9504),s=n(3972),o=n(4154),l=n(5169),u=n(2804),c=n(944),h=u.i2c,d=u.i2cUrl,f=a("".charAt);r.Uint8Array&&i({target:"Uint8Array",proto:!0},{toBase64:function(){var t=o(this),e=arguments.length?s(arguments[0]):void 0,n="base64"===c(e)?h:d,i=!!e&&!!e.omitPadding;l(this.buffer);for(var r,a="",u=0,v=t.length,p=function(t){return f(n,r>>6*t&63)};u+2<v;u+=3)r=(t[u]<<16)+(t[u+1]<<8)+t[u+2],a+=p(3)+p(2)+p(1)+p(0);return u+2===v?(r=(t[u]<<16)+(t[u+1]<<8),a+=p(3)+p(2)+p(1)+(i?"":"=")):u+1===v&&(r=t[u]<<16,a+=p(3)+p(2)+(i?"":"==")),a}})},9797:function(t,e,n){var i=n(6518),r=n(4576),a=n(3463),s=n(4154),o=n(5169),l=n(2303);r.Uint8Array&&i({target:"Uint8Array",proto:!0},{setFromHex:function(t){s(this),a(t),o(this.buffer);var e=l(t,this).read;return{read:e,written:e/2}}})}},rt={};function at(t){var e=rt[t];if(void 0!==e)return e.exports;var n=rt[t]={exports:{}};return it[t].call(n.exports,n,n.exports,at),n.exports}at(4114),at(6573),at(8100),at(7936),at(8111),at(8237),at(1689),at(9432),at(1549),at(9797),at(9631),at(5623),at(4979),at(5781);var st=!("object"!==("undefined"==typeof process?"undefined":W(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),ot=[.001,0,0,.001,0,0],lt=1.35,ut=1,ct=2,ht=4,dt=16,ft=32,vt=64,pt=128,gt=256,yt={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},wt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},bt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},kt=0,_t=1,At=2,xt=3,St=3,Et=4,Mt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ct={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Rt=1,Tt=2,It=3,Pt=4,Dt=5,Lt={ERRORS:0,WARNINGS:1,INFOS:5},Ot={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Ft=0,Nt=1,Wt=2,Bt=3,jt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},zt=Lt.WARNINGS;function Ut(t){Number.isInteger(t)&&(zt=t)}function Ht(){return zt}function Gt(t){zt>=Lt.INFOS&&console.log("Info: ".concat(t))}function Vt(t){zt>=Lt.WARNINGS&&console.log("Warning: ".concat(t))}function qt(t){throw new Error(t)}function Xt(t,e){t||qt(e)}function Yt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;if(n&&"string"==typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){var i=t.match(/\./g);(null==i?void 0:i.length)>=2&&(t="http://".concat(t))}if(n.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch(t){}}var r=e?URL.parse(t,e):URL.parse(t);return function(t){switch(null==t?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r)?r:null}function Kt(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=URL.parse(t);return i?(i.hash=e,i.href):n&&Yt(t,"http://example.com")?t.split("#",1)[0]+"".concat(e?"#".concat(e):""):""}function Qt(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}var Jt=function(){function t(t,e){this.message=t,this.name=e}return t.prototype=new Error,t.constructor=t,t}(),Zt=function(t){function e(t,n){var i;return c(this,e),(i=l(this,e,[t,"PasswordException"])).code=n,i}return _(e,t),y(e)}(Jt),$t=function(t){function e(t,n){var i;return c(this,e),(i=l(this,e,[t,"UnknownErrorException"])).details=n,i}return _(e,t),y(e)}(Jt),te=function(t){function e(t){return c(this,e),l(this,e,[t,"InvalidPDFException"])}return _(e,t),y(e)}(Jt),ee=function(t){function e(t,n,i){var r;return c(this,e),(r=l(this,e,[t,"ResponseException"])).status=n,r.missing=i,r}return _(e,t),y(e)}(Jt),ne=function(t){function e(t){return c(this,e),l(this,e,[t,"FormatError"])}return _(e,t),y(e)}(Jt),ie=function(t){function e(t){return c(this,e),l(this,e,[t,"AbortException"])}return _(e,t),y(e)}(Jt);function re(t){"object"===W(t)&&void 0!==(null==t?void 0:t.length)||qt("Invalid argument for bytesToString");var e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);for(var i=[],r=0;r<e;r+=n){var a=Math.min(r+n,e),s=t.subarray(r,a);i.push(String.fromCharCode.apply(null,s))}return i.join("")}function ae(t){"string"!=typeof t&&qt("Invalid argument for stringToBytes");for(var e=t.length,n=new Uint8Array(e),i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}var se=function(){return y(function t(){c(this,t)},null,[{key:"isLittleEndian",get:function(){return Qt(this,"isLittleEndian",((t=new Uint8Array(4))[0]=1,1===new Uint32Array(t.buffer,0,1)[0]));var t}},{key:"isEvalSupported",get:function(){return Qt(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}},{key:"isOffscreenCanvasSupported",get:function(){return Qt(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}},{key:"isImageDecoderSupported",get:function(){return Qt(this,"isImageDecoderSupported","undefined"!=typeof ImageDecoder)}},{key:"platform",get:function(){var t=navigator,e=t.platform,n=t.userAgent;return Qt(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}},{key:"isCSSRoundSupported",get:function(){var t,e;return Qt(this,"isCSSRoundSupported",null===(t=globalThis.CSS)||void 0===t||null===(e=t.supports)||void 0===e?void 0:e.call(t,"width: round(1.5px, 1px)"))}}])}(),oe=Array.from(Array(256).keys(),function(t){return t.toString(16).padStart(2,"0")}),le=function(){function t(){c(this,t)}return y(t,null,[{key:"makeHexColor",value:function(t,e,n){return"#".concat(oe[t]).concat(oe[e]).concat(oe[n])}},{key:"scaleMinMax",value:function(t,e){var n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}},{key:"transform",value:function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}},{key:"applyTransform",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t[n],r=t[n+1];t[n]=i*e[0]+r*e[2]+e[4],t[n+1]=i*e[1]+r*e[3]+e[5]}},{key:"applyTransformToBezier",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=0;u<6;u+=2){var c=t[n+u],h=t[n+u+1];t[n+u]=c*i+h*a+o,t[n+u+1]=c*r+h*s+l}}},{key:"applyInverseTransform",value:function(t,e){var n=t[0],i=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/r}},{key:"axialAlignedBoundingBox",value:function(t,e,n){var i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=t[0],c=t[1],h=t[2],d=t[3],f=i*u+o,v=f,p=i*h+o,g=p,y=s*c+l,m=y,w=s*d+l,b=w;if(0!==r||0!==a){var k=r*u,_=r*h,A=a*c,x=a*d;f+=A,g+=A,p+=x,v+=x,y+=k,b+=k,w+=_,m+=_}n[0]=Math.min(n[0],f,p,v,g),n[1]=Math.min(n[1],y,w,m,b),n[2]=Math.max(n[2],f,p,v,g),n[3]=Math.max(n[3],y,w,m,b)}},{key:"inverseTransform",value:function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}},{key:"singularValueDecompose2dScale",value:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],s=Math.pow(n,2)+Math.pow(i,2),o=n*r+i*a,l=Math.pow(r,2)+Math.pow(a,2),u=(s+l)/2,c=Math.sqrt(Math.pow(u,2)-(s*l-Math.pow(o,2)));e[0]=Math.sqrt(u+c||1),e[1]=Math.sqrt(u-c||1)}},{key:"normalizeRect",value:function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}},{key:"intersect",value:function(t,e){var n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;var r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[n,r,i,a]}},{key:"pointBoundingBox",value:function(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}},{key:"rectBoundingBox",value:function(t,e,n,i,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,i),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,i)}},{key:"bezierBoundingBox",value:function(e,n,r,a,s,o,l,u,c){c[0]=Math.min(c[0],e,l),c[1]=Math.min(c[1],n,u),c[2]=Math.max(c[2],e,l),c[3]=Math.max(c[3],n,u),i(t,this,ce).call(this,e,r,s,l,n,a,o,u,3*(3*(r-s)-e+l),6*(e-2*r+s),3*(r-e),c),i(t,this,ce).call(this,e,r,s,l,n,a,o,u,3*(3*(a-o)-n+u),6*(n-2*a+o),3*(a-n),c)}}])}();function ue(t,e,n,i,r,a,s,o,l,u){if(!(l<=0||l>=1)){var c=1-l,h=l*l,d=h*l,f=c*(c*(c*t+3*l*e)+3*h*n)+d*i,v=c*(c*(c*r+3*l*a)+3*h*s)+d*o;u[0]=Math.min(u[0],f),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],f),u[3]=Math.max(u[3],v)}}function ce(t,e,n,r,a,s,o,l,u,c,h,d){if(Math.abs(u)<1e-12)Math.abs(c)>=1e-12&&i(j,this,ue).call(this,t,e,n,r,a,s,o,l,-h/c,d);else{var f=Math.pow(c,2)-4*h*u;if(!(f<0)){var v=Math.sqrt(f),p=2*u;i(j,this,ue).call(this,t,e,n,r,a,s,o,l,(-c+v)/p,d),i(j,this,ue).call(this,t,e,n,r,a,s,o,l,(-c-v)/p,d)}}}j=le;var he=null,de=null;function fe(t){return he||(he=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,de=new Map([["ﬅ","ſt"]])),t.replaceAll(he,function(t,e,n){return e?e.normalize("NFKC"):de.get(n)})}function ve(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();var t=new Uint8Array(32);return crypto.getRandomValues(t),re(t)}var pe="pdfjs_internal_id_";function ge(t,e,n){return Math.min(Math.max(t,e),n)}function ye(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(re(t))}function me(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):ae(atob(t))}"function"!=typeof Math.sumPrecise&&(Math.sumPrecise=function(t){return t.reduce(function(t,e){return t+e},0)}),"function"!=typeof AbortSignal.any&&(AbortSignal.any=function(t){var e,n=new AbortController,i=n.signal,r=m(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;if(a.aborted)return n.abort(a.reason),i}}catch(t){r.e(t)}finally{r.f()}var s,o=m(t);try{var l=function(){var t=s.value;t.addEventListener("abort",function(){n.abort(t.reason)},{signal:i})};for(o.s();!(s=o.n()).done;)l()}catch(t){o.e(t)}finally{o.f()}return i}),at(1701),at(4628),at(7642),at(8004),at(3853),at(5876),at(2475),at(5024),at(1698),at(4603),at(7566),at(8721),at(9314),at(1148),at(3579),at(8335);var we="http://www.w3.org/2000/svg",be=y(function t(){c(this,t)});function ke(t){return _e.apply(this,arguments)}function _e(){return _e=o(C().m(function t(e){var n,i,r,a=arguments;return C().w(function(t){for(;;)switch(t.n){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:"text",!Te(e,document.baseURI)){t.n=7;break}return t.n=1,fetch(e);case 1:if((i=t.v).ok){t.n=2;break}throw new Error(i.statusText);case 2:r=n,t.n="arraybuffer"===r?3:"blob"===r?4:"json"===r?5:6;break;case 3:return t.a(2,i.arrayBuffer());case 4:return t.a(2,i.blob());case 5:return t.a(2,i.json());case 6:return t.a(2,i.text());case 7:return t.a(2,new Promise(function(t,i){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType=n,r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE)if(200!==r.status&&0!==r.status)i(new Error(r.statusText));else{switch(n){case"arraybuffer":case"blob":case"json":return void t(r.response)}t(r.responseText)}},r.send(null)}))}},t)})),_e.apply(this,arguments)}z=be,w(be,"CSS",96),w(be,"PDF",72),w(be,"PDF_TO_CSS_UNITS",z.CSS/z.PDF);var Ae=function(){function t(e){var n=e.viewBox,i=e.userUnit,r=e.scale,a=e.rotation,s=e.offsetX,o=void 0===s?0:s,l=e.offsetY,u=void 0===l?0:l,h=e.dontFlip,d=void 0!==h&&h;c(this,t),this.viewBox=n,this.userUnit=i,this.scale=r,this.rotation=a,this.offsetX=o,this.offsetY=u,r*=i;var f,v,p,g,y,m,w,b,k=(n[2]+n[0])/2,_=(n[3]+n[1])/2;switch((a%=360)<0&&(a+=360),a){case 180:f=-1,v=0,p=0,g=1;break;case 90:f=0,v=1,p=1,g=0;break;case 270:f=0,v=-1,p=-1,g=0;break;case 0:f=1,v=0,p=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(p=-p,g=-g),0===f?(y=Math.abs(_-n[1])*r+o,m=Math.abs(k-n[0])*r+u,w=(n[3]-n[1])*r,b=(n[2]-n[0])*r):(y=Math.abs(k-n[0])*r+o,m=Math.abs(_-n[1])*r+u,w=(n[2]-n[0])*r,b=(n[3]-n[1])*r),this.transform=[f*r,v*r,p*r,g*r,y-f*r*k-p*r*_,m-v*r*k-g*r*_],this.width=w,this.height=b}return y(t,[{key:"rawDims",get:function(){var t=this.viewBox;return Qt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.scale,i=void 0===n?this.scale:n,r=e.rotation,a=void 0===r?this.rotation:r,s=e.offsetX,o=void 0===s?this.offsetX:s,l=e.offsetY,u=void 0===l?this.offsetY:l,c=e.dontFlip,h=void 0!==c&&c;return new t({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:i,rotation:a,offsetX:o,offsetY:u,dontFlip:h})}},{key:"convertToViewportPoint",value:function(t,e){var n=[t,e];return le.applyTransform(n,this.transform),n}},{key:"convertToViewportRectangle",value:function(t){var e=[t[0],t[1]];le.applyTransform(e,this.transform);var n=[t[2],t[3]];return le.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}},{key:"convertToPdfPoint",value:function(t,e){var n=[t,e];return le.applyInverseTransform(n,this.transform),n}}])}(),xe=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c(this,e),(n=l(this,e,[t,"RenderingCancelledException"])).extraDelay=i,n}return _(e,t),y(e)}(Jt);function Se(t){for(var e=t.length,n=0;n<e&&""===t[n].trim();)n++;return"data:"===t.substring(n,n+5).toLowerCase()}function Ee(t){return"string"==typeof t&&/\.pdf$/i.test(t)}function Me(t){var e=t.split(/[#?]/,1);return(t=P(e,1)[0]).substring(t.lastIndexOf("/")+1)}function Ce(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof t)return e;if(Se(t))return Vt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;var n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t),r=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(r&&(r=r[0]).includes("%"))try{r=n.exec(decodeURIComponent(r))[0]}catch(t){}return r||e}var Re=function(){return y(function t(){c(this,t),w(this,"started",Object.create(null)),w(this,"times",[])},[{key:"time",value:function(t){t in this.started&&Vt("Timer is already running for ".concat(t)),this.started[t]=Date.now()}},{key:"timeEnd",value:function(t){t in this.started||Vt("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}},{key:"toString",value:function(){var t,e=[],n=0,i=m(this.times);try{for(i.s();!(t=i.n()).done;){var r=t.value.name;n=Math.max(r.length,n)}}catch(t){i.e(t)}finally{i.f()}var a,s=m(this.times);try{for(s.s();!(a=s.n()).done;){var o=a.value,l=o.name,u=o.start,c=o.end;e.push("".concat(l.padEnd(n)," ").concat(c-u,"ms\n"))}}catch(t){s.e(t)}finally{s.f()}return e.join("")}}])}();function Te(t,e){var n=e?URL.parse(t,e):URL.parse(t);return"http:"===(null==n?void 0:n.protocol)||"https:"===(null==n?void 0:n.protocol)}function Ie(t){t.preventDefault()}function Pe(t){t.preventDefault(),t.stopPropagation()}var De=function(){function t(){c(this,t)}return y(t,null,[{key:"toDateObject",value:function(e){if(!e||"string"!=typeof e)return null;i(t,this,Le)._||(Le._=i(t,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));var n=i(t,this,Le)._.exec(e);if(!n)return null;var r=parseInt(n[1],10),a=parseInt(n[2],10);a=a>=1&&a<=12?a-1:0;var s=parseInt(n[3],10);s=s>=1&&s<=31?s:1;var o=parseInt(n[4],10);o=o>=0&&o<=23?o:0;var l=parseInt(n[5],10);l=l>=0&&l<=59?l:0;var u=parseInt(n[6],10);u=u>=0&&u<=59?u:0;var c=n[7]||"Z",h=parseInt(n[8],10);h=h>=0&&h<=23?h:0;var d=parseInt(n[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===c?(o+=h,l+=d):"+"===c&&(o-=h,l-=d),new Date(Date.UTC(r,a,s,o,l,u))}}])}(),Le={_:void 0};function Oe(t,e){var n=e.scale,i=void 0===n?1:n,r=e.rotation,a=void 0===r?0:r,s=t.attributes.style,o=s.width,l=s.height,u=[0,0,parseInt(o),parseInt(l)];return new Ae({viewBox:u,userUnit:1,scale:i,rotation:a})}function Fe(t){if(t.startsWith("#")){var e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(function(t){return parseInt(t)}):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(function(t){return parseInt(t)}).slice(0,3):(Vt('Not a valid color format: "'.concat(t,'"')),[0,0,0])}function Ne(t){var e=t.getTransform();return[e.a,e.b,e.c,e.d,e.e,e.f]}function We(t){var e=t.getTransform().invertSelf();return[e.a,e.b,e.c,e.d,e.e,e.f]}function Be(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof Ae){var r=e.rawDims,a=r.pageWidth,s=r.pageHeight,o=t.style,l=se.isCSSRoundSupported,u="var(--total-scale-factor) * ".concat(a,"px"),c="var(--total-scale-factor) * ".concat(s,"px"),h=l?"round(down, ".concat(u,", var(--scale-round-x))"):"calc(".concat(u,")"),d=l?"round(down, ".concat(c,", var(--scale-round-y))"):"calc(".concat(c,")");n&&e.rotation%180!=0?(o.width=d,o.height=h):(o.width=h,o.height=d)}i&&t.setAttribute("data-main-rotation",e.rotation)}var je=function(){function t(){c(this,t);var e=t.pixelRatio;this.sx=e,this.sy=e}return y(t,[{key:"scaled",get:function(){return 1!==this.sx||1!==this.sy}},{key:"symmetric",get:function(){return this.sx===this.sy}},{key:"limitCanvas",value:function(e,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=1/0,o=1/0,l=1/0;(i=t.capPixels(i,a))>0&&(s=Math.sqrt(i/(e*n))),-1!==r&&(o=r/e,l=r/n);var u=Math.min(s,o,l);return(this.sx>u||this.sy>u)&&(this.sx=u,this.sy=u,!0)}}],[{key:"pixelRatio",get:function(){return globalThis.devicePixelRatio||1}},{key:"capPixels",value:function(t,e){if(e>=0){var n=Math.ceil(window.screen.availWidth*window.screen.availHeight*Math.pow(this.pixelRatio,2)*(1+e/100));return t>0?Math.min(t,n):n}return t}}])}(),ze=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],Ue=new WeakMap,He=new WeakMap,Ge=new WeakMap,Ve=new WeakMap,qe=new WeakMap,Xe=new WeakMap,Ye=new WeakSet,Ke=function(){return y(function t(e){c(this,t),p(this,Ye),d(this,Ue,null),d(this,He,null),d(this,Ge,void 0),d(this,Ve,null),d(this,qe,null),d(this,Xe,null),f(Ge,this,e),nn._||(nn._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))},[{key:"render",value:function(){var t=f(Ue,this,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");var e=h(Ge,this)._uiManager._signal;t.addEventListener("contextmenu",Ie,{signal:e}),t.addEventListener("pointerdown",Qe,{signal:e});var n=f(Ve,this,document.createElement("div"));n.className="buttons",t.append(n);var r=h(Ge,this).toolbarPosition;if(r){var a=t.style,s="ltr"===h(Ge,this)._uiManager.direction?1-r[0]:r[0];a.insetInlineEnd="".concat(100*s,"%"),a.top="calc(".concat(100*r[1],"% + var(--editor-toolbar-vert-offset))")}return i(Ye,this,tn).call(this),t}},{key:"div",get:function(){return h(Ue,this)}},{key:"hide",value:function(){var t;h(Ue,this).classList.add("hidden"),null===(t=h(He,this))||void 0===t||t.hideDropdown()}},{key:"show",value:function(){var t;h(Ue,this).classList.remove("hidden"),null===(t=h(qe,this))||void 0===t||t.shown()}},{key:"addAltText",value:(e=o(C().m(function t(e){var n;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.render();case 1:n=t.v,i(Ye,this,$e).call(this,n),h(Ve,this).prepend(n,v(Ye,this,en)),f(qe,this,e);case 2:return t.a(2)}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"addColorPicker",value:function(t){f(He,this,t);var e=t.renderButton();i(Ye,this,$e).call(this,e),h(Ve,this).prepend(e,v(Ye,this,en))}},{key:"addEditSignatureButton",value:(t=o(C().m(function t(e){var n,r,a,s,o;return C().w(function(t){for(;;)switch(t.n){case 0:return r=f,a=Xe,s=this,t.n=1,e.renderEditButton(h(Ge,this));case 1:o=t.v,n=r(a,s,o),i(Ye,this,$e).call(this,n),h(Ve,this).prepend(n,v(Ye,this,en));case 2:return t.a(2)}},t,this)})),function(e){return t.apply(this,arguments)})},{key:"updateEditSignatureButton",value:function(t){h(Xe,this)&&(h(Xe,this).title=t)}},{key:"remove",value:function(){var t;h(Ue,this).remove(),null===(t=h(He,this))||void 0===t||t.destroy(),f(He,this,null)}}]);var t,e}();function Qe(t){t.stopPropagation()}function Je(t){h(Ge,this)._focusEventsAllowed=!1,Pe(t)}function Ze(t){h(Ge,this)._focusEventsAllowed=!0,Pe(t)}function $e(t){var e=h(Ge,this)._uiManager._signal;t.addEventListener("focusin",i(Ye,this,Je).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",i(Ye,this,Ze).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ie,{signal:e})}function tn(){var t=h(Ge,this),e=t.editorType,n=t._uiManager,r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",nn._[e]),i(Ye,this,$e).call(this,r),r.addEventListener("click",function(t){n.delete()},{signal:n._signal}),h(Ve,this).append(r)}function en(t){var e=document.createElement("div");return e.className="divider",e}var nn={_:null},rn=new WeakMap,an=new WeakMap,sn=new WeakMap,on=new WeakSet,ln=function(){return y(function t(e){c(this,t),p(this,on),d(this,rn,null),d(this,an,null),d(this,sn,void 0),f(sn,this,e)},[{key:"show",value:function(t,e,n){var r=P(i(on,this,cn).call(this,e,n),2),a=r[0],s=r[1],o=(h(an,this)||f(an,this,i(on,this,un).call(this))).style;t.append(h(an,this)),o.insetInlineEnd="".concat(100*a,"%"),o.top="calc(".concat(100*s,"% + var(--editor-toolbar-vert-offset))")}},{key:"hide",value:function(){h(an,this).remove()}}])}();function un(){var t=f(an,this,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ie,{signal:h(sn,this)._signal});var e=f(rn,this,document.createElement("div"));return e.className="buttons",t.append(e),i(on,this,hn).call(this),t}function cn(t,e){var n,i=0,r=0,a=m(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=s.y+s.height;if(!(o<i)){var l=s.x+(e?s.width:0);o>i?(r=l,i=o):e?l>r&&(r=l):l<r&&(r=l)}}}catch(t){a.e(t)}finally{a.f()}return[e?1-r:r,i]}function hn(){var t=this,e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");var n=document.createElement("span");e.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");var i=h(sn,this)._signal;e.addEventListener("contextmenu",Ie,{signal:i}),e.addEventListener("click",function(){h(sn,t).highlightSelection("floating_button")},{signal:i}),h(rn,this).append(e)}function dn(t,e,n){var i,r=m(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;e.addEventListener(a,t[a].bind(t))}}catch(t){r.e(t)}finally{r.f()}}var fn=new WeakMap,vn=function(){return y(function t(){c(this,t),d(this,fn,0)},[{key:"id",get:function(){var t,e;return"".concat("pdfjs_internal_editor_").concat((f(fn,this,(t=h(fn,this),e=t++,t)),e))}}])}(),pn=new WeakMap,gn=new WeakMap,yn=new WeakMap,mn=new WeakSet,wn=function(){return y(function t(){c(this,t),p(this,mn),d(this,pn,ve()),d(this,gn,0),d(this,yn,null)},[{key:"getFromFile",value:(r=o(C().m(function t(e){var n,r,a,s;return C().w(function(t){for(;;)if(0===t.n)return n=e.lastModified,r=e.name,a=e.size,s=e.type,t.a(2,i(mn,this,bn).call(this,"".concat(n,"_").concat(r,"_").concat(a,"_").concat(s),e))},t,this)})),function(t){return r.apply(this,arguments)})},{key:"getFromUrl",value:(n=o(C().m(function t(e){return C().w(function(t){for(;;)if(0===t.n)return t.a(2,i(mn,this,bn).call(this,e,e))},t,this)})),function(t){return n.apply(this,arguments)})},{key:"getFromBlob",value:(e=o(C().m(function t(e,n){var r;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,n;case 1:return r=t.v,t.a(2,i(mn,this,bn).call(this,e,r))}},t,this)})),function(t,n){return e.apply(this,arguments)})},{key:"getFromId",value:(t=o(C().m(function t(e){var n,i;return C().w(function(t){for(;;)switch(t.n){case 0:if(h(yn,this)||f(yn,this,new Map),n=h(yn,this).get(e)){t.n=1;break}return t.a(2,null);case 1:if(!n.bitmap){t.n=2;break}return n.refCounter+=1,t.a(2,n);case 2:if(!n.file){t.n=3;break}return t.a(2,this.getFromFile(n.file));case 3:if(!n.blobPromise){t.n=4;break}return i=n.blobPromise,delete n.blobPromise,t.a(2,this.getFromBlob(n.id,i));case 4:return t.a(2,this.getFromUrl(n.url))}},t,this)})),function(e){return t.apply(this,arguments)})},{key:"getFromCanvas",value:function(t,e){var n,i,r;h(yn,this)||f(yn,this,new Map);var a=h(yn,this).get(t);if(null!==(r=a)&&void 0!==r&&r.bitmap)return a.refCounter+=1,a;var s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),a={bitmap:s.transferToImageBitmap(),id:"image_".concat(h(pn,this),"_").concat((f(gn,this,(n=h(gn,this),i=n++,n)),i)),refCounter:1,isSvg:!1},h(yn,this).set(t,a),h(yn,this).set(a.id,a),a}},{key:"getSvgUrl",value:function(t){var e=h(yn,this).get(t);return null!=e&&e.isSvg?e.svgUrl:null}},{key:"deleteId",value:function(t){var e;h(yn,this)||f(yn,this,new Map);var n=h(yn,this).get(t);if(n&&(n.refCounter-=1,0===n.refCounter)){var i=n.bitmap;if(!n.url&&!n.file){var r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=r.convertToBlob()}null===(e=i.close)||void 0===e||e.call(i),n.bitmap=null}}},{key:"isValidId",value:function(t){return t.startsWith("image_".concat(h(pn,this),"_"))}}],[{key:"_isSVGFittingCanvas",get:function(){var t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Qt(this,"_isSVGFittingCanvas",e.decode().then(function(){return t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0]}))}}]);var t,e,n,r}();function bn(t,e){return kn.apply(this,arguments)}function kn(){return(kn=o(C().m(function t(e,n){var i,r,a,s,l,u,c,d,v;return C().w(function(t){for(;;)switch(t.p=t.n){case 0:if(h(yn,this)||f(yn,this,new Map),null!==(r=h(yn,this).get(e))){t.n=1;break}return t.a(2,null);case 1:if(null===(i=r)||void 0===i||!i.bitmap){t.n=2;break}return r.refCounter+=1,t.a(2,r);case 2:if(t.p=2,r||(r={bitmap:null,id:"image_".concat(h(pn,this),"_").concat((f(gn,this,(a=h(gn,this),s=a++,a)),s)),refCounter:0,isSvg:!1}),"string"!=typeof n){t.n=4;break}return r.url=n,t.n=3,ke(n,"blob");case 3:l=t.v,t.n=5;break;case 4:n instanceof File?l=r.file=n:n instanceof Blob&&(l=n);case 5:if("image/svg+xml"!==l.type){t.n=7;break}return u=U._isSVGFittingCanvas,c=new FileReader,d=new Image,v=new Promise(function(t,e){d.onload=function(){r.bitmap=d,r.isSvg=!0,t()},c.onload=o(C().m(function t(){var e,n;return C().w(function(t){for(;;)switch(t.n){case 0:return e=r.svgUrl=c.result,t.n=1,u;case 1:if(!t.v){t.n=2;break}n="".concat(e,"#svgView(preserveAspectRatio(none))"),t.n=3;break;case 2:n=e;case 3:d.src=n;case 4:return t.a(2)}},t)})),d.onerror=c.onerror=e}),c.readAsDataURL(l),t.n=6,v;case 6:t.n=9;break;case 7:return t.n=8,createImageBitmap(l);case 8:r.bitmap=t.v;case 9:r.refCounter=1,t.n=11;break;case 10:t.p=10,Vt(t.v),r=null;case 11:return h(yn,this).set(e,r),r&&h(yn,this).set(r.id,r),t.a(2,r)}},t,this,[[2,10]])}))).apply(this,arguments)}U=wn;var _n=new WeakMap,An=new WeakMap,xn=new WeakMap,Sn=new WeakMap,En=function(){return y(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;c(this,t),d(this,_n,[]),d(this,An,!1),d(this,xn,void 0),d(this,Sn,-1),f(xn,this,e)},[{key:"add",value:function(t){var e=t.cmd,n=t.undo,i=t.post,r=t.mustExec,a=t.type,s=void 0===a?NaN:a,o=t.overwriteIfSameType,l=void 0!==o&&o,u=t.keepUndo,c=void 0!==u&&u;if(r&&e(),!h(An,this)){var d={cmd:e,undo:n,post:i,type:s};if(-1===h(Sn,this))return h(_n,this).length>0&&(h(_n,this).length=0),f(Sn,this,0),void h(_n,this).push(d);if(l&&h(_n,this)[h(Sn,this)].type===s)return c&&(d.undo=h(_n,this)[h(Sn,this)].undo),void(h(_n,this)[h(Sn,this)]=d);var v=h(Sn,this)+1;v===h(xn,this)?h(_n,this).splice(0,1):(f(Sn,this,v),v<h(_n,this).length&&h(_n,this).splice(v)),h(_n,this).push(d)}}},{key:"undo",value:function(){if(-1!==h(Sn,this)){f(An,this,!0);var t=h(_n,this)[h(Sn,this)],e=t.undo,n=t.post;e(),null==n||n(),f(An,this,!1),f(Sn,this,h(Sn,this)-1)}}},{key:"redo",value:function(){if(h(Sn,this)<h(_n,this).length-1){f(Sn,this,h(Sn,this)+1),f(An,this,!0);var t=h(_n,this)[h(Sn,this)],e=t.cmd,n=t.post;e(),null==n||n(),f(An,this,!1)}}},{key:"hasSomethingToUndo",value:function(){return-1!==h(Sn,this)}},{key:"hasSomethingToRedo",value:function(){return h(Sn,this)<h(_n,this).length-1}},{key:"cleanType",value:function(t){if(-1!==h(Sn,this)){for(var e=h(Sn,this);e>=0;e--)if(h(_n,this)[e].type!==t)return h(_n,this).splice(e+1,h(Sn,this)-e),void f(Sn,this,e);h(_n,this).length=0,f(Sn,this,-1)}}},{key:"destroy",value:function(){f(_n,this,null)}}])}(),Mn=new WeakSet,Cn=function(){return y(function t(e){c(this,t),p(this,Mn),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var n,i=se.platform.isMac,r=m(e);try{for(r.s();!(n=r.n()).done;){var a,s=P(n.value,3),o=s[0],l=s[1],u=s[2],h=void 0===u?{}:u,d=m(o);try{for(d.s();!(a=d.n()).done;){var f=a.value,v=f.startsWith("mac+");i&&v?(this.callbacks.set(f.slice(4),{callback:l,options:h}),this.allKeys.add(f.split("+").at(-1))):i||v||(this.callbacks.set(f,{callback:l,options:h}),this.allKeys.add(f.split("+").at(-1)))}}catch(t){d.e(t)}finally{d.f()}}}catch(t){r.e(t)}finally{r.f()}},[{key:"exec",value:function(t,e){if(this.allKeys.has(e.key)){var n=this.callbacks.get(i(Mn,this,Rn).call(this,e));if(n){var r=n.callback,a=n.options,s=a.bubbles,o=void 0!==s&&s,l=a.args,u=void 0===l?[]:l,c=a.checker,h=void 0===c?null:c;h&&!h(t,e)||(r.bind.apply(r,[t].concat(O(u),[e]))(),o||Pe(e))}}}}])}();function Rn(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);var e=this.buffer.join("+");return this.buffer.length=0,e}var Tn=function(){function t(){c(this,t)}return y(t,[{key:"_colors",get:function(){var t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){var e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);var n,i=m(t.keys());try{for(i.s();!(n=i.n()).done;){var r=n.value;e.style.color=r;var a=window.getComputedStyle(e).color;t.set(r,Fe(a))}}catch(t){i.e(t)}finally{i.f()}e.remove()}(t),Qt(this,"_colors",t)}},{key:"convert",value:function(e){var n=Fe(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;var i,r=m(this._colors);try{for(r.s();!(i=r.n()).done;){var a=P(i.value,2),s=a[0];if(a[1].every(function(t,e){return t===n[e]}))return t._colorsMapping.get(s)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"getHexCode",value:function(t){var e=this._colors.get(t);return e?le.makeHexColor.apply(le,O(e)):t}}])}();w(Tn,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var In=new WeakMap,Pn=new WeakMap,Dn=new WeakMap,Ln=new WeakMap,On=new WeakMap,Fn=new WeakMap,Nn=new WeakMap,Wn=new WeakMap,Bn=new WeakMap,jn=new WeakMap,zn=new WeakMap,Un=new WeakMap,Hn=new WeakMap,Gn=new WeakMap,Vn=new WeakMap,qn=new WeakMap,Xn=new WeakMap,Yn=new WeakMap,Kn=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,Zn=new WeakMap,$n=new WeakMap,ti=new WeakMap,ei=new WeakMap,ni=new WeakMap,ii=new WeakMap,ri=new WeakMap,ai=new WeakMap,si=new WeakMap,oi=new WeakMap,li=new WeakMap,ui=new WeakMap,ci=new WeakMap,hi=new WeakMap,di=new WeakMap,fi=new WeakMap,vi=new WeakMap,pi=new WeakMap,gi=new WeakMap,yi=new WeakMap,mi=new WeakMap,wi=new WeakMap,bi=new WeakMap,ki=new WeakSet,_i=function(){function t(e,n,r,a,s,o,l,u,v,g,y,m,b,k){var _=this;c(this,t),p(this,ki),d(this,In,new AbortController),d(this,Pn,null),d(this,Dn,new Map),d(this,Ln,new Map),d(this,On,null),d(this,Fn,null),d(this,Nn,null),d(this,Wn,new En),d(this,Bn,null),d(this,jn,null),d(this,zn,0),d(this,Un,new Set),d(this,Hn,null),d(this,Gn,null),d(this,Vn,new Set),w(this,"_editorUndoBar",null),d(this,qn,!1),d(this,Xn,!1),d(this,Yn,!1),d(this,Kn,null),d(this,Qn,null),d(this,Jn,null),d(this,Zn,null),d(this,$n,!1),d(this,ti,null),d(this,ei,new vn),d(this,ni,!1),d(this,ii,!1),d(this,ri,null),d(this,ai,null),d(this,si,null),d(this,oi,null),d(this,li,null),d(this,ui,mt.NONE),d(this,ci,new Set),d(this,hi,null),d(this,di,null),d(this,fi,null),d(this,vi,null),d(this,pi,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),d(this,gi,[0,0]),d(this,yi,null),d(this,mi,null),d(this,wi,null),d(this,bi,null);var A=this._signal=h(In,this).signal;f(mi,this,e),f(wi,this,n),f(On,this,r),f(di,this,a),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:A}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),s._on("setpreference",this.onSetPreference.bind(this),{signal:A}),s._on("switchannotationeditorparams",function(t){return _.updateParams(t.type,t.value)},{signal:A}),i(ki,this,Ci).call(this),i(ki,this,Oi).call(this),i(ki,this,Ii).call(this),f(Fn,this,o.annotationStorage),f(Kn,this,o.filterFactory),f(fi,this,l),f(Zn,this,u||null),f(qn,this,v),f(Xn,this,g),f(Yn,this,y),f(li,this,m||null),this.viewParameters={realScale:be.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=b||null,this._supportsPinchToZoom=!1!==k}return y(t,[{key:"destroy",value:function(){var t,e,n,i,r,a,s,o;null===(t=h(bi,this))||void 0===t||t.resolve(),f(bi,this,null),null===(e=h(In,this))||void 0===e||e.abort(),f(In,this,null),this._signal=null;var l,u=m(h(Ln,this).values());try{for(u.s();!(l=u.n()).done;){l.value.destroy()}}catch(t){u.e(t)}finally{u.f()}h(Ln,this).clear(),h(Dn,this).clear(),h(Vn,this).clear(),null===(n=h(oi,this))||void 0===n||n.clear(),f(Pn,this,null),h(ci,this).clear(),h(Wn,this).destroy(),null===(i=h(On,this))||void 0===i||i.destroy(),null===(r=h(di,this))||void 0===r||r.destroy(),null===(a=h(ti,this))||void 0===a||a.hide(),f(ti,this,null),null===(s=h(si,this))||void 0===s||s.destroy(),f(si,this,null),h(Qn,this)&&(clearTimeout(h(Qn,this)),f(Qn,this,null)),h(yi,this)&&(clearTimeout(h(yi,this)),f(yi,this,null)),null===(o=this._editorUndoBar)||void 0===o||o.destroy()}},{key:"combinedSignal",value:function(t){return AbortSignal.any([this._signal,t.signal])}},{key:"mlManager",get:function(){return h(li,this)}},{key:"useNewAltTextFlow",get:function(){return h(Xn,this)}},{key:"useNewAltTextWhenAddingImage",get:function(){return h(Yn,this)}},{key:"hcmFilter",get:function(){return Qt(this,"hcmFilter",h(fi,this)?h(Kn,this).addHCMFilter(h(fi,this).foreground,h(fi,this).background):"none")}},{key:"direction",get:function(){return Qt(this,"direction",getComputedStyle(h(mi,this)).direction)}},{key:"highlightColors",get:function(){return Qt(this,"highlightColors",h(Zn,this)?new Map(h(Zn,this).split(",").map(function(t){return t.split("=").map(function(t){return t.trim()})})):null)}},{key:"highlightColorNames",get:function(){return Qt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,function(t){return t.reverse()})):null)}},{key:"setCurrentDrawingSession",value:function(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),f(jn,this,t)}},{key:"setMainHighlightColorPicker",value:function(t){f(si,this,t)}},{key:"editAltText",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(e=h(On,this))||void 0===e||e.editAltText(this,t,n)}},{key:"getSignature",value:function(t){var e;null===(e=h(di,this))||void 0===e||e.getSignature({uiManager:this,editor:t})}},{key:"signatureManager",get:function(){return h(di,this)}},{key:"switchToMode",value:function(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}},{key:"setPreference",value:function(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}},{key:"onSetPreference",value:function(t){var e=t.name,n=t.value;if("enableNewAltTextWhenAddingImage"===e)f(Yn,this,n)}},{key:"onPageChanging",value:function(t){var e=t.pageNumber;f(zn,this,e-1)}},{key:"focusMainContainer",value:function(){h(mi,this).focus()}},{key:"findParent",value:function(t,e){var n,i=m(h(Ln,this).values());try{for(i.s();!(n=i.n()).done;){var r=n.value,a=r.div.getBoundingClientRect(),s=a.x,o=a.y,l=a.width,u=a.height;if(t>=s&&t<=s+l&&e>=o&&e<=o+u)return r}}catch(t){i.e(t)}finally{i.f()}return null}},{key:"disableUserSelect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h(wi,this).classList.toggle("noUserSelect",t)}},{key:"addShouldRescale",value:function(t){h(Vn,this).add(t)}},{key:"removeShouldRescale",value:function(t){h(Vn,this).delete(t)}},{key:"onScaleChanging",value:function(t){var e,n=t.scale;this.commitOrRemove(),this.viewParameters.realScale=n*be.PDF_TO_CSS_UNITS;var i,r=m(h(Vn,this));try{for(r.s();!(i=r.n()).done;){i.value.onScaleChanging()}}catch(t){r.e(t)}finally{r.f()}null===(e=h(jn,this))||void 0===e||e.onScaleChanging()}},{key:"onRotationChanging",value:function(t){var e=t.pagesRotation;this.commitOrRemove(),this.viewParameters.rotation=e}},{key:"highlightSelection",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=document.getSelection();if(n&&!n.isCollapsed){var r=n.anchorNode,a=n.anchorOffset,s=n.focusNode,o=n.focusOffset,l=n.toString(),u=i(ki,this,Ai).call(this,n).closest(".textLayer"),c=this.getSelectionBoxes(u);if(c){n.empty();var d=i(ki,this,xi).call(this,u),f=h(ui,this)===mt.NONE,v=function(){null==d||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:r,anchorOffset:a,focusNode:s,focusOffset:o,text:l}),f&&t.showAllEditors("highlight",!0,!0)};f?this.switchToMode(mt.HIGHLIGHT,v):v()}}}},{key:"addToAnnotationStorage",value:function(t){t.isEmpty()||!h(Fn,this)||h(Fn,this).has(t.id)||h(Fn,this).setValue(t.id,t)}},{key:"blur",value:function(){if(this.isShiftKeyDown=!1,h($n,this)&&(f($n,this,!1),i(ki,this,Mi).call(this,"main_toolbar")),this.hasSelection){var t,e=document.activeElement,n=m(h(ci,this));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.div.contains(e)){f(ai,this,[r,e]),r._focusEventsAllowed=!1;break}}}catch(t){n.e(t)}finally{n.f()}}}},{key:"focus",value:function(){if(h(ai,this)){var t=P(h(ai,this),2),e=t[0],n=t[1];f(ai,this,null),n.addEventListener("focusin",function(){e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}}},{key:"addEditListeners",value:function(){i(ki,this,Ii).call(this),i(ki,this,Di).call(this)}},{key:"removeEditListeners",value:function(){i(ki,this,Pi).call(this),i(ki,this,Li).call(this)}},{key:"dragOver",value:function(t){var e,n=m(t.dataTransfer.items);try{for(n.s();!(e=n.n()).done;){var i,r=e.value.type,a=m(h(Gn,this));try{for(a.s();!(i=a.n()).done;){if(i.value.isHandlingMimeForPasting(r))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}}catch(t){a.e(t)}finally{a.f()}}}catch(t){n.e(t)}finally{n.f()}}},{key:"drop",value:function(t){var e,n=m(t.dataTransfer.items);try{for(n.s();!(e=n.n()).done;){var i,r=e.value,a=m(h(Gn,this));try{for(a.s();!(i=a.n()).done;){var s=i.value;if(s.isHandlingMimeForPasting(r.type))return s.paste(r,this.currentLayer),void t.preventDefault()}}catch(t){a.e(t)}finally{a.f()}}}catch(t){n.e(t)}finally{n.f()}}},{key:"copy",value:function(t){var e;if(t.preventDefault(),null===(e=h(Pn,this))||void 0===e||e.commitOrRemove(),this.hasSelection){var n,i=[],r=m(h(ci,this));try{for(r.s();!(n=r.n()).done;){var a=n.value.serialize(!0);a&&i.push(a)}}catch(t){r.e(t)}finally{r.f()}0!==i.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}}},{key:"cut",value:function(t){this.copy(t),this.delete()}},{key:"paste",value:(n=o(C().m(function t(e){var n,r,a,s,o,l,u,c,d,f,v,p,g,y,w,b,k,_,A,x,S,E=this;return C().w(function(t){for(;;)switch(t.p=t.n){case 0:e.preventDefault(),n=e.clipboardData,r=m(n.items),t.p=1,r.s();case 2:if((a=r.n()).done){t.n=10;break}s=a.value,o=m(h(Gn,this)),t.p=3,o.s();case 4:if((l=o.n()).done){t.n=6;break}if(!(u=l.value).isHandlingMimeForPasting(s.type)){t.n=5;break}return u.paste(s,this.currentLayer),t.a(2);case 5:t.n=4;break;case 6:t.n=8;break;case 7:t.p=7,k=t.v,o.e(k);case 8:return t.p=8,o.f(),t.f(8);case 9:t.n=2;break;case 10:t.n=12;break;case 11:t.p=11,_=t.v,r.e(_);case 12:return t.p=12,r.f(),t.f(12);case 13:if(c=n.getData("application/pdfjs")){t.n=14;break}return t.a(2);case 14:t.p=14,c=JSON.parse(c),t.n=16;break;case 15:return t.p=15,A=t.v,Vt('paste: "'.concat(A.message,'".')),t.a(2);case 16:if(Array.isArray(c)){t.n=17;break}return t.a(2);case 17:this.unselectAll(),d=this.currentLayer,t.p=18,f=[],v=m(c),t.p=19,v.s();case 20:if((p=v.n()).done){t.n=24;break}return g=p.value,t.n=21,d.deserialize(g);case 21:if(y=t.v){t.n=22;break}return t.a(2);case 22:f.push(y);case 23:t.n=20;break;case 24:t.n=26;break;case 25:t.p=25,x=t.v,v.e(x);case 26:return t.p=26,v.f(),t.f(26);case 27:w=function(){for(var t=0,e=f;t<e.length;t++){var n=e[t];i(ki,E,zi).call(E,n)}i(ki,E,Gi).call(E,f)},b=function(){for(var t=0,e=f;t<e.length;t++)e[t].remove()},this.addCommands({cmd:w,undo:b,mustExec:!0}),t.n=29;break;case 28:t.p=28,S=t.v,Vt('paste: "'.concat(S.message,'".'));case 29:return t.a(2)}},t,this,[[19,25,26,27],[18,28],[14,15],[3,7,8,9],[1,11,12,13]])})),function(t){return n.apply(this,arguments)})},{key:"keydown",value:function(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),h(ui,this)===mt.NONE||this.isEditorHandlingKeyboard||t._keyboardManager.exec(this,e)}},{key:"keyup",value:function(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,h($n,this)&&(f($n,this,!1),i(ki,this,Mi).call(this,"main_toolbar")))}},{key:"onEditingAction",value:function(t){var e=t.name;switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu")}}},{key:"setEditingState",value:function(t){t?(i(ki,this,Ri).call(this),i(ki,this,Di).call(this),i(ki,this,Fi).call(this,{isEditing:h(ui,this)!==mt.NONE,isEmpty:i(ki,this,Hi).call(this),hasSomethingToUndo:h(Wn,this).hasSomethingToUndo(),hasSomethingToRedo:h(Wn,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(i(ki,this,Ti).call(this),i(ki,this,Li).call(this),i(ki,this,Fi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}},{key:"registerEditorTypes",value:function(t){if(!h(Gn,this)){f(Gn,this,t);var e,n=m(h(Gn,this));try{for(n.s();!(e=n.n()).done;){var r=e.value;i(ki,this,Ni).call(this,r.defaultPropertiesToUpdate)}}catch(t){n.e(t)}finally{n.f()}}}},{key:"getId",value:function(){return h(ei,this).id}},{key:"currentLayer",get:function(){return h(Ln,this).get(h(zn,this))}},{key:"getLayer",value:function(t){return h(Ln,this).get(t)}},{key:"currentPageIndex",get:function(){return h(zn,this)}},{key:"addLayer",value:function(t){h(Ln,this).set(t.pageIndex,t),h(ni,this)?t.enable():t.disable()}},{key:"removeLayer",value:function(t){h(Ln,this).delete(t.pageIndex)}},{key:"updateMode",value:(e=o(C().m(function t(e){var n,r,a,s,o,l,u,c,d,v,p=arguments;return C().w(function(t){for(;;)switch(t.n){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:null,a=p.length>2&&void 0!==p[2]&&p[2],h(ui,this)!==e){t.n=1;break}return t.a(2);case 1:if(!h(bi,this)){t.n=3;break}return t.n=2,h(bi,this).promise;case 2:if(h(bi,this)){t.n=3;break}return t.a(2);case 3:if(f(bi,this,Promise.withResolvers()),null===(n=h(jn,this))||void 0===n||n.commitOrRemove(),f(ui,this,e),e!==mt.NONE){t.n=4;break}return this.setEditingState(!1),i(ki,this,ji).call(this),null===(s=this._editorUndoBar)||void 0===s||s.hide(),h(bi,this).resolve(),t.a(2);case 4:if(e!==mt.SIGNATURE){t.n=5;break}return t.n=5,null===(o=h(di,this))||void 0===o?void 0:o.loadSignatures();case 5:return this.setEditingState(!0),t.n=6,i(ki,this,Wi).call(this);case 6:this.unselectAll(),l=m(h(Ln,this).values());try{for(l.s();!(u=l.n()).done;)u.value.updateMode(e)}catch(t){l.e(t)}finally{l.f()}if(r){t.n=7;break}return a&&this.addNewEditorFromKeyboard(),h(bi,this).resolve(),t.a(2);case 7:c=m(h(Dn,this).values());try{for(c.s();!(d=c.n()).done;)(v=d.value).annotationElementId===r||v.id===r?(this.setSelected(v),v.enterInEditMode()):v.unselect()}catch(t){c.e(t)}finally{c.f()}h(bi,this).resolve();case 8:return t.a(2)}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"addNewEditorFromKeyboard",value:function(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}},{key:"updateToolbar",value:function(t){t.mode!==h(ui,this)&&this._eventBus.dispatch("switchannotationeditormode",M({source:this},t))}},{key:"updateParams",value:function(t,e){var n;if(h(Gn,this)){switch(t){case wt.CREATE:return void this.currentLayer.addNewEditor(e);case wt.HIGHLIGHT_DEFAULT_COLOR:null===(n=h(si,this))||void 0===n||n.updateColor(e);break;case wt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(h(vi,this)||f(vi,this,new Map)).set(t,e),this.showAllEditors("highlight",e)}var i,r=m(h(ci,this));try{for(r.s();!(i=r.n()).done;){i.value.updateParams(t,e)}}catch(t){r.e(t)}finally{r.f()}var a,s=m(h(Gn,this));try{for(s.s();!(a=s.n()).done;){a.value.updateDefaultParams(t,e)}}catch(t){s.e(t)}finally{s.f()}}}},{key:"showAllEditors",value:function(t,e){var n,r,a,s=m(h(Dn,this).values());try{for(s.s();!(a=s.n()).done;){var o=a.value;o.editorType===t&&o.show(e)}}catch(t){s.e(t)}finally{s.f()}(null===(n=null===(r=h(vi,this))||void 0===r?void 0:r.get(wt.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==e&&i(ki,this,Ni).call(this,[[wt.HIGHLIGHT_SHOW_ALL,e]])}},{key:"enableWaiting",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(h(ii,this)!==t){f(ii,this,t);var e,n=m(h(Ln,this).values());try{for(n.s();!(e=n.n()).done;){var i=e.value;t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}catch(t){n.e(t)}finally{n.f()}}}},{key:"getEditors",value:function(t){var e,n=[],i=m(h(Dn,this).values());try{for(i.s();!(e=i.n()).done;){var r=e.value;r.pageIndex===t&&n.push(r)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"getEditor",value:function(t){return h(Dn,this).get(t)}},{key:"addEditor",value:function(t){h(Dn,this).set(t.id,t)}},{key:"removeEditor",value:function(t){var e,n,i=this;(t.div.contains(document.activeElement)&&(h(Qn,this)&&clearTimeout(h(Qn,this)),f(Qn,this,setTimeout(function(){i.focusMainContainer(),f(Qn,i,null)},0))),h(Dn,this).delete(t.id),t.annotationElementId)&&(null===(e=h(oi,this))||void 0===e||e.delete(t.annotationElementId));(this.unselect(t),t.annotationElementId&&h(Un,this).has(t.annotationElementId))||(null===(n=h(Fn,this))||void 0===n||n.remove(t.id))}},{key:"addDeletedAnnotationElement",value:function(t){h(Un,this).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}},{key:"isDeletedAnnotationElement",value:function(t){return h(Un,this).has(t)}},{key:"removeDeletedAnnotationElement",value:function(t){h(Un,this).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}},{key:"setActiveEditor",value:function(t){h(Pn,this)!==t&&(f(Pn,this,t),t&&i(ki,this,Ni).call(this,t.propertiesToUpdate))}},{key:"updateUI",value:function(t){v(ki,this,Ui)===t&&i(ki,this,Ni).call(this,t.propertiesToUpdate)}},{key:"updateUIForDefaultProperties",value:function(t){i(ki,this,Ni).call(this,t.defaultPropertiesToUpdate)}},{key:"toggleSelected",value:function(t){if(h(ci,this).has(t))return h(ci,this).delete(t),t.unselect(),void i(ki,this,Fi).call(this,{hasSelectedEditor:this.hasSelection});h(ci,this).add(t),t.select(),i(ki,this,Ni).call(this,t.propertiesToUpdate),i(ki,this,Fi).call(this,{hasSelectedEditor:!0})}},{key:"setSelected",value:function(t){var e;null===(e=h(jn,this))||void 0===e||e.commitOrRemove();var n,r=m(h(ci,this));try{for(r.s();!(n=r.n()).done;){var a=n.value;a!==t&&a.unselect()}}catch(t){r.e(t)}finally{r.f()}h(ci,this).clear(),h(ci,this).add(t),t.select(),i(ki,this,Ni).call(this,t.propertiesToUpdate),i(ki,this,Fi).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function(t){return h(ci,this).has(t)}},{key:"firstSelectedEditor",get:function(){return h(ci,this).values().next().value}},{key:"unselect",value:function(t){t.unselect(),h(ci,this).delete(t),i(ki,this,Fi).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function(){return 0!==h(ci,this).size}},{key:"isEnterHandled",get:function(){return 1===h(ci,this).size&&this.firstSelectedEditor.isEnterHandled}},{key:"undo",value:function(){var t;h(Wn,this).undo(),i(ki,this,Fi).call(this,{hasSomethingToUndo:h(Wn,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:i(ki,this,Hi).call(this)}),null===(t=this._editorUndoBar)||void 0===t||t.hide()}},{key:"redo",value:function(){h(Wn,this).redo(),i(ki,this,Fi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:h(Wn,this).hasSomethingToRedo(),isEmpty:i(ki,this,Hi).call(this)})}},{key:"addCommands",value:function(t){h(Wn,this).add(t),i(ki,this,Fi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:i(ki,this,Hi).call(this)})}},{key:"cleanUndoStack",value:function(t){h(Wn,this).cleanType(t)}},{key:"delete",value:function(){var t,e=this;this.commitOrRemove();var n=null===(t=this.currentLayer)||void 0===t?void 0:t.endDrawingSession(!0);if(this.hasSelection||n){var r=n?[n]:O(h(ci,this)),a=function(){var t,n=m(r);try{for(n.s();!(t=n.n()).done;){var a=t.value;i(ki,e,zi).call(e,a)}}catch(t){n.e(t)}finally{n.f()}};this.addCommands({cmd:function(){var t;null===(t=e._editorUndoBar)||void 0===t||t.show(a,1===r.length?r[0].editorType:r.length);var n,i=m(r);try{for(i.s();!(n=i.n()).done;){n.value.remove()}}catch(t){i.e(t)}finally{i.f()}},undo:a,mustExec:!0})}}},{key:"commitOrRemove",value:function(){var t;null===(t=h(Pn,this))||void 0===t||t.commitOrRemove()}},{key:"hasSomethingToControl",value:function(){return h(Pn,this)||this.hasSelection}},{key:"selectAll",value:function(){var t,e=m(h(ci,this));try{for(e.s();!(t=e.n()).done;){t.value.commit()}}catch(t){e.e(t)}finally{e.f()}i(ki,this,Gi).call(this,h(Dn,this).values())}},{key:"unselectAll",value:function(){var t;if((!h(Pn,this)||(h(Pn,this).commitOrRemove(),h(ui,this)===mt.NONE))&&(null===(t=h(jn,this))||void 0===t||!t.commitOrRemove())&&this.hasSelection){var e,n=m(h(ci,this));try{for(n.s();!(e=n.n()).done;){e.value.unselect()}}catch(t){n.e(t)}finally{n.f()}h(ci,this).clear(),i(ki,this,Fi).call(this,{hasSelectedEditor:!1})}}},{key:"translateSelectedEditors",value:function(t,e){var n=this;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),this.hasSelection){h(gi,this)[0]+=t,h(gi,this)[1]+=e;var i=P(h(gi,this),2),r=i[0],a=i[1],s=O(h(ci,this));h(yi,this)&&clearTimeout(h(yi,this)),f(yi,this,setTimeout(function(){f(yi,n,null),h(gi,n)[0]=h(gi,n)[1]=0,n.addCommands({cmd:function(){var t,e=m(s);try{for(e.s();!(t=e.n()).done;){var i=t.value;h(Dn,n).has(i.id)&&(i.translateInPage(r,a),i.translationDone())}}catch(t){e.e(t)}finally{e.f()}},undo:function(){var t,e=m(s);try{for(e.s();!(t=e.n()).done;){var i=t.value;h(Dn,n).has(i.id)&&(i.translateInPage(-r,-a),i.translationDone())}}catch(t){e.e(t)}finally{e.f()}},mustExec:!1})},1e3));var o,l=m(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;u.translateInPage(t,e),u.translationDone()}}catch(t){l.e(t)}finally{l.f()}}}},{key:"setUpDragSession",value:function(){if(this.hasSelection){this.disableUserSelect(!0),f(Hn,this,new Map);var t,e=m(h(ci,this));try{for(e.s();!(t=e.n()).done;){var n=t.value;h(Hn,this).set(n,{savedX:n.x,savedY:n.y,savedPageIndex:n.pageIndex,newX:0,newY:0,newPageIndex:-1})}}catch(t){e.e(t)}finally{e.f()}}}},{key:"endDragSession",value:function(){var t=this;if(!h(Hn,this))return!1;this.disableUserSelect(!1);var e=h(Hn,this);f(Hn,this,null);var n,i=!1,r=m(e);try{for(r.s();!(n=r.n()).done;){var a=P(n.value,2),s=a[0],o=s.x,l=s.y,u=s.pageIndex,c=a[1];c.newX=o,c.newY=l,c.newPageIndex=u,i||(i=o!==c.savedX||l!==c.savedY||u!==c.savedPageIndex)}}catch(t){r.e(t)}finally{r.f()}if(!i)return!1;var d=function(e,n,i,r){if(h(Dn,t).has(e.id)){var a=h(Ln,t).get(r);a?e._setParentAndPosition(a,n,i):(e.pageIndex=r,e.x=n,e.y=i)}};return this.addCommands({cmd:function(){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var i=P(t.value,2),r=i[0],a=i[1],s=a.newX,o=a.newY,l=a.newPageIndex;d(r,s,o,l)}}catch(t){n.e(t)}finally{n.f()}},undo:function(){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var i=P(t.value,2),r=i[0],a=i[1],s=a.savedX,o=a.savedY,l=a.savedPageIndex;d(r,s,o,l)}}catch(t){n.e(t)}finally{n.f()}},mustExec:!0}),!0}},{key:"dragSelectedEditors",value:function(t,e){if(h(Hn,this)){var n,i=m(h(Hn,this).keys());try{for(i.s();!(n=i.n()).done;){n.value.drag(t,e)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"rebuild",value:function(t){if(null===t.parent){var e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}},{key:"isEditorHandlingKeyboard",get:function(){var t;return(null===(t=this.getActive())||void 0===t?void 0:t.shouldGetKeyboardEvents())||1===h(ci,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}},{key:"isActive",value:function(t){return h(Pn,this)===t}},{key:"getActive",value:function(){return h(Pn,this)}},{key:"getMode",value:function(){return h(ui,this)}},{key:"imageManager",get:function(){return Qt(this,"imageManager",new wn)}},{key:"getSelectionBoxes",value:function(t){if(!t)return null;for(var e=document.getSelection(),n=0,i=e.rangeCount;n<i;n++)if(!t.contains(e.getRangeAt(n).commonAncestorContainer))return null;var r,a=t.getBoundingClientRect(),s=a.x,o=a.y,l=a.width,u=a.height;switch(t.getAttribute("data-main-rotation")){case"90":r=function(t,e,n,i){return{x:(e-o)/u,y:1-(t+n-s)/l,width:i/u,height:n/l}};break;case"180":r=function(t,e,n,i){return{x:1-(t+n-s)/l,y:1-(e+i-o)/u,width:n/l,height:i/u}};break;case"270":r=function(t,e,n,i){return{x:1-(e+i-o)/u,y:(t-s)/l,width:i/u,height:n/l}};break;default:r=function(t,e,n,i){return{x:(t-s)/l,y:(e-o)/u,width:n/l,height:i/u}}}for(var c=[],h=0,d=e.rangeCount;h<d;h++){var f=e.getRangeAt(h);if(!f.collapsed){var v,p=m(f.getClientRects());try{for(p.s();!(v=p.n()).done;){var g=v.value,y=g.x,w=g.y,b=g.width,k=g.height;0!==b&&0!==k&&c.push(r(y,w,b,k))}}catch(t){p.e(t)}finally{p.f()}}}return 0===c.length?null:c}},{key:"addChangedExistingAnnotation",value:function(t){var e=t.annotationElementId,n=t.id;(h(Nn,this)||f(Nn,this,new Map)).set(e,n)}},{key:"removeChangedExistingAnnotation",value:function(t){var e,n=t.annotationElementId;null===(e=h(Nn,this))||void 0===e||e.delete(n)}},{key:"renderAnnotationElement",value:function(t){var e,n=null===(e=h(Nn,this))||void 0===e?void 0:e.get(t.data.id);if(n){var i=h(Fn,this).getRawValue(n);i&&(h(ui,this)!==mt.NONE||i.hasBeenModified)&&i.renderAnnotationElement(t)}}},{key:"setMissingCanvas",value:function(t,e,n){var i,r=null===(i=h(oi,this))||void 0===i?void 0:i.get(t);r&&(r.setCanvas(e,n),h(oi,this).delete(t))}},{key:"addMissingCanvas",value:function(t,e){(h(oi,this)||f(oi,this,new Map)).set(t,e)}}],[{key:"_keyboardManager",get:function(){var e=t.prototype,n=function(t){return h(mi,t).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl()},i=function(t,e){var n=e.target;if(n instanceof HTMLInputElement){var i=n.type;return"text"!==i&&"number"!==i}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Qt(this,"_keyboardManager",new Cn([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:function(t,e){var n=e.target;return!(n instanceof HTMLButtonElement)&&h(mi,t).contains(n)&&!t.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:function(t,e){return!(e.target instanceof HTMLButtonElement)&&h(mi,t).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:n}]]))}}]);var e,n}();function Ai(t){var e=t.anchorNode;return e.nodeType===Node.TEXT_NODE?e.parentElement:e}function xi(t){var e=this.currentLayer;if(e.hasTextLayer(t))return e;var n,i=m(h(Ln,this).values());try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.hasTextLayer(t))return r}}catch(t){i.e(t)}finally{i.f()}return null}function Si(){var t=document.getSelection();if(t&&!t.isCollapsed){var e=i(ki,this,Ai).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(e);n&&(h(ti,this)||f(ti,this,new ln(this)),h(ti,this).show(e,n,"ltr"===this.direction))}}function Ei(){var t,e=this,n=document.getSelection();if(n&&!n.isCollapsed){var r=n.anchorNode;if(r!==h(hi,this)){var a,s=i(ki,this,Ai).call(this,n).closest(".textLayer");if(s){if(null===(t=h(ti,this))||void 0===t||t.hide(),f(hi,this,r),i(ki,this,Fi).call(this,{hasSelectedText:!0}),(h(ui,this)===mt.HIGHLIGHT||h(ui,this)===mt.NONE)&&(h(ui,this)===mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),f($n,this,this.isShiftKeyDown),!this.isShiftKeyDown)){var o=h(ui,this)===mt.HIGHLIGHT?i(ki,this,xi).call(this,s):null;null==o||o.toggleDrawing();var l=new AbortController,u=this.combinedSignal(l),c=function(t){"pointerup"===t.type&&0!==t.button||(l.abort(),null==o||o.toggleDrawing(!0),"pointerup"===t.type&&i(ki,e,Mi).call(e,"main_toolbar"))};window.addEventListener("pointerup",c,{signal:u}),window.addEventListener("blur",c,{signal:u})}}else h(hi,this)&&(null===(a=h(ti,this))||void 0===a||a.hide(),f(hi,this,null),i(ki,this,Fi).call(this,{hasSelectedText:!1}))}}else{var d;h(hi,this)&&(null===(d=h(ti,this))||void 0===d||d.hide(),f(hi,this,null),i(ki,this,Fi).call(this,{hasSelectedText:!1}))}}function Mi(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";h(ui,this)===mt.HIGHLIGHT?this.highlightSelection(t):h(qn,this)&&i(ki,this,Si).call(this)}function Ci(){document.addEventListener("selectionchange",i(ki,this,Ei).bind(this),{signal:this._signal})}function Ri(){if(!h(Jn,this)){f(Jn,this,new AbortController);var t=this.combinedSignal(h(Jn,this));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}}function Ti(){var t;null===(t=h(Jn,this))||void 0===t||t.abort(),f(Jn,this,null)}function Ii(){if(!h(ri,this)){f(ri,this,new AbortController);var t=this.combinedSignal(h(ri,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}}function Pi(){var t;null===(t=h(ri,this))||void 0===t||t.abort(),f(ri,this,null)}function Di(){if(!h(Bn,this)){f(Bn,this,new AbortController);var t=this.combinedSignal(h(Bn,this));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}}function Li(){var t;null===(t=h(Bn,this))||void 0===t||t.abort(),f(Bn,this,null)}function Oi(){var t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}function Fi(t){var e=this;Object.entries(t).some(function(t){var n=P(t,2),i=n[0],r=n[1];return h(pi,e)[i]!==r})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(h(pi,this),t)}),h(ui,this)===mt.HIGHLIGHT&&!1===t.hasSelectedEditor&&i(ki,this,Ni).call(this,[[wt.HIGHLIGHT_FREE,!0]]))}function Ni(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}function Wi(){return Bi.apply(this,arguments)}function Bi(){return(Bi=o(C().m(function t(){var e,n,i,r,a,s;return C().w(function(t){for(;;)switch(t.n){case 0:if(h(ni,this)){t.n=2;break}f(ni,this,!0),e=[],n=m(h(Ln,this).values());try{for(n.s();!(i=n.n()).done;)r=i.value,e.push(r.enable())}catch(t){n.e(t)}finally{n.f()}return t.n=1,Promise.all(e);case 1:a=m(h(Dn,this).values());try{for(a.s();!(s=a.n()).done;)s.value.enable()}catch(t){a.e(t)}finally{a.f()}case 2:return t.a(2)}},t,this)}))).apply(this,arguments)}function ji(){if(this.unselectAll(),h(ni,this)){f(ni,this,!1);var t,e=m(h(Ln,this).values());try{for(e.s();!(t=e.n()).done;){t.value.disable()}}catch(t){e.e(t)}finally{e.f()}var n,i=m(h(Dn,this).values());try{for(i.s();!(n=i.n()).done;){n.value.disable()}}catch(t){i.e(t)}finally{i.f()}}}function zi(t){var e=h(Ln,this).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}function Ui(t){var e,n=null,i=m(h(ci,t));try{for(i.s();!(e=i.n()).done;)n=e.value}catch(t){i.e(t)}finally{i.f()}return n}function Hi(){if(0===h(Dn,this).size)return!0;if(1===h(Dn,this).size){var t,e=m(h(Dn,this).values());try{for(e.s();!(t=e.n()).done;){return t.value.isEmpty()}}catch(t){e.e(t)}finally{e.f()}}return!1}function Gi(t){var e,n=m(h(ci,this));try{for(n.s();!(e=n.n()).done;){e.value.unselect()}}catch(t){n.e(t)}finally{n.f()}h(ci,this).clear();var r,a=m(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;s.isEmpty()||(h(ci,this).add(s),s.select())}}catch(t){a.e(t)}finally{a.f()}i(ki,this,Fi).call(this,{hasSelectedEditor:this.hasSelection})}w(_i,"TRANSLATE_SMALL",1),w(_i,"TRANSLATE_BIG",10);var Vi=new WeakMap,qi=new WeakMap,Xi=new WeakMap,Yi=new WeakMap,Ki=new WeakMap,Qi=new WeakMap,Ji=new WeakMap,Zi=new WeakMap,$i=new WeakMap,tr=new WeakMap,er=new WeakMap,nr=new WeakMap,ir=new WeakSet,rr=function(){function t(e){c(this,t),p(this,ir),d(this,Vi,null),d(this,qi,!1),d(this,Xi,null),d(this,Yi,null),d(this,Ki,null),d(this,Qi,null),d(this,Ji,!1),d(this,Zi,null),d(this,$i,null),d(this,tr,null),d(this,er,null),d(this,nr,!1),f($i,this,e),f(nr,this,e._uiManager.useNewAltTextFlow),lr._||(lr._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}return y(t,[{key:"render",value:(n=o(C().m(function t(){var e,n,r,a,s=this;return C().w(function(t){for(;;)switch(t.n){case 0:return(e=f(Xi,this,document.createElement("button"))).className="altText",e.tabIndex="0",n=f(Yi,this,document.createElement("span")),e.append(n),h(nr,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",lr._.missing),n.setAttribute("data-l10n-id",lr._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label")),r=h($i,this)._uiManager._signal,e.addEventListener("contextmenu",Ie,{signal:r}),e.addEventListener("pointerdown",function(t){return t.stopPropagation()},{signal:r}),a=function(t){t.preventDefault(),h($i,s)._uiManager.editAltText(h($i,s)),h(nr,s)&&h($i,s)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:v(ir,s,ar)}})},e.addEventListener("click",a,{capture:!0,signal:r}),e.addEventListener("keydown",function(t){t.target===e&&"Enter"===t.key&&(f(Ji,s,!0),a(t))},{signal:r}),t.n=1,i(ir,this,sr).call(this);case 1:return t.a(2,e)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"finish",value:function(){h(Xi,this)&&(h(Xi,this).focus({focusVisible:h(Ji,this)}),f(Ji,this,!1))}},{key:"isEmpty",value:function(){return h(nr,this)?null===h(Vi,this):!h(Vi,this)&&!h(qi,this)}},{key:"hasData",value:function(){return h(nr,this)?null!==h(Vi,this)||!!h(tr,this):this.isEmpty()}},{key:"guessedText",get:function(){return h(tr,this)}},{key:"setGuessedText",value:(e=o(C().m(function e(n){var r,a,s,o;return C().w(function(e){for(;;)switch(e.n){case 0:if(null===h(Vi,this)){e.n=1;break}return e.a(2);case 1:return f(tr,this,n),r=f,a=er,s=this,e.n=2,t._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:n});case 2:o=e.v,r(a,s,o),i(ir,this,sr).call(this);case 3:return e.a(2)}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"toggleAltTextBadge",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!h(nr,this)||h(Vi,this))return null===(t=h(Zi,this))||void 0===t||t.remove(),void f(Zi,this,null);if(!h(Zi,this)){var n=f(Zi,this,document.createElement("div"));n.className="noAltTextBadge",h($i,this).div.append(n)}h(Zi,this).classList.toggle("hidden",!e)}},{key:"serialize",value:function(t){var e=h(Vi,this);return t||h(tr,this)!==e||(e=h(er,this)),{altText:e,decorative:h(qi,this),guessedText:h(tr,this),textWithDisclaimer:h(er,this)}}},{key:"data",get:function(){return{altText:h(Vi,this),decorative:h(qi,this)}},set:function(t){var e=t.altText,n=t.decorative,r=t.guessedText,a=t.textWithDisclaimer,s=t.cancel,o=void 0!==s&&s;r&&(f(tr,this,r),f(er,this,a)),h(Vi,this)===e&&h(qi,this)===n||(o||(f(Vi,this,e),f(qi,this,n)),i(ir,this,sr).call(this))}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h(Xi,this)&&(!t&&h(Qi,this)&&(clearTimeout(h(Qi,this)),f(Qi,this,null)),h(Xi,this).disabled=!t)}},{key:"shown",value:function(){h($i,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:v(ir,this,ar)}})}},{key:"destroy",value:function(){var t,e;null===(t=h(Xi,this))||void 0===t||t.remove(),f(Xi,this,null),f(Yi,this,null),f(Ki,this,null),null===(e=h(Zi,this))||void 0===e||e.remove(),f(Zi,this,null)}}],[{key:"initialize",value:function(e){var n;null!==(n=t._l10n)&&void 0!==n||(t._l10n=e)}}]);var e,n}();function ar(t){return(h(Vi,t)?"added":null===h(Vi,t)&&t.guessedText&&"review")||"missing"}function sr(){return or.apply(this,arguments)}function or(){return(or=o(C().m(function t(){var e,n,i,r,a,s,o,l=this;return C().w(function(t){for(;;)switch(t.n){case 0:if(e=h(Xi,this)){t.n=1;break}return t.a(2);case 1:if(!h(nr,this)){t.n=3;break}if(e.classList.toggle("done",!!h(Vi,this)),e.setAttribute("data-l10n-id",lr._[v(ir,this,ar)]),null===(n=h(Yi,this))||void 0===n||n.setAttribute("data-l10n-id",lr._["".concat(v(ir,this,ar),"-label")]),h(Vi,this)){t.n=2;break}return null===(i=h(Ki,this))||void 0===i||i.remove(),t.a(2);case 2:t.n=5;break;case 3:if(h(Vi,this)||h(qi,this)){t.n=4;break}return e.classList.remove("done"),null===(r=h(Ki,this))||void 0===r||r.remove(),t.a(2);case 4:e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button");case 5:(a=h(Ki,this))||(f(Ki,this,a=document.createElement("span")),a.className="tooltip",a.setAttribute("role","tooltip"),a.id="alt-text-tooltip-".concat(h($i,this).id),(s=h($i,this)._uiManager._signal).addEventListener("abort",function(){clearTimeout(h(Qi,l)),f(Qi,l,null)},{once:!0}),e.addEventListener("mouseenter",function(){f(Qi,l,setTimeout(function(){f(Qi,l,null),h(Ki,l).classList.add("show"),h($i,l)._reportTelemetry({action:"alt_text_tooltip"})},100))},{signal:s}),e.addEventListener("mouseleave",function(){var t;h(Qi,l)&&(clearTimeout(h(Qi,l)),f(Qi,l,null)),null===(t=h(Ki,l))||void 0===t||t.classList.remove("show")},{signal:s})),h(qi,this)?a.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(a.removeAttribute("data-l10n-id"),a.textContent=h(Vi,this)),a.parentNode||e.append(a),null==(o=h($i,this).getElementForAltText())||o.setAttribute("aria-describedby",a.id);case 6:return t.a(2)}},t,this)}))).apply(this,arguments)}var lr={_:null};w(rr,"_l10n",null);var ur=new WeakMap,cr=new WeakMap,hr=new WeakMap,dr=new WeakMap,fr=new WeakMap,vr=new WeakMap,pr=new WeakMap,gr=new WeakMap,yr=new WeakMap,mr=new WeakMap,wr=new WeakMap,br=new WeakMap,kr=new WeakSet,_r=function(){return y(function t(e){var n=e.container,r=e.isPinchingDisabled,a=void 0===r?null:r,s=e.isPinchingStopped,o=void 0===s?null:s,l=e.onPinchStart,u=void 0===l?null:l,v=e.onPinching,g=void 0===v?null:v,y=e.onPinchEnd,m=void 0===y?null:y,w=e.signal;c(this,t),p(this,kr),d(this,ur,void 0),d(this,cr,!1),d(this,hr,null),d(this,dr,void 0),d(this,fr,void 0),d(this,vr,void 0),d(this,pr,void 0),d(this,gr,null),d(this,yr,void 0),d(this,mr,null),d(this,wr,void 0),d(this,br,null),f(ur,this,n),f(hr,this,o),f(dr,this,a),f(fr,this,u),f(vr,this,g),f(pr,this,m),f(wr,this,new AbortController),f(yr,this,AbortSignal.any([w,h(wr,this).signal])),n.addEventListener("touchstart",i(kr,this,Ar).bind(this),{passive:!1,signal:h(yr,this)})},[{key:"MIN_TOUCH_DISTANCE_TO_PINCH",get:function(){return 35/je.pixelRatio}},{key:"destroy",value:function(){var t,e;null===(t=h(wr,this))||void 0===t||t.abort(),f(wr,this,null),null===(e=h(gr,this))||void 0===e||e.abort(),f(gr,this,null)}}])}();function Ar(t){var e,n,r=this;if(null===(e=h(dr,this))||void 0===e||!e.call(this)){if(1===t.touches.length){if(h(gr,this))return;var a=f(gr,this,new AbortController),s=AbortSignal.any([h(yr,this),a.signal]),o=h(ur,this),l={capture:!0,signal:s,passive:!1},u=function(t){var e;"touch"===t.pointerType&&(null===(e=h(gr,r))||void 0===e||e.abort(),f(gr,r,null))};return o.addEventListener("pointerdown",function(t){"touch"===t.pointerType&&(Pe(t),u(t))},l),o.addEventListener("pointerup",u,l),void o.addEventListener("pointercancel",u,l)}if(!h(br,this)){var c;f(br,this,new AbortController);var d=AbortSignal.any([h(yr,this),h(br,this).signal]),v=h(ur,this),p={signal:d,capture:!1,passive:!1};v.addEventListener("touchmove",i(kr,this,xr).bind(this),p);var g=i(kr,this,Sr).bind(this);v.addEventListener("touchend",g,p),v.addEventListener("touchcancel",g,p),p.capture=!0,v.addEventListener("pointerdown",Pe,p),v.addEventListener("pointermove",Pe,p),v.addEventListener("pointercancel",Pe,p),v.addEventListener("pointerup",Pe,p),null===(c=h(fr,this))||void 0===c||c.call(this)}if(Pe(t),2!==t.touches.length||null!==(n=h(hr,this))&&void 0!==n&&n.call(this))f(mr,this,null);else{var y=P(t.touches,2),m=y[0],w=y[1];if(m.identifier>w.identifier){var b=[w,m];m=b[0],w=b[1]}f(mr,this,{touch0X:m.screenX,touch0Y:m.screenY,touch1X:w.screenX,touch1Y:w.screenY})}}}function xr(t){var e;if(h(mr,this)&&2===t.touches.length){Pe(t);var n=P(t.touches,2),i=n[0],r=n[1];if(i.identifier>r.identifier){var a=[r,i];i=a[0],r=a[1]}var s=i,o=s.screenX,l=s.screenY,u=r,c=u.screenX,d=u.screenY,v=h(mr,this),p=v.touch0X,g=v.touch0Y,y=v.touch1X-p,m=v.touch1Y-g,w=c-o,b=d-l,k=Math.hypot(w,b)||1,_=Math.hypot(y,m)||1;if(h(cr,this)||!(Math.abs(_-k)<=H.MIN_TOUCH_DISTANCE_TO_PINCH))if(v.touch0X=o,v.touch0Y=l,v.touch1X=c,v.touch1Y=d,h(cr,this)){var A=[(o+c)/2,(l+d)/2];null===(e=h(vr,this))||void 0===e||e.call(this,A,_,k)}else f(cr,this,!0)}}function Sr(t){if(!(t.touches.length>=2)){var e;if(h(br,this))h(br,this).abort(),f(br,this,null),null===(e=h(pr,this))||void 0===e||e.call(this);h(mr,this)&&(Pe(t),f(mr,this,null),f(cr,this,!1))}}H=_r;var Er=new WeakMap,Mr=new WeakMap,Cr=new WeakMap,Rr=new WeakMap,Tr=new WeakMap,Ir=new WeakMap,Pr=new WeakMap,Dr=new WeakMap,Lr=new WeakMap,Or=new WeakMap,Fr=new WeakMap,Nr=new WeakMap,Wr=new WeakMap,Br=new WeakMap,jr=new WeakMap,zr=new WeakMap,Ur=new WeakMap,Hr=new WeakMap,Gr=new WeakMap,Vr=new WeakMap,qr=new WeakMap,Xr=new WeakMap,Yr=new WeakMap,Kr=new WeakMap,Qr=new WeakSet,Jr=function(){function t(e){c(this,t),p(this,Qr),d(this,Er,null),d(this,Mr,null),d(this,Cr,null),d(this,Rr,!1),d(this,Tr,null),d(this,Ir,""),d(this,Pr,!1),d(this,Dr,null),d(this,Lr,null),d(this,Or,null),d(this,Fr,null),d(this,Nr,""),d(this,Wr,!1),d(this,Br,null),d(this,jr,!1),d(this,zr,!1),d(this,Ur,!1),d(this,Hr,null),d(this,Gr,0),d(this,Vr,0),d(this,qr,null),d(this,Xr,null),w(this,"isSelected",!1),w(this,"_isCopy",!1),w(this,"_editToolbar",null),w(this,"_initialOptions",Object.create(null)),w(this,"_initialData",null),w(this,"_isVisible",!0),w(this,"_uiManager",null),w(this,"_focusEventsAllowed",!0),d(this,Yr,!1),d(this,Kr,t._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;var n=this.parent.viewport,i=n.rotation,r=n.rawDims,a=r.pageWidth,s=r.pageHeight,o=r.pageX,l=r.pageY;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[a,s],this.pageTranslation=[o,l];var u=P(this.parentDimensions,2),h=u[0],f=u[1];this.x=e.x/h,this.y=e.y/f,this.isAttachedToDOM=!1,this.deleted=!1}return y(t,[{key:"editorType",get:function(){return Object.getPrototypeOf(this).constructor._type}},{key:"propertiesToUpdate",get:function(){return[]}},{key:"_isDraggable",get:function(){return h(Yr,this)},set:function(t){var e;f(Yr,this,t),null===(e=this.div)||void 0===e||e.classList.toggle("draggable",t)}},{key:"isEnterHandled",get:function(){return!0}},{key:"center",value:function(){var t=P(this.pageDimensions,2),e=t[0],n=t[1];switch(this.parentRotation){case 90:this.x-=this.height*n/(2*e),this.y+=this.width*e/(2*n);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(2*e),this.y-=this.width*e/(2*n);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}},{key:"addCommands",value:function(t){this._uiManager.addCommands(t)}},{key:"currentLayer",get:function(){return this._uiManager.currentLayer}},{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"setInForeground",value:function(){this.div.style.zIndex=h(Kr,this)}},{key:"setParent",value:function(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):i(Qr,this,ga).call(this),this.parent=t}},{key:"focusin",value:function(t){this._focusEventsAllowed&&(h(Wr,this)?f(Wr,this,!1):this.parent.setSelected(this))}},{key:"focusout",value:function(t){var e;if(this._focusEventsAllowed&&this.isAttachedToDOM){var n=t.relatedTarget;null!=n&&n.closest("#".concat(this.id))||(t.preventDefault(),null!==(e=this.parent)&&void 0!==e&&e.isMultipleSelection||this.commitOrRemove())}}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function(){this.addToAnnotationStorage()}},{key:"addToAnnotationStorage",value:function(){this._uiManager.addToAnnotationStorage(this)}},{key:"setAt",value:function(t,e,n,i){var r=P(this.parentDimensions,2),a=r[0],s=r[1],o=P(this.screenToPageTranslation(n,i),2);n=o[0],i=o[1],this.x=(t+n)/a,this.y=(e+i)/s,this.fixAndSetPosition()}},{key:"_moveAfterPaste",value:function(t,e){var n=P(this.parentDimensions,2),i=n[0],r=n[1];this.setAt(t*i,e*r,this.width*i,this.height*r),this._onTranslated()}},{key:"translate",value:function(t,e){i(Qr,this,Zr).call(this,this.parentDimensions,t,e)}},{key:"translateInPage",value:function(t,e){h(Br,this)||f(Br,this,[this.x,this.y,this.width,this.height]),i(Qr,this,Zr).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}},{key:"translationDone",value:function(){this._onTranslated(this.x,this.y)}},{key:"drag",value:function(t,e){h(Br,this)||f(Br,this,[this.x,this.y,this.width,this.height]);var n=this.div,i=P(this.parentDimensions,2),r=i[0],a=i[1];if(this.x+=t/r,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){var s=this.div.getBoundingClientRect(),o=s.x,l=s.y;this.parent.findNewParent(this,o,l)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}var u=this.x,c=this.y,d=P(this.getBaseTranslation(),2);u+=d[0],c+=d[1];var v=n.style;v.left="".concat((100*u).toFixed(2),"%"),v.top="".concat((100*c).toFixed(2),"%"),this._onTranslating(u,c),n.scrollIntoView({block:"nearest"})}},{key:"_onTranslating",value:function(t,e){}},{key:"_onTranslated",value:function(t,e){}},{key:"_hasBeenMoved",get:function(){return!!h(Br,this)&&(h(Br,this)[0]!==this.x||h(Br,this)[1]!==this.y)}},{key:"_hasBeenResized",get:function(){return!!h(Br,this)&&(h(Br,this)[2]!==this.width||h(Br,this)[3]!==this.height)}},{key:"getBaseTranslation",value:function(){var e=P(this.parentDimensions,2),n=e[0],i=e[1],r=t._borderLineWidth,a=r/n,s=r/i;switch(this.rotation){case 90:return[-a,s];case 180:return[a,s];case 270:return[a,-s];default:return[-a,-s]}}},{key:"_mustFixPosition",get:function(){return!0}},{key:"fixAndSetPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation,e=this.div.style,n=P(this.pageDimensions,2),i=n[0],r=n[1],a=this.x,s=this.y,o=this.width,l=this.height;if(o*=i,l*=r,a*=i,s*=r,this._mustFixPosition)switch(t){case 0:a=ge(a,0,i-o),s=ge(s,0,r-l);break;case 90:a=ge(a,0,i-l),s=ge(s,o,r);break;case 180:a=ge(a,o,i),s=ge(s,l,r);break;case 270:a=ge(a,l,i),s=ge(s,0,r-o)}this.x=a/=i,this.y=s/=r;var u=P(this.getBaseTranslation(),2);a+=u[0],s+=u[1],e.left="".concat((100*a).toFixed(2),"%"),e.top="".concat((100*s).toFixed(2),"%"),this.moveInDOM()}},{key:"screenToPageTranslation",value:function(e,n){return $r.call(t,e,n,this.parentRotation)}},{key:"pageTranslationToScreen",value:function(e,n){return $r.call(t,e,n,360-this.parentRotation)}},{key:"parentScale",get:function(){return this._uiManager.viewParameters.realScale}},{key:"parentRotation",get:function(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}},{key:"parentDimensions",get:function(){var t=this.parentScale,e=P(this.pageDimensions,2);return[e[0]*t,e[1]*t]}},{key:"setDims",value:function(t,e){var n=P(this.parentDimensions,2),i=n[0],r=n[1],a=this.div.style;a.width="".concat((100*t/i).toFixed(2),"%"),h(Pr,this)||(a.height="".concat((100*e/r).toFixed(2),"%"))}},{key:"fixDims",value:function(){var t=this.div.style,e=t.height,n=t.width,i=n.endsWith("%"),r=!h(Pr,this)&&e.endsWith("%");if(!i||!r){var a=P(this.parentDimensions,2),s=a[0],o=a[1];i||(t.width="".concat((100*parseFloat(n)/s).toFixed(2),"%")),h(Pr,this)||r||(t.height="".concat((100*parseFloat(e)/o).toFixed(2),"%"))}}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"_onResized",value:function(){}},{key:"_onResizing",value:function(){}},{key:"altTextFinish",value:function(){var t;null===(t=h(Cr,this))||void 0===t||t.finish()}},{key:"addEditToolbar",value:(a=o(C().m(function t(){return C().w(function(t){for(;;)switch(t.n){case 0:if(!this._editToolbar&&!h(zr,this)){t.n=1;break}return t.a(2,this._editToolbar);case 1:if(this._editToolbar=new Ke(this),this.div.append(this._editToolbar.render()),!h(Cr,this)){t.n=2;break}return t.n=2,this._editToolbar.addAltText(h(Cr,this));case 2:return t.a(2,this._editToolbar)}},t,this)})),function(){return a.apply(this,arguments)})},{key:"removeEditToolbar",value:function(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null===(t=h(Cr,this))||void 0===t||t.destroy())}},{key:"addContainer",value:function(t){var e,n=null===(e=this._editToolbar)||void 0===e?void 0:e.div;n?n.before(t):this.div.append(t)}},{key:"getClientDimensions",value:function(){return this.div.getBoundingClientRect()}},{key:"addAltTextButton",value:(r=o(C().m(function e(){return C().w(function(e){for(;;)switch(e.n){case 0:if(!h(Cr,this)){e.n=1;break}return e.a(2);case 1:return rr.initialize(t._l10n),f(Cr,this,new rr(this)),h(Er,this)&&(h(Cr,this).data=h(Er,this),f(Er,this,null)),e.n=2,this.addEditToolbar();case 2:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"altTextData",get:function(){var t;return null===(t=h(Cr,this))||void 0===t?void 0:t.data},set:function(t){h(Cr,this)&&(h(Cr,this).data=t)}},{key:"guessedAltText",get:function(){var t;return null===(t=h(Cr,this))||void 0===t?void 0:t.guessedText}},{key:"setGuessedAltText",value:(n=o(C().m(function t(e){var n;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,null===(n=h(Cr,this))||void 0===n?void 0:n.setGuessedText(e);case 1:return t.a(2)}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"serializeAltText",value:function(t){var e;return null===(e=h(Cr,this))||void 0===e?void 0:e.serialize(t)}},{key:"hasAltText",value:function(){return!!h(Cr,this)&&!h(Cr,this).isEmpty()}},{key:"hasAltTextData",value:function(){var t,e;return null!==(t=null===(e=h(Cr,this))||void 0===e?void 0:e.hasData())&&void 0!==t&&t}},{key:"render",value:function(){var t,e=this,n=this.div=document.createElement("div");n.setAttribute("data-editor-rotation",(360-this.rotation)%360),n.className=this.name,n.setAttribute("id",this.id),n.tabIndex=h(Rr,this)?-1:0,n.setAttribute("role","application"),this.defaultL10nId&&n.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||n.classList.add("hidden"),this.setInForeground(),i(Qr,this,ha).call(this);var r=P(this.parentDimensions,2),a=r[0],s=r[1];this.parentRotation%180!=0&&(n.style.maxWidth="".concat((100*s/a).toFixed(2),"%"),n.style.maxHeight="".concat((100*a/s).toFixed(2),"%"));var o=P(this.getInitialTranslation(),2),l=o[0],u=o[1];return this.translate(l,u),dn(this,n,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(h(Xr,this)||f(Xr,this,new _r({container:n,isPinchingDisabled:function(){return!e.isSelected},onPinchStart:i(Qr,this,sa).bind(this),onPinching:i(Qr,this,oa).bind(this),onPinchEnd:i(Qr,this,la).bind(this),signal:this._uiManager._signal}))),null===(t=this._uiManager._editorUndoBar)||void 0===t||t.hide(),n}},{key:"pointerdown",value:function(t){var e=se.platform.isMac;0!==t.button||t.ctrlKey&&e?t.preventDefault():(f(Wr,this,!0),this._isDraggable?i(Qr,this,ca).call(this,t):i(Qr,this,ua).call(this,t))}},{key:"_onStartDragging",value:function(){}},{key:"_onStopDragging",value:function(){}},{key:"moveInDOM",value:function(){var t=this;h(Hr,this)&&clearTimeout(h(Hr,this)),f(Hr,this,setTimeout(function(){var e;f(Hr,t,null),null===(e=t.parent)||void 0===e||e.moveEditorInDOM(t)},0))}},{key:"_setParentAndPosition",value:function(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}},{key:"getRect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation,i=this.parentScale,r=P(this.pageDimensions,2),a=r[0],s=r[1],o=P(this.pageTranslation,2),l=o[0],u=o[1],c=t/i,h=e/i,d=this.x*a,f=this.y*s,v=this.width*a,p=this.height*s;switch(n){case 0:return[d+c+l,s-f-h-p+u,d+c+v+l,s-f-h+u];case 90:return[d+h+l,s-f+c+u,d+h+p+l,s-f+c+v+u];case 180:return[d-c-v+l,s-f+h+u,d-c+l,s-f+h+p+u];case 270:return[d-h-p+l,s-f-c-v+u,d-h+l,s-f-c+u];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(t,e){var n=P(t,4),i=n[0],r=n[1],a=n[2],s=n[3],o=a-i,l=s-r;switch(this.rotation){case 0:return[i,e-s,o,l];case 90:return[i,e-r,l,o];case 180:return[a,e-r,o,l];case 270:return[a,e-s,l,o];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function(t){}},{key:"isEmpty",value:function(){return!1}},{key:"enableEditMode",value:function(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),f(zr,this,!0),!0)}},{key:"disableEditMode",value:function(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),f(zr,this,!1),!0)}},{key:"isInEditMode",value:function(){return h(zr,this)}},{key:"shouldGetKeyboardEvents",value:function(){return h(Ur,this)}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"isOnScreen",get:function(){var t=this.getClientDimensions(),e=t.top,n=t.left,i=t.bottom,r=t.right,a=window,s=a.innerHeight;return n<a.innerWidth&&r>0&&e<s&&i>0}},{key:"rebuild",value:function(){i(Qr,this,ha).call(this)}},{key:"rotate",value:function(t){}},{key:"resize",value:function(){}},{key:"serializeDeleted",value:function(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(t=this._initialData)||void 0===t?void 0:t.popupRef)||""}}},{key:"serialize",value:function(){qt("An editor must be serializable")}},{key:"hasBeenModified",get:function(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}},{key:"remove",value:function(){var t,e;if(null===(t=h(Fr,this))||void 0===t||t.abort(),f(Fr,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),h(Hr,this)&&(clearTimeout(h(Hr,this)),f(Hr,this,null)),i(Qr,this,ga).call(this),this.removeEditToolbar(),h(qr,this)){var n,r=m(h(qr,this).values());try{for(r.s();!(n=r.n()).done;){var a=n.value;clearTimeout(a)}}catch(t){r.e(t)}finally{r.f()}f(qr,this,null)}this.parent=null,null===(e=h(Xr,this))||void 0===e||e.destroy(),f(Xr,this,null)}},{key:"isResizable",get:function(){return!1}},{key:"makeResizable",value:function(){this.isResizable&&(i(Qr,this,ea).call(this),h(Dr,this).classList.remove("hidden"))}},{key:"toolbarPosition",get:function(){return null}},{key:"keydown",value:function(e){if(this.isResizable&&e.target===this.div&&"Enter"===e.key){this._uiManager.setSelected(this),f(Or,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});var n=h(Dr,this).children;if(!h(Mr,this)){f(Mr,this,Array.from(n));var r,a=i(Qr,this,da).bind(this),s=i(Qr,this,fa).bind(this),o=this._uiManager._signal,l=m(h(Mr,this));try{for(l.s();!(r=l.n()).done;){var u=r.value,c=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:o}),u.addEventListener("blur",s,{signal:o}),u.addEventListener("focus",i(Qr,this,va).bind(this,c),{signal:o}),u.setAttribute("data-l10n-id",t._l10nResizer[c])}}catch(t){l.e(t)}finally{l.f()}}var d,v=h(Mr,this)[0],p=0,g=m(n);try{for(g.s();!(d=g.n()).done;){if(d.value===v)break;p++}}catch(t){g.e(t)}finally{g.f()}var y=(360-this.rotation+this.parentRotation)%360/90*(h(Mr,this).length/4);if(y!==p){if(y<p)for(var w=0;w<p-y;w++)h(Dr,this).append(h(Dr,this).firstChild);else if(y>p)for(var b=0;b<y-p;b++)h(Dr,this).firstChild.before(h(Dr,this).lastChild);var k,_=0,A=m(n);try{for(A.s();!(k=A.n()).done;){var x=k.value,S=h(Mr,this)[_++].getAttribute("data-resizer-name");x.setAttribute("data-l10n-id",t._l10nResizer[S])}}catch(t){A.e(t)}finally{A.f()}}i(Qr,this,pa).call(this,0),f(Ur,this,!0),h(Dr,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}}},{key:"_resizeWithKeyboard",value:function(t,e){h(Ur,this)&&i(Qr,this,aa).call(this,h(Nr,this),{deltaX:t,deltaY:e,fromKeyboard:!0})}},{key:"_stopResizingWithKeyboard",value:function(){i(Qr,this,ga).call(this),this.div.focus()}},{key:"select",value:function(){var t,e,n,i=this;this.isSelected&&this._editToolbar||(this.isSelected=!0,this.makeResizable(),null===(t=this.div)||void 0===t||t.classList.add("selectedEditor"),this._editToolbar?(null===(e=this._editToolbar)||void 0===e||e.show(),null===(n=h(Cr,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(function(){var t,e;null!==(t=i.div)&&void 0!==t&&t.classList.contains("selectedEditor")&&(null===(e=i._editToolbar)||void 0===e||e.show())}))}},{key:"unselect",value:function(){var t,e,n,i,r;this.isSelected&&(this.isSelected=!1,null===(t=h(Dr,this))||void 0===t||t.classList.add("hidden"),null===(e=this.div)||void 0===e||e.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(r=h(Cr,this))||void 0===r||r.toggleAltTextBadge(!0))}},{key:"updateParams",value:function(t,e){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"canChangeContent",get:function(){return!1}},{key:"enterInEditMode",value:function(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}},{key:"dblclick",value:function(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}},{key:"getElementForAltText",value:function(){return this.div}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return h(jr,this)},set:function(t){f(jr,this,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}},{key:"setAspectRatio",value:function(t,e){f(Pr,this,!0);var n=t/e,i=this.div.style;i.aspectRatio=n,i.height="auto"}},{key:"telemetryInitialData",get:function(){return{action:"added"}}},{key:"telemetryFinalData",get:function(){return null}},{key:"_reportTelemetry",value:function(e){var n=this;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){h(qr,this)||f(qr,this,new Map);var i=e.action,r=h(qr,this).get(i);return r&&clearTimeout(r),r=setTimeout(function(){n._reportTelemetry(e),h(qr,n).delete(i),0===h(qr,n).size&&f(qr,n,null)},t._telemetryTimeout),void h(qr,this).set(i,r)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!t),this._isVisible=t}},{key:"enable",value:function(){this.div&&(this.div.tabIndex=0),f(Rr,this,!1)}},{key:"disable",value:function(){this.div&&(this.div.tabIndex=-1),f(Rr,this,!0)}},{key:"renderAnnotationElement",value:function(t){var e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){var n=e;(e=document.createElement("div")).classList.add("annotationContent",this.editorType),n.before(e)}}else(e=document.createElement("div")).classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}},{key:"resetAnnotationElement",value:function(t){var e=t.container.firstChild;"DIV"===(null==e?void 0:e.nodeName)&&e.classList.contains("annotationContent")&&e.remove()}}],[{key:"_resizerKeyboardManager",get:function(){var e=t.prototype._resizeWithKeyboard,n=_i.TRANSLATE_SMALL,i=_i.TRANSLATE_BIG;return Qt(this,"_resizerKeyboardManager",new Cn([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],t.prototype._stopResizingWithKeyboard]]))}},{key:"isDrawer",get:function(){return!1}},{key:"_defaultLineColor",get:function(){return Qt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deleteAnnotationElement",value:function(t){var e=new ya({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}},{key:"initialize",value:function(e,n){var i;if(null!==(i=t._l10n)&&void 0!==i||(t._l10n=e),t._l10nResizer||(t._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1===t._borderLineWidth){var r=getComputedStyle(document.documentElement);t._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}}},{key:"updateDefaultParams",value:function(t,e){}},{key:"defaultPropertiesToUpdate",get:function(){return[]}},{key:"isHandlingMimeForPasting",value:function(t){return!1}},{key:"paste",value:function(t,e){qt("Not implemented")}},{key:"_round",value:function(t){return Math.round(1e4*t)/1e4}},{key:"deserialize",value:(e=o(C().m(function t(e,n,i){var r,a,s,o,l,u,c,h,d,v;return C().w(function(t){for(;;)if(0===t.n)return(r=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:i})).rotation=e.rotation,f(Er,r,e.accessibilityData),r._isCopy=e.isCopy||!1,a=P(r.pageDimensions,2),s=a[0],o=a[1],l=r.getRectInCurrentCoords(e.rect,o),u=P(l,4),c=u[0],h=u[1],d=u[2],v=u[3],r.x=c/s,r.y=h/o,r.width=d/s,r.height=v/o,t.a(2,r)},t,this)})),function(t,n,i){return e.apply(this,arguments)})},{key:"MIN_SIZE",get:function(){return 16}},{key:"canCreateNewEmptyEditor",value:function(){return!0}}]);var e,n,r,a}();function Zr(t,e,n){var i=P(t,2),r=i[0],a=i[1],s=P(this.screenToPageTranslation(e,n),2);e=s[0],n=s[1],this.x+=e/r,this.y+=n/a,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function $r(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}function ta(t){switch(t){case 90:var e=P(this.pageDimensions,2),n=e[0],i=e[1];return[0,-n/i,i/n,0];case 180:return[-1,0,0,-1];case 270:var r=P(this.pageDimensions,2),a=r[0],s=r[1];return[0,a/s,-s/a,0];default:return[1,0,0,1]}}function ea(){if(!h(Dr,this)){f(Dr,this,document.createElement("div")),h(Dr,this).classList.add("resizers");for(var t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal,n=0,r=t;n<r.length;n++){var a=r[n],s=document.createElement("div");h(Dr,this).append(s),s.classList.add("resizer",a),s.setAttribute("data-resizer-name",a),s.addEventListener("pointerdown",i(Qr,this,na).bind(this,a),{signal:e}),s.addEventListener("contextmenu",Ie,{signal:e}),s.tabIndex=-1}this.div.prepend(h(Dr,this))}}function na(t,e){var n,r=this;e.preventDefault();var a=se.platform.isMac;if(!(0!==e.button||e.ctrlKey&&a)){null===(n=h(Cr,this))||void 0===n||n.toggle(!1);var s=this._isDraggable;this._isDraggable=!1,f(Lr,this,[e.screenX,e.screenY]);var o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",i(Qr,this,aa).bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Pe,{passive:!1,signal:l}),window.addEventListener("contextmenu",Ie,{signal:l}),f(Or,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});var u=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;var d=function(){var t;o.abort(),r.parent.togglePointerEvents(!0),null===(t=h(Cr,r))||void 0===t||t.toggle(!0),r._isDraggable=s,r.parent.div.style.cursor=u,r.div.style.cursor=c,i(Qr,r,ra).call(r)};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}}function ia(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e;var r=P(this.parentDimensions,2),a=r[0],s=r[1];this.setDims(a*n,s*i),this.fixAndSetPosition(),this._onResized()}function ra(){if(h(Or,this)){var t=h(Or,this),e=t.savedX,n=t.savedY,r=t.savedWidth,a=t.savedHeight;f(Or,this,null);var s=this.x,o=this.y,l=this.width,u=this.height;s===e&&o===n&&l===r&&u===a||this.addCommands({cmd:i(Qr,this,ia).bind(this,s,o,l,u),undo:i(Qr,this,ia).bind(this,e,n,r,a),mustExec:!0})}}function aa(t,e){var n,r,a=P(this.parentDimensions,2),s=a[0],o=a[1],l=this.x,u=this.y,c=this.width,d=this.height,v=G.MIN_SIZE/s,p=G.MIN_SIZE/o,g=i(Qr,this,ta).call(this,this.rotation),y=function(t,e){return[g[0]*t+g[2]*e,g[1]*t+g[3]*e]},m=i(Qr,this,ta).call(this,360-this.rotation),w=!1,b=!1;switch(t){case"topLeft":w=!0,n=function(t,e){return[0,0]},r=function(t,e){return[t,e]};break;case"topMiddle":n=function(t,e){return[t/2,0]},r=function(t,e){return[t/2,e]};break;case"topRight":w=!0,n=function(t,e){return[t,0]},r=function(t,e){return[0,e]};break;case"middleRight":b=!0,n=function(t,e){return[t,e/2]},r=function(t,e){return[0,e/2]};break;case"bottomRight":w=!0,n=function(t,e){return[t,e]},r=function(t,e){return[0,0]};break;case"bottomMiddle":n=function(t,e){return[t/2,e]},r=function(t,e){return[t/2,0]};break;case"bottomLeft":w=!0,n=function(t,e){return[0,e]},r=function(t,e){return[t,0]};break;case"middleLeft":b=!0,n=function(t,e){return[0,e/2]},r=function(t,e){return[t,e/2]}}var k,_,A=n(c,d),x=r(c,d),S=y.apply(void 0,O(x)),E=G._round(l+S[0]),M=G._round(u+S[1]),C=1,R=1;if(e.fromKeyboard)k=e.deltaX,_=e.deltaY;else{var T=e.screenX,I=e.screenY,D=P(h(Lr,this),2),L=D[0],F=D[1],N=P(this.screenToPageTranslation(T-L,I-F),2);k=N[0],_=N[1],h(Lr,this)[0]=T,h(Lr,this)[1]=I}var W,B,j=P((W=k/s,B=_/o,[m[0]*W+m[2]*B,m[1]*W+m[3]*B]),2);if(k=j[0],_=j[1],w){var z=Math.hypot(c,d);C=R=Math.max(Math.min(Math.hypot(x[0]-A[0]-k,x[1]-A[1]-_)/z,1/c,1/d),v/c,p/d)}else b?C=ge(Math.abs(x[0]-A[0]-k),v,1)/c:R=ge(Math.abs(x[1]-A[1]-_),p,1)/d;var U=G._round(c*C),H=G._round(d*R),V=E-(S=y.apply(void 0,O(r(U,H))))[0],q=M-S[1];h(Br,this)||f(Br,this,[this.x,this.y,this.width,this.height]),this.width=U,this.height=H,this.x=V,this.y=q,this.setDims(s*U,o*H),this.fixAndSetPosition(),this._onResizing()}function sa(){var t;f(Or,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(t=h(Cr,this))||void 0===t||t.toggle(!1),this.parent.togglePointerEvents(!1)}function oa(t,e,n){var r=n/e*.7+1-.7;if(1!==r){var a=i(Qr,this,ta).call(this,this.rotation),s=function(t,e){return[a[0]*t+a[2]*e,a[1]*t+a[3]*e]},o=P(this.parentDimensions,2),l=o[0],u=o[1],c=this.x,d=this.y,v=this.width,p=this.height,g=G.MIN_SIZE/l,y=G.MIN_SIZE/u;r=Math.max(Math.min(r,1/v,1/p),g/v,y/p);var m=G._round(v*r),w=G._round(p*r);if(m!==v||w!==p){h(Br,this)||f(Br,this,[c,d,v,p]);var b=s(v/2,p/2),k=G._round(c+b[0]),_=G._round(d+b[1]),A=s(m/2,w/2);this.x=k-A[0],this.y=_-A[1],this.width=m,this.height=w,this.setDims(l*m,u*w),this.fixAndSetPosition(),this._onResizing()}}}function la(){var t;null===(t=h(Cr,this))||void 0===t||t.toggle(!0),this.parent.togglePointerEvents(!0),i(Qr,this,ra).call(this)}function ua(t){var e=se.platform.isMac;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}function ca(t){var e=this,n=this.isSelected;this._uiManager.setUpDragSession();var r=!1,a=new AbortController,s=this._uiManager.combinedSignal(a),o={capture:!0,passive:!1,signal:s},l=function(t){a.abort(),f(Tr,e,null),f(Wr,e,!1),e._uiManager.endDragSession()||i(Qr,e,ua).call(e,t),r&&e._onStopDragging()};n&&(f(Gr,this,t.clientX),f(Vr,this,t.clientY),f(Tr,this,t.pointerId),f(Ir,this,t.pointerType),window.addEventListener("pointermove",function(t){r||(r=!0,e._onStartDragging());var n=t.clientX,i=t.clientY;if(t.pointerId===h(Tr,e)){var a=P(e.screenToPageTranslation(n-h(Gr,e),i-h(Vr,e)),2),s=a[0],o=a[1];f(Gr,e,n),f(Vr,e,i),e._uiManager.dragSelectedEditors(s,o)}else Pe(t)},o),window.addEventListener("touchmove",Pe,o),window.addEventListener("pointerdown",function(t){t.pointerType===h(Ir,e)&&(h(Xr,e)||t.isPrimary)&&l(t),Pe(t)},o));var u=function(t){h(Tr,e)&&h(Tr,e)!==t.pointerId?Pe(t):l(t)};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})}function ha(){if(!h(Fr,this)&&this.div){f(Fr,this,new AbortController);var t=this._uiManager.combinedSignal(h(Fr,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}}function da(t){G._resizerKeyboardManager.exec(this,t)}function fa(t){var e;h(Ur,this)&&(null===(e=t.relatedTarget)||void 0===e?void 0:e.parentNode)!==h(Dr,this)&&i(Qr,this,ga).call(this)}function va(t){f(Nr,this,h(Ur,this)?t:"")}function pa(t){if(h(Mr,this)){var e,n=m(h(Mr,this));try{for(n.s();!(e=n.n()).done;){e.value.tabIndex=t}}catch(t){n.e(t)}finally{n.f()}}}function ga(){f(Ur,this,!1),i(Qr,this,pa).call(this,-1),i(Qr,this,ra).call(this)}G=Jr,w(Jr,"_l10n",null),w(Jr,"_l10nResizer",null),w(Jr,"_borderLineWidth",-1),w(Jr,"_colorManager",new Tn),w(Jr,"_zIndex",1),w(Jr,"_telemetryTimeout",1e3);var ya=function(t){function e(t){var n;return c(this,e),(n=l(this,e,[t])).annotationElementId=t.annotationElementId,n.deleted=!0,n}return _(e,t),y(e,[{key:"serialize",value:function(){return this.serializeDeleted()}}])}(Jr),ma=3285377520,wa=4294901760,ba=65535,ka=function(){return y(function t(e){c(this,t),this.h1=e?4294967295&e:ma,this.h2=e?4294967295&e:ma},[{key:"update",value:function(t){var e,n;if("string"==typeof t){e=new Uint8Array(2*t.length),n=0;for(var i=0,r=t.length;i<r;i++){var a=t.charCodeAt(i);a<=255?e[n++]=a:(e[n++]=a>>>8,e[n++]=255&a)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");n=(e=t.slice()).byteLength}for(var s=n>>2,o=n-4*s,l=new Uint32Array(e.buffer,0,s),u=0,c=0,h=this.h1,d=this.h2,f=3432918353,v=461845907,p=11601,g=13715,y=0;y<s;y++)1&y?h=5*(h=(h^=u=(u=(u=(u=l[y])*f&wa|u*p&ba)<<15|u>>>17)*v&wa|u*g&ba)<<13|h>>>19)+3864292196:d=5*(d=(d^=c=(c=(c=(c=l[y])*f&wa|c*p&ba)<<15|c>>>17)*v&wa|c*g&ba)<<13|d>>>19)+3864292196;switch(u=0,o){case 3:u^=e[4*s+2]<<16;case 2:u^=e[4*s+1]<<8;case 1:u=(u=(u=(u^=e[4*s])*f&wa|u*p&ba)<<15|u>>>17)*v&wa|u*g&ba,1&s?h^=u:d^=u}this.h1=h,this.h2=d}},{key:"hexdigest",value:function(){var t=this.h1,e=this.h2;return t=3981806797*(t^=e>>>1)&wa|36045*t&ba,t=444984403*(t^=(e=4283543511*e&wa|(2950163797*(e<<16|t>>>16)&wa)>>>16)>>>1)&wa|60499*t&ba,((t^=(e=3301882366*e&wa|(3120437893*(e<<16|t>>>16)&wa)>>>16)>>>1)>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}])}(),_a=Object.freeze({map:null,hash:"",transfer:void 0}),Aa=new WeakMap,xa=new WeakMap,Sa=new WeakMap,Ea=new WeakSet,Ma=function(){return y(function t(){c(this,t),p(this,Ea),d(this,Aa,!1),d(this,xa,null),d(this,Sa,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null},[{key:"getValue",value:function(t,e){var n=h(Sa,this).get(t);return void 0===n?e:Object.assign(e,n)}},{key:"getRawValue",value:function(t){return h(Sa,this).get(t)}},{key:"remove",value:function(t){if(h(Sa,this).delete(t),0===h(Sa,this).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){var e,n=m(h(Sa,this).values());try{for(n.s();!(e=n.n()).done;){if(e.value instanceof Jr)return}}catch(t){n.e(t)}finally{n.f()}this.onAnnotationEditor(null)}}},{key:"setValue",value:function(t,e){var n=h(Sa,this).get(t),r=!1;if(void 0!==n)for(var a=0,s=Object.entries(e);a<s.length;a++){var o=P(s[a],2),l=o[0],u=o[1];n[l]!==u&&(r=!0,n[l]=u)}else r=!0,h(Sa,this).set(t,e);r&&i(Ea,this,Ca).call(this),e instanceof Jr&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}},{key:"has",value:function(t){return h(Sa,this).has(t)}},{key:"size",get:function(){return h(Sa,this).size}},{key:"resetModified",value:function(){h(Aa,this)&&(f(Aa,this,!1),"function"==typeof this.onResetModified&&this.onResetModified())}},{key:"print",get:function(){return new Ta(this)}},{key:"serializable",get:function(){if(0===h(Sa,this).size)return _a;var t,e=new Map,n=new ka,i=[],r=Object.create(null),a=!1,s=m(h(Sa,this));try{for(s.s();!(t=s.n()).done;){var o=P(t.value,2),l=o[0],u=o[1],c=u instanceof Jr?u.serialize(!1,r):u;c&&(e.set(l,c),n.update("".concat(l,":").concat(JSON.stringify(c))),a||(a=!!c.bitmap))}}catch(t){s.e(t)}finally{s.f()}if(a){var d,f=m(e.values());try{for(f.s();!(d=f.n()).done;){var v=d.value;v.bitmap&&i.push(v.bitmap)}}catch(t){f.e(t)}finally{f.f()}}return e.size>0?{map:e,hash:n.hexdigest(),transfer:i}:_a}},{key:"editorStats",get:function(){var t,e=null,n=new Map,i=m(h(Sa,this).values());try{for(i.s();!(t=i.n()).done;){var r,a=t.value;if(a instanceof Jr){var s=a.telemetryFinalData;if(s){var o=s.type;n.has(o)||n.set(o,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));for(var l=(r=e)[o]||(r[o]=new Map),u=0,c=Object.entries(s);u<c.length;u++){var d,f=P(c[u],2),v=f[0],p=f[1];if("type"!==v){var g=l.get(v);g||(g=new Map,l.set(v,g));var y=null!==(d=g.get(p))&&void 0!==d?d:0;g.set(p,y+1)}}}}}}catch(t){i.e(t)}finally{i.f()}var w,b=m(n);try{for(b.s();!(w=b.n()).done;){var k=P(w.value,2),_=k[0],A=k[1];e[_]=A.computeTelemetryFinalData(e[_])}}catch(t){b.e(t)}finally{b.f()}return e}},{key:"resetModifiedIds",value:function(){f(xa,this,null)}},{key:"modifiedIds",get:function(){if(h(xa,this))return h(xa,this);var t,e=[],n=m(h(Sa,this).values());try{for(n.s();!(t=n.n()).done;){var i=t.value;i instanceof Jr&&i.annotationElementId&&i.serialize()&&e.push(i.annotationElementId)}}catch(t){n.e(t)}finally{n.f()}return f(xa,this,{ids:new Set(e),hash:e.join(",")})}},{key:Symbol.iterator,value:function(){return h(Sa,this).entries()}}])}();function Ca(){h(Aa,this)||(f(Aa,this,!0),"function"==typeof this.onSetModified&&this.onSetModified())}var Ra=new WeakMap,Ta=function(t){function e(t){var n;c(this,e),d(n=l(this,e),Ra,void 0);var i=t.serializable,r=i.map,a=i.hash,s=i.transfer,o=nt.exports.cloneDeep(r,s?{transfer:s}:null);return f(Ra,n,{map:o,hash:a,transfer:s}),n}return _(e,t),y(e,[{key:"print",get:function(){qt("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function(){return h(Ra,this)}},{key:"modifiedIds",get:function(){return Qt(this,"modifiedIds",{ids:new Set,hash:""})}}])}(Ma),Ia=new WeakMap,Pa=function(){return y(function t(e){var n=e.ownerDocument,i=void 0===n?globalThis.document:n;e.styleElement,c(this,t),d(this,Ia,new Set),this._document=i,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0},[{key:"addNativeFontFace",value:function(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}},{key:"removeNativeFontFace",value:function(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}},{key:"insertRule",value:function(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));var e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}},{key:"clear",value:function(){var t,e=m(this.nativeFontFaces);try{for(e.s();!(t=e.n()).done;){var n=t.value;this._document.fonts.delete(n)}}catch(t){e.e(t)}finally{e.f()}this.nativeFontFaces.clear(),h(Ia,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"loadSystemFont",value:(e=o(C().m(function t(e){var n,i,r,a,s,o,l;return C().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.systemFontInfo,i=e.disableFontFace,r=e._inspectFont,n&&!h(Ia,this).has(n.loadedName)){t.n=1;break}return t.a(2);case 1:if(Xt(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),!this.isFontLoadingAPISupported){t.n=6;break}return a=n.loadedName,s=n.src,o=n.style,l=new FontFace(a,s,o),this.addNativeFontFace(l),t.p=2,t.n=3,l.load();case 3:h(Ia,this).add(a),null==r||r(n),t.n=5;break;case 4:t.p=4,t.v,Vt("Cannot load system font: ".concat(n.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(l);case 5:return t.a(2);case 6:qt("Not implemented: loadSystemFont without the Font Loading API.");case 7:return t.a(2)}},t,this,[[2,4]])})),function(t){return e.apply(this,arguments)})},{key:"bind",value:(t=o(C().m(function t(e){var n,i,r,a=this;return C().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!(e.attached||e.missingFile&&!e.systemFontInfo)){t.n=1;break}return t.a(2);case 1:if(e.attached=!0,!e.systemFontInfo){t.n=3;break}return t.n=2,this.loadSystemFont(e);case 2:case 7:case 10:return t.a(2);case 3:if(!this.isFontLoadingAPISupported){t.n=8;break}if(!(n=e.createNativeFontFace())){t.n=7;break}return this.addNativeFontFace(n),t.p=4,t.n=5,n.loaded;case 5:t.n=7;break;case 6:throw t.p=6,r=t.v,Vt("Failed to load font '".concat(n.family,"': '").concat(r,"'.")),e.disableFontFace=!0,r;case 8:if(!(i=e.createFontFaceRule())){t.n=10;break}if(this.insertRule(i),!this.isSyncFontLoadingSupported){t.n=9;break}return t.a(2);case 9:return t.n=10,new Promise(function(t){var n=a._queueLoadingCallback(t);a._prepareFontLoadEvent(e,n)})}},t,this,[[4,6]])})),function(e){return t.apply(this,arguments)})},{key:"isFontLoadingAPISupported",get:function(){var t;return Qt(this,"isFontLoadingAPISupported",!(null===(t=this._document)||void 0===t||!t.fonts))}},{key:"isSyncFontLoadingSupported",get:function(){return Qt(this,"isSyncFontLoadingSupported",st||se.platform.isFirefox)}},{key:"_queueLoadingCallback",value:function(t){var e=this.loadingRequests,n={done:!1,complete:function(){for(Xt(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.length>0&&e[0].done;){var t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(n),n}},{key:"_loadTestFont",get:function(){return Qt(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}},{key:"_prepareFontLoadEvent",value:function(t,e){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,n,i){return t.substring(0,e)+i+t.substring(e+n)}var r,a,s=this._document.createElement("canvas");s.width=1,s.height=1;var o=s.getContext("2d"),l=0;var u,c="lt".concat(Date.now()).concat(this.loadTestFontId++),h=this._loadTestFont,d=1482184792,f=n(h=i(h,976,c.length,c),16);for(r=0,a=c.length-3;r<a;r+=4)f=f-d+n(c,r)|0;r<c.length&&(f=f-d+n(c+"XXX",r)|0),h=i(h,16,4,(u=f,String.fromCharCode(u>>24&255,u>>16&255,u>>8&255,255&u)));var v="url(data:font/opentype;base64,".concat(btoa(h),");"),p='@font-face {font-family:"'.concat(c,'";src:').concat(v,"}");this.insertRule(p);var g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(var y=0,m=[t.loadedName,c];y<m.length;y++){var w=m[y],b=this._document.createElement("span");b.textContent="Hi",b.style.fontFamily=w,g.append(b)}this._document.body.append(g),function t(e,n){if(++l>30)return Vt("Load test font never loaded."),void n();o.font="30px "+e,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(c,function(){g.remove(),e.complete()})}}]);var t,e}(),Da=function(){return y(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var i in c(this,t),this.compiledGlyphs=Object.create(null),e)this[i]=e[i];this._inspectFont=n},[{key:"createNativeFontFace",value:function(){var t,e;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){var n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}else e=new FontFace(this.loadedName,this.data,{});return null===(t=this._inspectFont)||void 0===t||t.call(this,this),e}},{key:"createFontFaceRule",value:function(){var t;if(!this.data||this.disableFontFace)return null;var e,n="url(data:".concat(this.mimetype,";base64,").concat(ye(this.data),");");if(this.cssFontInfo){var i="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(i+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),e='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(i,"src:").concat(n,"}")}else e='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(n,"}");return null===(t=this._inspectFont)||void 0===t||t.call(this,this,n),e}},{key:"getPathGenerator",value:function(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];var n,i=this.loadedName+"_path_"+e;try{n=t.get(i)}catch(t){Vt('getPathGenerator - ignoring character: "'.concat(t,'".'))}var r=new Path2D(n||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=r}}])}();function La(t){if("string"!=typeof t)return null;if(t.endsWith("/"))return t;throw new Error('Invalid factory url: "'.concat(t,'" must include trailing slash.'))}var Oa=function(t){return"object"===W(t)&&Number.isInteger(null==t?void 0:t.num)&&t.num>=0&&Number.isInteger(null==t?void 0:t.gen)&&t.gen>=0},Fa=function(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;var i=L(n),r=i[0],a=i[1],s=i.slice(2);if(!t(r)&&!Number.isInteger(r))return!1;if(!e(a))return!1;var o=s.length,l=!0;switch(a.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return 0===o;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(4!==o)return!1;l=!1;break;default:return!1}var u,c=m(s);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(!("number"==typeof h||l&&null===h))return!1}}catch(t){c.e(t)}finally{c.f()}return!0}.bind(null,Oa,function(t){return"object"===W(t)&&"string"==typeof(null==t?void 0:t.name)}),Na=new WeakMap,Wa=new WeakMap,Ba=function(){return y(function t(){c(this,t),d(this,Na,new Map),d(this,Wa,Promise.resolve())},[{key:"postMessage",value:function(t,e){var n=this,i={data:nt.exports.cloneDeep(t,e?{transfer:e}:null)};h(Wa,this).then(function(){var t,e=m(h(Na,n));try{for(e.s();!(t=e.n()).done;){P(t.value,1)[0].call(n,i)}}catch(t){e.e(t)}finally{e.f()}})}},{key:"addEventListener",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;if((null==i?void 0:i.signal)instanceof AbortSignal){var a=i.signal;if(a.aborted)return void Vt("LoopbackPort - cannot use an `aborted` signal.");var s=function(){return n.removeEventListener(t,e)};r=function(){return a.removeEventListener("abort",s)},a.addEventListener("abort",s)}h(Na,this).set(e,r)}},{key:"removeEventListener",value:function(t,e){var n=h(Na,this).get(e);null==n||n(),h(Na,this).delete(e)}},{key:"terminate",value:function(){var t,e=m(h(Na,this));try{for(e.s();!(t=e.n()).done;){var n=P(t.value,2)[1];null==n||n()}}catch(t){e.e(t)}finally{e.f()}h(Na,this).clear()}}])}(),ja=1,za=2,Ua=1,Ha=2,Ga=3,Va=4,qa=5,Xa=6,Ya=7,Ka=8;function Qa(){}function Ja(t){if(t instanceof ie||t instanceof te||t instanceof Zt||t instanceof ee||t instanceof $t)return t;switch(t instanceof Error||"object"===W(t)&&null!==t||qt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new ie(t.message);case"InvalidPDFException":return new te(t.message);case"PasswordException":return new Zt(t.message,t.code);case"ResponseException":return new ee(t.message,t.status,t.missing);case"UnknownErrorException":return new $t(t.message,t.details)}return new $t(t.message,t.toString())}var Za=new WeakMap,$a=new WeakSet,ts=function(){return y(function t(e,n,r){c(this,t),p(this,$a),d(this,Za,new AbortController),this.sourceName=e,this.targetName=n,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",i($a,this,es).bind(this),{signal:h(Za,this).signal})},[{key:"on",value:function(t,e){var n=this.actionHandler;if(n[t])throw new Error('There is already an actionName called "'.concat(t,'"'));n[t]=e}},{key:"send",value:function(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}},{key:"sendWithPromise",value:function(t,e,n){var i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(t){r.reject(t)}return r.promise}},{key:"sendWithStream",value:function(t,e,n,i){var r=this,a=this.streamId++,s=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:function(n){var u=Promise.withResolvers();return r.streamControllers[a]={controller:n,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:s,targetName:o,action:t,streamId:a,data:e,desiredSize:n.desiredSize},i),u.promise},pull:function(t){var e=Promise.withResolvers();return r.streamControllers[a].pullCall=e,l.postMessage({sourceName:s,targetName:o,stream:Xa,streamId:a,desiredSize:t.desiredSize}),e.promise},cancel:function(t){Xt(t instanceof Error,"cancel must have a valid reason");var e=Promise.withResolvers();return r.streamControllers[a].cancelCall=e,r.streamControllers[a].isClosed=!0,l.postMessage({sourceName:s,targetName:o,stream:Ua,streamId:a,reason:Ja(t)}),e.promise}},n)}},{key:"destroy",value:function(){var t;null===(t=h(Za,this))||void 0===t||t.abort(),f(Za,this,null)}}])}();function es(t){var e=t.data;if(e.targetName===this.sourceName)if(e.stream)i($a,this,is).call(this,e);else if(e.callback){var n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error("Cannot resolve callback ".concat(n));if(delete this.callbackCapabilities[n],e.callback===ja)r.resolve(e.data);else{if(e.callback!==za)throw new Error("Unexpected callback case");r.reject(Ja(e.reason))}}else{var a=this.actionHandler[e.action];if(!a)throw new Error("Unknown action from worker: ".concat(e.action));if(e.callbackId){var s=this.sourceName,o=e.sourceName,l=this.comObj;Promise.try(a,e.data).then(function(t){l.postMessage({sourceName:s,targetName:o,callback:ja,callbackId:e.callbackId,data:t})},function(t){l.postMessage({sourceName:s,targetName:o,callback:za,callbackId:e.callbackId,reason:Ja(t)})})}else e.streamId?i($a,this,ns).call(this,e):a(e.data)}}function ns(t){var e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,a=this,s=this.actionHandler[t.action],o={enqueue:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var o=this.desiredSize;this.desiredSize-=a,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:Va,streamId:e,chunk:t},s)}},close:function(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ga,streamId:e}),delete a.streamSinks[e])},error:function(t){Xt(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:qa,streamId:e,reason:Ja(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,Promise.try(s,t.data,o).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ka,streamId:e,success:!0})},function(t){r.postMessage({sourceName:n,targetName:i,stream:Ka,streamId:e,reason:Ja(t)})})}function is(t){var e=t.streamId,n=this.sourceName,r=t.sourceName,a=this.comObj,s=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case Ka:t.success?s.startCall.resolve():s.startCall.reject(Ja(t.reason));break;case Ya:t.success?s.pullCall.resolve():s.pullCall.reject(Ja(t.reason));break;case Xa:if(!o){a.postMessage({sourceName:n,targetName:r,stream:Ya,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||Qa).then(function(){a.postMessage({sourceName:n,targetName:r,stream:Ya,streamId:e,success:!0})},function(t){a.postMessage({sourceName:n,targetName:r,stream:Ya,streamId:e,reason:Ja(t)})});break;case Va:if(Xt(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(t.chunk);break;case Ga:if(Xt(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),i($a,this,rs).call(this,s,e);break;case qa:Xt(s,"error should have stream controller"),s.controller.error(Ja(t.reason)),i($a,this,rs).call(this,s,e);break;case Ha:t.success?s.cancelCall.resolve():s.cancelCall.reject(Ja(t.reason)),i($a,this,rs).call(this,s,e);break;case Ua:if(!o)break;var l=Ja(t.reason);Promise.try(o.onCancel||Qa,l).then(function(){a.postMessage({sourceName:n,targetName:r,stream:Ha,streamId:e,success:!0})},function(t){a.postMessage({sourceName:n,targetName:r,stream:Ha,streamId:e,reason:Ja(t)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}function rs(t,e){return as.apply(this,arguments)}function as(){return(as=o(C().m(function t(e,n){var i,r,a;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.allSettled([null===(i=e.startCall)||void 0===i?void 0:i.promise,null===(r=e.pullCall)||void 0===r?void 0:r.promise,null===(a=e.cancelCall)||void 0===a?void 0:a.promise]);case 1:delete this.streamControllers[n];case 2:return t.a(2)}},t,this)}))).apply(this,arguments)}var ss=new WeakMap,os=function(){return y(function t(e){var n=e.enableHWA,i=void 0!==n&&n;c(this,t),d(this,ss,!1),f(ss,this,i)},[{key:"create",value:function(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");var n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!h(ss,this)})}}},{key:"reset",value:function(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}},{key:"destroy",value:function(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}},{key:"_createCanvas",value:function(t,e){qt("Abstract method `_createCanvas` called.")}}])}(),ls=function(t){function e(t){var n,i=t.ownerDocument,r=void 0===i?globalThis.document:i,a=t.enableHWA,s=void 0!==a&&a;return c(this,e),(n=l(this,e,[{enableHWA:s}]))._document=r,n}return _(e,t),y(e,[{key:"_createCanvas",value:function(t,e){var n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}])}(os),us=function(){return y(function t(e){var n=e.baseUrl,i=void 0===n?null:n,r=e.isCompressed,a=void 0===r||r;c(this,t),this.baseUrl=i,this.isCompressed=a},[{key:"fetch",value:(e=o(C().m(function t(e){var n,i,r=this;return C().w(function(t){for(;;)switch(t.n){case 0:if(n=e.name,this.baseUrl){t.n=1;break}throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");case 1:if(n){t.n=2;break}throw new Error("CMap name must be specified.");case 2:return i=this.baseUrl+n+(this.isCompressed?".bcmap":""),t.a(2,this._fetch(i).then(function(t){return{cMapData:t,isCompressed:r.isCompressed}}).catch(function(t){throw new Error("Unable to load ".concat(r.isCompressed?"binary ":"","CMap at: ").concat(i))}))}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_fetch",value:(t=o(C().m(function t(e){return C().w(function(t){for(;;)switch(t.n){case 0:qt("Abstract method `_fetch` called.");case 1:return t.a(2)}},t)})),function(e){return t.apply(this,arguments)})}]);var t,e}(),cs=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"_fetch",value:(n=o(C().m(function t(e){var n;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ke(e,this.isCompressed?"arraybuffer":"text");case 1:return n=t.v,t.a(2,n instanceof ArrayBuffer?new Uint8Array(n):ae(n))}},t,this)})),function(t){return n.apply(this,arguments)})}]);var n}(us);at(2489);var hs=function(){return y(function t(){c(this,t)},[{key:"addFilter",value:function(t){return"none"}},{key:"addHCMFilter",value:function(t,e){return"none"}},{key:"addAlphaFilter",value:function(t){return"none"}},{key:"addLuminosityFilter",value:function(t){return"none"}},{key:"addHighlightHCMFilter",value:function(t,e,n,i,r){return"none"}},{key:"destroy",value:function(){}}])}(),ds=new WeakMap,fs=new WeakMap,vs=new WeakMap,ps=new WeakMap,gs=new WeakMap,ys=new WeakMap,ms=new WeakMap,ws=new WeakSet,bs=function(t){function e(t){var n,i=t.docId,r=t.ownerDocument,a=void 0===r?globalThis.document:r;return c(this,e),p(n=l(this,e),ws),d(n,ds,void 0),d(n,fs,void 0),d(n,vs,void 0),d(n,ps,void 0),d(n,gs,void 0),d(n,ys,void 0),d(n,ms,0),f(ps,n,i),f(gs,n,a),n}return _(e,t),y(e,[{key:"addFilter",value:function(t){var e,n;if(!t)return"none";var r=v(ws,this,ks).get(t);if(r)return r;var a=P(i(ws,this,xs).call(this,t),3),s=a[0],o=a[1],l=a[2],u=1===t.length?s:"".concat(s).concat(o).concat(l);if(r=v(ws,this,ks).get(u))return v(ws,this,ks).set(t,r),r;var c="g_".concat(h(ps,this),"_transfer_map_").concat((f(ms,this,(e=h(ms,this),n=e++,e)),n)),d=i(ws,this,Ss).call(this,c);v(ws,this,ks).set(t,d),v(ws,this,ks).set(u,d);var p=i(ws,this,Cs).call(this,c);return i(ws,this,Ts).call(this,s,o,l,p),d}},{key:"addHCMFilter",value:function(t,e){var n,r,a="".concat(t,"-").concat(e),s="base",o=v(ws,this,_s).get(s);if((null===(n=o)||void 0===n?void 0:n.key)===a)return o.url;o?(null===(r=o.filter)||void 0===r||r.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},v(ws,this,_s).set(s,o));if(!t||!e)return o.url;var l=i(ws,this,Ps).call(this,t);t=le.makeHexColor.apply(le,O(l));var u=i(ws,this,Ps).call(this,e);if(e=le.makeHexColor.apply(le,O(u)),v(ws,this,As).style.color="","#000000"===t&&"#ffffff"===e||t===e)return o.url;for(var c=new Array(256),d=0;d<=255;d++){var f=d/255;c[d]=f<=.03928?f/12.92:Math.pow((f+.055)/1.055,2.4)}var p=c.join(","),g="g_".concat(h(ps,this),"_hcm_filter"),y=o.filter=i(ws,this,Cs).call(this,g);i(ws,this,Ts).call(this,p,p,p,y),i(ws,this,Ms).call(this,y);var m=function(t,e){for(var n=l[t]/255,i=u[t]/255,r=new Array(e+1),a=0;a<=e;a++)r[a]=n+a/e*(i-n);return r.join(",")};return i(ws,this,Ts).call(this,m(0,5),m(1,5),m(2,5),y),o.url=i(ws,this,Ss).call(this,g),o.url}},{key:"addAlphaFilter",value:function(t){var e,n,r=v(ws,this,ks).get(t);if(r)return r;var a=P(i(ws,this,xs).call(this,[t]),1)[0],s="alpha_".concat(a);if(r=v(ws,this,ks).get(s))return v(ws,this,ks).set(t,r),r;var o="g_".concat(h(ps,this),"_alpha_map_").concat((f(ms,this,(e=h(ms,this),n=e++,e)),n)),l=i(ws,this,Ss).call(this,o);v(ws,this,ks).set(t,l),v(ws,this,ks).set(s,l);var u=i(ws,this,Cs).call(this,o);return i(ws,this,Is).call(this,a,u),l}},{key:"addLuminosityFilter",value:function(t){var e,n,r,a,s=v(ws,this,ks).get(t||"luminosity");if(s)return s;t?(r=P(i(ws,this,xs).call(this,[t]),1)[0],a="luminosity_".concat(r)):a="luminosity";if(s=v(ws,this,ks).get(a))return v(ws,this,ks).set(t,s),s;var o="g_".concat(h(ps,this),"_luminosity_map_").concat((f(ms,this,(e=h(ms,this),n=e++,e)),n)),l=i(ws,this,Ss).call(this,o);v(ws,this,ks).set(t,l),v(ws,this,ks).set(a,l);var u=i(ws,this,Cs).call(this,o);return i(ws,this,Es).call(this,u),t&&i(ws,this,Is).call(this,r,u),l}},{key:"addHighlightHCMFilter",value:function(t,e,n,r,a){var s,o,l="".concat(e,"-").concat(n,"-").concat(r,"-").concat(a),u=v(ws,this,_s).get(t);if((null===(s=u)||void 0===s?void 0:s.key)===l)return u.url;u?(null===(o=u.filter)||void 0===o||o.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},v(ws,this,_s).set(t,u));if(!e||!n)return u.url;var c=P([e,n].map(i(ws,this,Ps).bind(this)),2),d=c[0],f=c[1],p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),y=P([r,a].map(i(ws,this,Ps).bind(this)),2),m=y[0],w=y[1];if(g<p){var b=[g,p,w,m];p=b[0],g=b[1],m=b[2],w=b[3]}v(ws,this,As).style.color="";var k=function(t,e,n){for(var i=new Array(256),r=(g-p)/n,a=t/255,s=(e-t)/(255*n),o=0,l=0;l<=n;l++){for(var u=Math.round(p+l*r),c=a+l*s,h=o;h<=u;h++)i[h]=c;o=u+1}for(var d=o;d<256;d++)i[d]=i[o-1];return i.join(",")},_="g_".concat(h(ps,this),"_hcm_").concat(t,"_filter"),A=u.filter=i(ws,this,Cs).call(this,_);return i(ws,this,Ms).call(this,A),i(ws,this,Ts).call(this,k(m[0],w[0],5),k(m[1],w[1],5),k(m[2],w[2],5),A),u.url=i(ws,this,Ss).call(this,_),u.url}},{key:"destroy",value:function(){var t,e,n,i;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(t=h(ys,this))&&void 0!==t&&t.size||(null===(e=h(vs,this))||void 0===e||e.parentNode.parentNode.remove(),f(vs,this,null),null===(n=h(fs,this))||void 0===n||n.clear(),f(fs,this,null),null===(i=h(ys,this))||void 0===i||i.clear(),f(ys,this,null),f(ms,this,0))}}])}(hs);function ks(t){return h(fs,t)||f(fs,t,new Map)}function _s(t){return h(ys,t)||f(ys,t,new Map)}function As(t){if(!h(vs,t)){var e=h(gs,t).createElement("div"),n=e.style;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;var i=h(gs,t).createElementNS(we,"svg");i.setAttribute("width",0),i.setAttribute("height",0),f(vs,t,h(gs,t).createElementNS(we,"defs")),e.append(i),i.append(h(vs,t)),h(gs,t).body.append(e)}return h(vs,t)}function xs(t){if(1===t.length){for(var e=t[0],n=new Array(256),i=0;i<256;i++)n[i]=e[i]/255;var r=n.join(",");return[r,r,r]}for(var a=P(t,3),s=a[0],o=a[1],l=a[2],u=new Array(256),c=new Array(256),h=new Array(256),d=0;d<256;d++)u[d]=s[d]/255,c[d]=o[d]/255,h[d]=l[d]/255;return[u.join(","),c.join(","),h.join(",")]}function Ss(t){if(void 0===h(ds,this)){f(ds,this,"");var e=h(gs,this).URL;e!==h(gs,this).baseURI&&(Se(e)?Vt('#createUrl: ignore "data:"-URL for performance reasons.'):f(ds,this,Kt(e,"")))}return"url(".concat(h(ds,this),"#").concat(t,")")}function Es(t){var e=h(gs,this).createElementNS(we,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}function Ms(t){var e=h(gs,this).createElementNS(we,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}function Cs(t){var e=h(gs,this).createElementNS(we,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),v(ws,this,As).append(e),e}function Rs(t,e,n){var i=h(gs,this).createElementNS(we,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}function Ts(t,e,n,r){var a=h(gs,this).createElementNS(we,"feComponentTransfer");r.append(a),i(ws,this,Rs).call(this,a,"feFuncR",t),i(ws,this,Rs).call(this,a,"feFuncG",e),i(ws,this,Rs).call(this,a,"feFuncB",n)}function Is(t,e){var n=h(gs,this).createElementNS(we,"feComponentTransfer");e.append(n),i(ws,this,Rs).call(this,n,"feFuncA",t)}function Ps(t){return v(ws,this,As).style.color=t,Fe(getComputedStyle(v(ws,this,As)).getPropertyValue("color"))}var Ds=function(){return y(function t(e){var n=e.baseUrl,i=void 0===n?null:n;c(this,t),this.baseUrl=i},[{key:"fetch",value:(e=o(C().m(function t(e){var n,i;return C().w(function(t){for(;;)switch(t.n){case 0:if(n=e.filename,this.baseUrl){t.n=1;break}throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");case 1:if(n){t.n=2;break}throw new Error("Font filename must be specified.");case 2:return i="".concat(this.baseUrl).concat(n),t.a(2,this._fetch(i).catch(function(t){throw new Error("Unable to load font data at: ".concat(i))}))}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_fetch",value:(t=o(C().m(function t(e){return C().w(function(t){for(;;)switch(t.n){case 0:qt("Abstract method `_fetch` called.");case 1:return t.a(2)}},t)})),function(e){return t.apply(this,arguments)})}]);var t,e}(),Ls=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"_fetch",value:(n=o(C().m(function t(e){var n;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ke(e,"arraybuffer");case 1:return n=t.v,t.a(2,new Uint8Array(n))}},t)})),function(t){return n.apply(this,arguments)})}]);var n}(Ds),Os=function(){return y(function t(e){var n=e.baseUrl,i=void 0===n?null:n;c(this,t),this.baseUrl=i},[{key:"fetch",value:(e=o(C().m(function t(e){var n,i;return C().w(function(t){for(;;)switch(t.n){case 0:if(n=e.filename,this.baseUrl){t.n=1;break}throw new Error("Ensure that the `wasmUrl` API parameter is provided.");case 1:if(n){t.n=2;break}throw new Error("Wasm filename must be specified.");case 2:return i="".concat(this.baseUrl).concat(n),t.a(2,this._fetch(i).catch(function(t){throw new Error("Unable to load wasm data at: ".concat(i))}))}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_fetch",value:(t=o(C().m(function t(e){return C().w(function(t){for(;;)switch(t.n){case 0:qt("Abstract method `_fetch` called.");case 1:return t.a(2)}},t)})),function(e){return t.apply(this,arguments)})}]);var t,e}(),Fs=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"_fetch",value:(n=o(C().m(function t(e){var n;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ke(e,"arraybuffer");case 1:return n=t.v,t.a(2,new Uint8Array(n))}},t)})),function(t){return n.apply(this,arguments)})}]);var n}(Os);if(st){var Ns,Ws,Bs,js,zs;try{var Us=process.getBuiltinModule("module").createRequire("");try{Ws=Us("@napi-rs/canvas")}catch(t){Vt('Cannot load "@napi-rs/canvas" package: "'.concat(t,'".'))}}catch(t){Vt('Cannot access the `require` function: "'.concat(t,'".'))}if(!globalThis.DOMMatrix)null!==(Bs=Ws)&&void 0!==Bs&&Bs.DOMMatrix?globalThis.DOMMatrix=Ws.DOMMatrix:Vt("Cannot polyfill `DOMMatrix`, rendering may be broken.");if(!globalThis.ImageData)null!==(js=Ws)&&void 0!==js&&js.ImageData?globalThis.ImageData=Ws.ImageData:Vt("Cannot polyfill `ImageData`, rendering may be broken.");if(!globalThis.Path2D)null!==(zs=Ws)&&void 0!==zs&&zs.Path2D?globalThis.Path2D=Ws.Path2D:Vt("Cannot polyfill `Path2D`, rendering may be broken.");null!==(Ns=globalThis.navigator)&&void 0!==Ns&&Ns.language||(globalThis.navigator={language:"en-US",platform:"",userAgent:""})}function Hs(t){return Gs.apply(this,arguments)}function Gs(){return(Gs=o(C().m(function t(e){var n,i;return C().w(function(t){for(;;)switch(t.n){case 0:return n=process.getBuiltinModule("fs"),t.n=1,n.promises.readFile(e);case 1:return i=t.v,t.a(2,new Uint8Array(i))}},t)}))).apply(this,arguments)}var Vs=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e)}(hs),qs=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"_createCanvas",value:function(t,e){return process.getBuiltinModule("module").createRequire("")("@napi-rs/canvas").createCanvas(t,e)}}])}(os),Xs=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"_fetch",value:(n=o(C().m(function t(e){return C().w(function(t){for(;;)if(0===t.n)return t.a(2,Hs(e))},t)})),function(t){return n.apply(this,arguments)})}]);var n}(us),Ys=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"_fetch",value:(n=o(C().m(function t(e){return C().w(function(t){for(;;)if(0===t.n)return t.a(2,Hs(e))},t)})),function(t){return n.apply(this,arguments)})}]);var n}(Ds),Ks=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"_fetch",value:(n=o(C().m(function t(e){return C().w(function(t){for(;;)if(0===t.n)return t.a(2,Hs(e))},t)})),function(t){return n.apply(this,arguments)})}]);var n}(Os),Qs="Fill",Js="Stroke",Zs="Shading";function $s(t,e){if(e){var n=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],n,i),t.clip(r)}}var to=function(){return y(function t(){c(this,t)},[{key:"isModifyingCurrentTransform",value:function(){return!1}},{key:"getPattern",value:function(){qt("Abstract method `getPattern` called.")}}])}(),eo=function(t){function e(t){var n;return c(this,e),(n=l(this,e))._type=t[1],n._bbox=t[2],n._colorStops=t[3],n._p0=t[4],n._p1=t[5],n._r0=t[6],n._r1=t[7],n.matrix=null,n}return _(e,t),y(e,[{key:"_createGradient",value:function(t){var e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var n,i=m(this._colorStops);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.addColorStop(r[0],r[1])}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"getPattern",value:function(t,e,n,i){var r;if(i===Js||i===Qs){var a=e.current.getClippedPathBoundingBox(i,Ne(t))||[0,0,0,0],s=Math.ceil(a[2]-a[0])||1,o=Math.ceil(a[3]-a[1])||1,l=e.cachedCanvases.getCanvas("pattern",s,o),u=l.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),n=le.transform(n,[1,0,0,1,a[0],a[1]]),u.transform.apply(u,O(e.baseTransform)),this.matrix&&u.transform.apply(u,O(this.matrix)),$s(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(l.canvas,"no-repeat");var c=new DOMMatrix(n);r.setTransform(c)}else $s(t,this._bbox),r=this._createGradient(t);return r}}])}(to);function no(t,e,n,i,r,a,s,o){var l,u=e.coords,c=e.colors,h=t.data,d=4*t.width;u[n+1]>u[i+1]&&(l=n,n=i,i=l,l=a,a=s,s=l),u[i+1]>u[r+1]&&(l=i,i=r,r=l,l=s,s=o,o=l),u[n+1]>u[i+1]&&(l=n,n=i,i=l,l=a,a=s,s=l);var f=(u[n]+e.offsetX)*e.scaleX,v=(u[n+1]+e.offsetY)*e.scaleY,p=(u[i]+e.offsetX)*e.scaleX,g=(u[i+1]+e.offsetY)*e.scaleY,y=(u[r]+e.offsetX)*e.scaleX,m=(u[r+1]+e.offsetY)*e.scaleY;if(!(v>=m))for(var w,b,k,_,A,x,S,E,M=c[a],C=c[a+1],R=c[a+2],T=c[s],I=c[s+1],P=c[s+2],D=c[o],L=c[o+1],O=c[o+2],F=Math.round(v),N=Math.round(m),W=F;W<=N;W++){if(W<g){var B=W<v?0:(v-W)/(v-g);w=f-(f-p)*B,b=M-(M-T)*B,k=C-(C-I)*B,_=R-(R-P)*B}else{var j=void 0;w=p-(p-y)*(j=W>m?1:g===m?0:(g-W)/(g-m)),b=T-(T-D)*j,k=I-(I-L)*j,_=P-(P-O)*j}var z=void 0;A=f-(f-y)*(z=W<v?0:W>m?1:(v-W)/(v-m)),x=M-(M-D)*z,S=C-(C-L)*z,E=R-(R-O)*z;for(var U=Math.round(Math.min(w,A)),H=Math.round(Math.max(w,A)),G=d*W+4*U,V=U;V<=H;V++)(z=(w-V)/(w-A))<0?z=0:z>1&&(z=1),h[G++]=b-(b-x)*z|0,h[G++]=k-(k-S)*z|0,h[G++]=_-(_-E)*z|0,h[G++]=255}}function io(t,e,n){var i,r,a=e.coords,s=e.colors;switch(e.type){case"lattice":var o=e.verticesPerRow,l=Math.floor(a.length/o)-1,u=o-1;for(i=0;i<l;i++)for(var c=i*o,h=0;h<u;h++,c++)no(t,n,a[c],a[c+1],a[c+o],s[c],s[c+1],s[c+o]),no(t,n,a[c+o+1],a[c+1],a[c+o],s[c+o+1],s[c+1],s[c+o]);break;case"triangles":for(i=0,r=a.length;i<r;i+=3)no(t,n,a[i],a[i+1],a[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}var ro=function(t){function e(t){var n;return c(this,e),(n=l(this,e))._coords=t[2],n._colors=t[3],n._figures=t[4],n._bounds=t[5],n._bbox=t[6],n._background=t[7],n.matrix=null,n}return _(e,t),y(e,[{key:"_createMeshCanvas",value:function(t,e,n){var i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-i,s=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(a*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(s*t[1]*1.1)),3e3),u=a/o,c=s/l,h={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/u,scaleY:1/c},d=o+4,f=l+4,v=n.getCanvas("mesh",d,f),p=v.context,g=p.createImageData(o,l);if(e)for(var y=g.data,w=0,b=y.length;w<b;w+=4)y[w]=e[0],y[w+1]=e[1],y[w+2]=e[2],y[w+3]=255;var k,_=m(this._figures);try{for(_.s();!(k=_.n()).done;){io(g,k.value,h)}}catch(t){_.e(t)}finally{_.f()}return p.putImageData(g,2,2),{canvas:v.canvas,offsetX:i-2*u,offsetY:r-2*c,scaleX:u,scaleY:c}}},{key:"isModifyingCurrentTransform",value:function(){return!0}},{key:"getPattern",value:function(t,e,n,i){$s(t,this._bbox);var r=new Float32Array(2);if(i===Zs)le.singularValueDecompose2dScale(Ne(t),r);else if(this.matrix){le.singularValueDecompose2dScale(this.matrix,r);var a=P(r,2),s=a[0],o=a[1];le.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=s,r[1]*=o}else le.singularValueDecompose2dScale(e.baseTransform,r);var l=this._createMeshCanvas(r,i===Zs?null:this._background,e.cachedCanvases);return i!==Zs&&(t.setTransform.apply(t,O(e.baseTransform)),this.matrix&&t.transform.apply(t,O(this.matrix))),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}])}(to),ao=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"getPattern",value:function(){return"hotpink"}}])}(to);var so=1,oo=2,lo=function(){function t(e,n,i,r){c(this,t),this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}return y(t,[{key:"createPatternCanvas",value:function(t){var e=this.bbox,n=this.operatorList,i=this.paintType,r=this.tilingType,a=this.color,s=this.canvasGraphicsFactory,o=this.xstep,l=this.ystep;o=Math.abs(o),l=Math.abs(l),Gt("TilingType: "+r);var u=e[0],c=e[1],h=e[2],d=e[3],f=h-u,v=d-c,p=new Float32Array(2);le.singularValueDecompose2dScale(this.matrix,p);var g=P(p,2),y=g[0],m=g[1];le.singularValueDecompose2dScale(this.baseTransform,p);var w=y*p[0],b=m*p[1],k=f,_=v,A=!1,x=!1,S=Math.ceil(o*w),E=Math.ceil(l*b);S>=Math.ceil(f*w)?k=o:A=!0,E>=Math.ceil(v*b)?_=l:x=!0;var M=this.getSizeAndScale(k,this.ctx.canvas.width,w),C=this.getSizeAndScale(_,this.ctx.canvas.height,b),R=t.cachedCanvases.getCanvas("pattern",M.size,C.size),T=R.context,I=s.createCanvasGraphics(T);if(I.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(I,i,a),T.translate(-M.scale*u,-C.scale*c),I.transform(M.scale,0,0,C.scale,0,0),T.save(),this.clipBbox(I,u,c,h,d),I.baseTransform=Ne(I.ctx),I.executeOperatorList(n),I.endDrawing(),T.restore(),A||x){var D=R.canvas;A&&(k=o),x&&(_=l);for(var L=this.getSizeAndScale(k,this.ctx.canvas.width,w),O=this.getSizeAndScale(_,this.ctx.canvas.height,b),F=L.size,N=O.size,W=t.cachedCanvases.getCanvas("pattern-workaround",F,N),B=W.context,j=A?Math.floor(f/o):0,z=x?Math.floor(v/l):0,U=0;U<=j;U++)for(var H=0;H<=z;H++)B.drawImage(D,F*U,N*H,F,N,0,0,F,N);return{canvas:W.canvas,scaleX:L.scale,scaleY:O.scale,offsetX:u,offsetY:c}}return{canvas:R.canvas,scaleX:M.scale,scaleY:C.scale,offsetX:u,offsetY:c}}},{key:"getSizeAndScale",value:function(e,n,i){var r=Math.max(t.MAX_PATTERN_SIZE,n),a=Math.ceil(e*i);return a>=r?a=r:i=a/e,{scale:i,size:a}}},{key:"clipBbox",value:function(t,e,n,i,r){var a=i-e,s=r-n;t.ctx.rect(e,n,a,s),le.axialAlignedBoundingBox([e,n,i,r],Ne(t.ctx),t.current.minMax),t.clip(),t.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(t,e,n){var i=t.ctx,r=t.current;switch(e){case so:var a=this.ctx,s=a.fillStyle,o=a.strokeStyle;i.fillStyle=r.fillColor=s,i.strokeStyle=r.strokeColor=o;break;case oo:i.fillStyle=i.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new ne("Unsupported paint type: ".concat(e))}}},{key:"isModifyingCurrentTransform",value:function(){return!1}},{key:"getPattern",value:function(t,e,n,i){var r=n;i!==Zs&&(r=le.transform(r,e.baseTransform),this.matrix&&(r=le.transform(r,this.matrix)));var a=this.createPatternCanvas(e),s=new DOMMatrix(r);s=(s=s.translate(a.offsetX,a.offsetY)).scale(1/a.scaleX,1/a.scaleY);var o=t.createPattern(a.canvas,"repeat");return o.setTransform(s),o}}])}();function uo(t){var e=t.src,n=t.srcPos,i=void 0===n?0:n,r=t.dest,a=t.width,s=t.height,o=t.nonBlackColor,l=void 0===o?4294967295:o,u=t.inverseDecode,c=void 0!==u&&u,h=se.isLittleEndian?4278190080:255,d=P(c?[l,h]:[h,l],2),f=d[0],v=d[1],p=a>>3,g=7&a,y=e.length;r=new Uint32Array(r.buffer);for(var m=0,w=0;w<s;w++){for(var b=i+p;i<b;i++){var k=i<y?e[i]:255;r[m++]=128&k?v:f,r[m++]=64&k?v:f,r[m++]=32&k?v:f,r[m++]=16&k?v:f,r[m++]=8&k?v:f,r[m++]=4&k?v:f,r[m++]=2&k?v:f,r[m++]=1&k?v:f}if(0!==g)for(var _=i<y?e[i++]:255,A=0;A<g;A++)r[m++]=_&1<<7-A?v:f}return{srcPos:i,destPos:m}}w(lo,"MAX_PATTERN_SIZE",3e3);var co=16,ho=new DOMMatrix,fo=new Float32Array(2),vo=new Float32Array([1/0,1/0,-1/0,-1/0]);var po=function(){return y(function t(e){c(this,t),this.canvasFactory=e,this.cache=Object.create(null)},[{key:"getCanvas",value:function(t,e,n){var i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}},{key:"delete",value:function(t){delete this.cache[t]}},{key:"clear",value:function(){for(var t in this.cache){var e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}])}();function go(t,e,n,i,r,a,s,o,l,u){var c=P(Ne(t),6),h=c[0],d=c[1],f=c[2],v=c[3],p=c[4],g=c[5];if(0===d&&0===f){var y=s*h+p,m=Math.round(y),w=o*v+g,b=Math.round(w),k=(s+l)*h+p,_=Math.abs(Math.round(k)-m)||1,A=(o+u)*v+g,x=Math.abs(Math.round(A)-b)||1;return t.setTransform(Math.sign(h),0,0,Math.sign(v),m,b),t.drawImage(e,n,i,r,a,0,0,_,x),t.setTransform(h,d,f,v,p,g),[_,x]}if(0===h&&0===v){var S=o*f+p,E=Math.round(S),M=s*d+g,C=Math.round(M),R=(o+u)*f+p,T=Math.abs(Math.round(R)-E)||1,I=(s+l)*d+g,D=Math.abs(Math.round(I)-C)||1;return t.setTransform(0,Math.sign(d),Math.sign(f),0,E,C),t.drawImage(e,n,i,r,a,0,0,D,T),t.setTransform(h,d,f,v,p,g),[D,T]}return t.drawImage(e,n,i,r,a,s,o,l,u),[Math.hypot(h,d)*l,Math.hypot(f,v)*u]}var yo=function(){return y(function t(e,n){c(this,t),w(this,"alphaIsShape",!1),w(this,"fontSize",0),w(this,"fontSizeScale",1),w(this,"textMatrix",null),w(this,"textMatrixScale",1),w(this,"fontMatrix",ot),w(this,"leading",0),w(this,"x",0),w(this,"y",0),w(this,"lineX",0),w(this,"lineY",0),w(this,"charSpacing",0),w(this,"wordSpacing",0),w(this,"textHScale",1),w(this,"textRenderingMode",kt),w(this,"textRise",0),w(this,"fillColor","#000000"),w(this,"strokeColor","#000000"),w(this,"patternFill",!1),w(this,"patternStroke",!1),w(this,"fillAlpha",1),w(this,"strokeAlpha",1),w(this,"lineWidth",1),w(this,"activeSMask",null),w(this,"transferMaps","none"),this.clipBox=new Float32Array([0,0,e,n]),this.minMax=vo.slice()},[{key:"clone",value:function(){var t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}},{key:"getPathBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qs,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.minMax.slice();if(t===Js){e||qt("Stroke bounding box must include transform."),le.singularValueDecompose2dScale(e,fo);var i=fo[0]*this.lineWidth/2,r=fo[1]*this.lineWidth/2;n[0]-=i,n[1]-=r,n[2]+=i,n[3]+=r}return n}},{key:"updateClipFromPath",value:function(){var t=le.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}},{key:"isEmptyClip",value:function(){return this.minMax[0]===1/0}},{key:"startNewPathAndClipBox",value:function(t){this.clipBox.set(t,0),this.minMax.set(vo,0)}},{key:"getClippedPathBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qs,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return le.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}])}();function mo(t,e){if(e instanceof ImageData)t.putImageData(e,0,0);else{var n,i,r,a,s,o=e.height,l=e.width,u=o%co,c=(o-u)/co,h=0===u?c:c+1,d=t.createImageData(l,co),f=0,v=e.data,p=d.data;if(e.kind===Mt.GRAYSCALE_1BPP){var g=v.byteLength,y=new Uint32Array(p.buffer,0,p.byteLength>>2),m=y.length,w=l+7>>3,b=4294967295,k=se.isLittleEndian?4278190080:255;for(i=0;i<h;i++){for(a=i<c?co:u,n=0,r=0;r<a;r++){for(var _=g-f,A=0,x=_>w?l:8*_-7,S=-8&x,E=0,M=0;A<S;A+=8)M=v[f++],y[n++]=128&M?b:k,y[n++]=64&M?b:k,y[n++]=32&M?b:k,y[n++]=16&M?b:k,y[n++]=8&M?b:k,y[n++]=4&M?b:k,y[n++]=2&M?b:k,y[n++]=1&M?b:k;for(;A<x;A++)0===E&&(M=v[f++],E=128),y[n++]=M&E?b:k,E>>=1}for(;n<m;)y[n++]=0;t.putImageData(d,0,i*co)}}else if(e.kind===Mt.RGBA_32BPP){for(r=0,s=l*co*4,i=0;i<c;i++)p.set(v.subarray(f,f+s)),f+=s,t.putImageData(d,0,r),r+=co;i<h&&(s=l*u*4,p.set(v.subarray(f,f+s)),t.putImageData(d,0,r))}else{if(e.kind!==Mt.RGB_24BPP)throw new Error("bad image kind: ".concat(e.kind));for(s=l*(a=co),i=0;i<h;i++){for(i>=c&&(s=l*(a=u)),n=0,r=s;r--;)p[n++]=v[f++],p[n++]=v[f++],p[n++]=v[f++],p[n++]=255;t.putImageData(d,0,i*co)}}}}function wo(t,e){if(e.bitmap)t.drawImage(e.bitmap,0,0);else for(var n=e.height,i=e.width,r=n%co,a=(n-r)/co,s=0===r?a:a+1,o=t.createImageData(i,co),l=0,u=e.data,c=o.data,h=0;h<s;h++){l=uo({src:u,srcPos:l,dest:c,width:i,height:h<a?co:r,nonBlackColor:0}).srcPos,t.putImageData(o,0,h*co)}}function bo(t,e){for(var n=0,i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];n<i.length;n++){var r=i[n];void 0!==t[r]&&(e[r]=t[r])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function ko(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0);var e=t.filter;"none"!==e&&""!==e&&(t.filter="none")}function _o(t,e){if(e)return!0;le.singularValueDecompose2dScale(t,fo);var n=Math.fround(je.pixelRatio*be.PDF_TO_CSS_UNITS);return fo[0]<=n&&fo[1]<=n}var Ao=["butt","round","square"],xo=["miter","round","bevel"],So={},Eo={},Mo=new WeakSet,Co=function(){function t(e,n,i,r,a,s,o,l){var u=s.optionalContentConfig,h=s.markedContentStack,d=void 0===h?null:h;c(this,t),p(this,Mo),this.ctx=e,this.current=new yo(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=i,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=u,this.cachedCanvases=new po(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}return y(t,[{key:"getObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}},{key:"beginDrawing",value:function(t){var e,n,i=t.transform,r=t.viewport,a=t.transparency,s=void 0!==a&&a,o=t.background,l=void 0===o?null:o,u=this.ctx.canvas.width,c=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=l||"#ffffff",this.ctx.fillRect(0,0,u,c),this.ctx.fillStyle=h,s){var d,f=this.cachedCanvases.getCanvas("transparent",u,c);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),(d=this.ctx).transform.apply(d,O(Ne(this.compositeCtx)))}(this.ctx.save(),ko(this.ctx),i)&&((n=this.ctx).transform.apply(n,O(i)),this.outputScaleX=i[0],this.outputScaleY=i[0]);(e=this.ctx).transform.apply(e,O(r.transform)),this.viewportScale=r.scale,this.baseTransform=Ne(this.ctx)}},{key:"executeOperatorList",value:function(t,e,n,i){var r=t.argsArray,a=t.fnArray,s=e||0,o=r.length;if(o===s)return s;for(var l,u=o-s>10&&"function"==typeof n,c=u?Date.now()+15:0,h=0,d=this.commonObjs,f=this.objs;;){if(void 0!==i&&s===i.nextBreakPoint)return i.breakIt(s,n),s;if((l=a[s])!==Ot.dependency)this[l].apply(this,r[s]);else{var v,p=m(r[s]);try{for(p.s();!(v=p.n()).done;){var g=v.value,y=g.startsWith("g_")?d:f;if(!y.has(g))return y.get(g,n),s}}catch(t){p.e(t)}finally{p.f()}}if(++s===o)return s;if(u&&++h>10){if(Date.now()>c)return n(),s;h=0}}}},{key:"endDrawing",value:function(){i(Mo,this,Ro).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();var t,e=m(this._cachedBitmapsMap.values());try{for(e.s();!(t=e.n()).done;){var n,r=t.value,a=m(r.values());try{for(a.s();!(n=a.n()).done;){var s=n.value;"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement&&(s.width=s.height=0)}}catch(t){a.e(t)}finally{a.f()}r.clear()}}catch(t){e.e(t)}finally{e.f()}this._cachedBitmapsMap.clear(),i(Mo,this,To).call(this)}},{key:"_scaleImage",value:function(t,e){for(var n,i,r,a,s=null!==(n=t.width)&&void 0!==n?n:t.displayWidth,o=null!==(i=t.height)&&void 0!==i?i:t.displayHeight,l=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),c=s,h=o,d="prescale1";l>2&&c>1||u>2&&h>1;){var f=c,v=h;l>2&&c>1&&(l/=c/(f=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2))),u>2&&h>1&&(u/=h/(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2)),(a=(r=this.cachedCanvases.getCanvas(d,f,v)).context).clearRect(0,0,f,v),a.drawImage(t,0,0,c,h,0,0,f,v),t=r.canvas,c=f,h=v,d="prescale1"===d?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:h}}},{key:"_createMaskCanvas",value:function(t){var e,n,i,r,a=this.ctx,s=t.width,o=t.height,l=this.current.fillColor,u=this.current.patternFill,c=Ne(a);if((t.bitmap||t.data)&&t.count>1){var h=t.bitmap||t.data.buffer;n=JSON.stringify(u?c:[c.slice(0,4),l]),(e=this._cachedBitmapsMap.get(h))||(e=new Map,this._cachedBitmapsMap.set(h,e));var d=e.get(n);if(d&&!u)return{canvas:d,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};i=d}i||wo((r=this.cachedCanvases.getCanvas("maskCanvas",s,o)).context,t);var f=le.transform(c,[1/s,0,0,-1/o,0,0]);f=le.transform(f,[1,0,0,1,0,-o]);var v=vo.slice();le.axialAlignedBoundingBox([0,0,s,o],f,v);var p=P(v,4),g=p[0],y=p[1],m=p[2],w=p[3],b=Math.round(m-g)||1,k=Math.round(w-y)||1,_=this.cachedCanvases.getCanvas("fillCanvas",b,k),A=_.context,x=g,S=y;A.translate(-x,-S),A.transform.apply(A,O(f)),i||(i=(i=this._scaleImage(r.canvas,We(A))).img,e&&u&&e.set(n,i)),A.imageSmoothingEnabled=_o(Ne(A),t.interpolate),go(A,i,0,0,i.width,i.height,0,0,s,o),A.globalCompositeOperation="source-in";var E=le.transform(We(A),[1,0,0,1,-x,-S]);return A.fillStyle=u?l.getPattern(a,this,E,Qs):l,A.fillRect(0,0,s,o),e&&!u&&(this.cachedCanvases.delete("fillCanvas"),e.set(n,_.canvas)),{canvas:_.canvas,offsetX:Math.round(x),offsetY:Math.round(S)}}},{key:"setLineWidth",value:function(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}},{key:"setLineCap",value:function(t){this.ctx.lineCap=Ao[t]}},{key:"setLineJoin",value:function(t){this.ctx.lineJoin=xo[t]}},{key:"setMiterLimit",value:function(t){this.ctx.miterLimit=t}},{key:"setDash",value:function(t,e){var n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)}},{key:"setRenderingIntent",value:function(t){}},{key:"setFlatness",value:function(t){}},{key:"setGState",value:function(t){var e,n=m(t);try{for(n.s();!(e=n.n()).done;){var i=P(e.value,2),r=i[0],a=i[1];switch(r){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=a;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a)}}}catch(t){n.e(t)}finally{n.f()}}},{key:"inSMaskMode",get:function(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function(){var t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;var r=this.ctx=i.context;r.setTransform(this.suspendedCtx.getTransform()),bo(this.suspendedCtx,r),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=function(){t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},t.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},t.transform=function(t,n,i,r,a,s){e.transform(t,n,i,r,a,s),this.__originalTransform(t,n,i,r,a,s)},t.setTransform=function(t,n,i,r,a,s){e.setTransform(t,n,i,r,a,s),this.__originalSetTransform(t,n,i,r,a,s)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},t.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},t.bezierCurveTo=function(t,n,i,r,a,s){e.bezierCurveTo(t,n,i,r,a,s),this.__originalBezierCurveTo(t,n,i,r,a,s)},t.rect=function(t,n,i,r){e.rect(t,n,i,r),this.__originalRect(t,n,i,r)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}},{key:"endSMaskMode",value:function(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),bo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}},{key:"compose",value:function(t){if(this.current.activeSMask){t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"composeSMask",value:function(t,e,n,i){var r=i[0],a=i[1],s=i[2]-r,o=i[3]-a;0!==s&&0!==o&&(this.genericComposeSMask(e.context,n,s,o,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}},{key:"genericComposeSMask",value:function(t,e,n,i,r,a,s,o,l,u,c){var h=t.canvas,d=o-u,f=l-c;if(a)if(d<0||f<0||d+n>h.width||f+i>h.height){var v=this.cachedCanvases.getCanvas("maskExtension",n,i),p=v.context;p.drawImage(h,-d,-f),p.globalCompositeOperation="destination-atop",p.fillStyle=a,p.fillRect(0,0,n,i),p.globalCompositeOperation="source-over",h=v.canvas,d=f=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);var g=new Path2D;g.rect(d,f,n,i),t.clip(g),t.globalCompositeOperation="destination-atop",t.fillStyle=a,t.fillRect(d,f,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===r&&s?e.filter=this.filterFactory.addAlphaFilter(s):"Luminosity"===r&&(e.filter=this.filterFactory.addLuminosityFilter(s));var y=new Path2D;y.rect(o,l,n,i),e.clip(y),e.globalCompositeOperation="destination-in",e.drawImage(h,d,f,n,i,o,l,n,i),e.restore()}},{key:"save",value:function(){this.inSMaskMode&&bo(this.ctx,this.suspendedCtx),this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone()}},{key:"restore",value:function(){0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&bo(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}},{key:"transform",value:function(t,e,n,i,r,a){this.ctx.transform(t,e,n,i,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(t,e,n){var i=P(e,1)[0];if(!n)return i||(i=e[0]=new Path2D),void this[t](i);if(!(i instanceof Path2D)){for(var r=e[0]=new Path2D,a=0,s=i.length;a<s;)switch(i[a++]){case Ft:r.moveTo(i[a++],i[a++]);break;case Nt:r.lineTo(i[a++],i[a++]);break;case Wt:r.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case Bt:r.closePath();break;default:Vt("Unrecognized drawing path operator: ".concat(i[a-1]))}i=r}le.axialAlignedBoundingBox(n,Ne(this.ctx),this.current.minMax),this[t](i)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.ctx,i=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===W(i)&&null!=i&&i.getPattern){var r=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=i.getPattern(n,this,We(n),Js),r){var a=new Path2D;a.addPath(t,n.getTransform().invertSelf().multiplySelf(r)),t=a}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Js,Ne(this.ctx))),n.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(t){this.stroke(t)}},{key:"fill",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.ctx,i=this.current.fillColor,r=!1;if(this.current.patternFill){var a=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=i.getPattern(n,this,We(n),Qs),a){var s=new Path2D;s.addPath(t,n.getTransform().invertSelf().multiplySelf(a)),t=s}r=!0}var o=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==o&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),r&&n.restore(),e&&this.consumePath(t,o)}},{key:"eoFill",value:function(t){this.pendingEOFill=!0,this.fill(t)}},{key:"fillStroke",value:function(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}},{key:"eoFillStroke",value:function(t){this.pendingEOFill=!0,this.fillStroke(t)}},{key:"closeFillStroke",value:function(t){this.fillStroke(t)}},{key:"closeEOFillStroke",value:function(t){this.pendingEOFill=!0,this.fillStroke(t)}},{key:"endPath",value:function(t){this.consumePath(t)}},{key:"rawFillPath",value:function(t){this.ctx.fill(t)}},{key:"clip",value:function(){this.pendingClip=So}},{key:"eoClip",value:function(){this.pendingClip=Eo}},{key:"beginText",value:function(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){var n,i=new Path2D,r=e.getTransform().invertSelf(),a=m(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=s.transform,l=s.x,u=s.y,c=s.fontSize,h=s.path;i.addPath(h,new DOMMatrix(o).preMultiplySelf(r).translate(l,u).scale(c,-c))}}catch(t){a.e(t)}finally{a.f()}e.clip(i),delete this.pendingTextPaths}}},{key:"setCharSpacing",value:function(t){this.current.charSpacing=t}},{key:"setWordSpacing",value:function(t){this.current.wordSpacing=t}},{key:"setHScale",value:function(t){this.current.textHScale=t/100}},{key:"setLeading",value:function(t){this.current.leading=-t}},{key:"setFont",value:function(t,e){var n,i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error("Can't find font for ".concat(t));if(r.fontMatrix=i.fontMatrix||ot,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||Vt("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,!i.isType3Font){var a=i.loadedName||"sans-serif",s=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(a,'", ').concat(i.fallbackName),o="normal";i.black?o="900":i.bold&&(o="bold");var l=i.italic?"italic":"normal",u=e;e<16?u=16:e>100&&(u=100),this.current.fontSizeScale=e/u,this.ctx.font="".concat(l," ").concat(o," ").concat(u,"px ").concat(s)}}},{key:"setTextRenderingMode",value:function(t){this.current.textRenderingMode=t}},{key:"setTextRise",value:function(t){this.current.textRise=t}},{key:"moveText",value:function(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}},{key:"setLeadingMoveText",value:function(t,e){this.setLeading(-e),this.moveText(t,e)}},{key:"setTextMatrix",value:function(t){var e=this.current;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(t,e,n,r,a){var s,o=this.ctx,l=this.current,u=l.font,c=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,d=c&St,f=!!(c&Et),v=l.patternFill&&!u.missingFile,p=l.patternStroke&&!u.missingFile;if((u.disableFontFace||f||v||p)&&(s=u.getPathGenerator(this.commonObjs,t)),u.disableFontFace||v||p){var g;if(o.save(),o.translate(e,n),o.scale(h,-h),d!==kt&&d!==At||(r?(g=o.getTransform(),o.setTransform.apply(o,O(r)),o.fill(i(Mo,this,Io).call(this,s,g,r))):o.fill(s)),d===_t||d===At)if(a){g||(g=o.getTransform()),o.setTransform.apply(o,O(a));var y=g,m=y.a,w=y.b,b=y.c,k=y.d,_=le.inverseTransform(a),A=le.transform([m,w,b,k,0,0],_);le.singularValueDecompose2dScale(A,fo),o.lineWidth*=Math.max(fo[0],fo[1])/h,o.stroke(i(Mo,this,Io).call(this,s,g,a))}else o.lineWidth/=h,o.stroke(s);o.restore()}else d!==kt&&d!==At||o.fillText(t,e,n),d!==_t&&d!==At||o.strokeText(t,e,n);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ne(o),x:e,y:n,fontSize:h,path:s})}},{key:"isFontSubpixelAAEnabled",get:function(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;t.scale(1.5,1),t.fillText("I",0,10);for(var e=t.getImageData(0,0,10,10).data,n=!1,i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Qt(this,"isFontSubpixelAAEnabled",n)}},{key:"showText",value:function(t){var e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);var i=e.fontSize;if(0!==i){var r,a,s=this.ctx,o=e.fontSizeScale,l=e.charSpacing,u=e.wordSpacing,c=e.fontDirection,h=e.textHScale*c,d=t.length,f=n.vertical,v=f?1:-1,p=n.defaultVMetrics,g=i*e.fontMatrix[0],y=e.textRenderingMode===kt&&!n.disableFontFace&&!e.patternFill;if(s.save(),e.textMatrix&&s.transform.apply(s,O(e.textMatrix)),s.translate(e.x,e.y+e.textRise),c>0?s.scale(h,-1):s.scale(h,1),e.patternFill){s.save();var w=e.fillColor.getPattern(s,this,We(s),Qs);r=Ne(s),s.restore(),s.fillStyle=w}if(e.patternStroke){s.save();var b=e.strokeColor.getPattern(s,this,We(s),Js);a=Ne(s),s.restore(),s.strokeStyle=b}var k=e.lineWidth,_=e.textMatrixScale;if(0===_||0===k){var A=e.textRenderingMode&St;A!==_t&&A!==At||(k=this.getSinglePixelWidth())}else k/=_;if(1!==o&&(s.scale(o,o),k/=o),s.lineWidth=k,n.isInvalidPDFjsFont){var x,S=[],E=0,M=m(t);try{for(M.s();!(x=M.n()).done;){var C=x.value;S.push(C.unicode),E+=C.width}}catch(t){M.e(t)}finally{M.f()}return s.fillText(S.join(""),0,0),e.x+=E*g*h,s.restore(),void this.compose()}var R,T=0;for(R=0;R<d;++R){var I=t[R];if("number"!=typeof I){var P=!1,D=(I.isSpace?u:0)+l,L=I.fontChar,F=I.accent,N=void 0,W=void 0,B=I.width;if(f){var j=I.vmetric||p,z=-(I.vmetric?j[1]:.5*B)*g,U=j[2]*g;B=j?-j[0]:B,N=z/o,W=(T+U)/o}else N=T/o,W=0;if(n.remeasure&&B>0){var H=1e3*s.measureText(L).width/i*o;if(B<H&&this.isFontSubpixelAAEnabled){var G=B/H;P=!0,s.save(),s.scale(G,1),N/=G}else B!==H&&(N+=(B-H)/2e3*i/o)}if(this.contentVisible&&(I.isInFont||n.missingFile))if(y&&!F)s.fillText(L,N,W);else if(this.paintChar(L,N,W,r,a),F){var V=N+i*F.offset.x/o,q=W-i*F.offset.y/o;this.paintChar(F.fontChar,V,q,r,a)}T+=f?B*g-D*c:B*g+D*c,P&&s.restore()}else T+=v*I*i/1e3}f?e.y-=T:e.x+=T*h,s.restore(),this.compose()}}},{key:"showType3Text",value:function(t){var e,n,i,r,a=this.ctx,s=this.current,o=s.font,l=s.fontSize,u=s.fontDirection,c=o.vertical?1:-1,h=s.charSpacing,d=s.wordSpacing,f=s.textHScale*u,v=s.fontMatrix||ot,p=t.length;if(!(s.textRenderingMode===xt)&&0!==l){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),s.textMatrix&&a.transform.apply(a,O(s.textMatrix)),a.translate(s.x,s.y+s.textRise),a.scale(f,u),e=0;e<p;++e)if("number"!=typeof(n=t[e])){var g=(n.isSpace?d:0)+h,y=o.charProcOperatorList[n.operatorListId];y?this.contentVisible&&(this.save(),a.scale(l,l),a.transform.apply(a,O(v)),this.executeOperatorList(y),this.restore()):Vt('Type3 character "'.concat(n.operatorListId,'" is not available.'));var m=[n.width,0];le.applyTransform(m,v),i=m[0]*l+g,a.translate(i,0),s.x+=i*f}else r=c*n*l/1e3,this.ctx.translate(r,0),s.x+=r*f;a.restore()}}},{key:"setCharWidth",value:function(t,e){}},{key:"setCharWidthAndBounds",value:function(t,e,n,i,r,a){var s=new Path2D;s.rect(n,i,r-n,a-i),this.ctx.clip(s),this.endPath()}},{key:"getColorN_Pattern",value:function(e){var n,i=this;if("TilingPattern"===e[0]){var r=this.baseTransform||Ne(this.ctx),a={createCanvasGraphics:function(e){return new t(e,i.commonObjs,i.objs,i.canvasFactory,i.filterFactory,{optionalContentConfig:i.optionalContentConfig,markedContentStack:i.markedContentStack})}};n=new lo(e,this.ctx,a,r)}else n=this._getPattern(e[1],e[2]);return n}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}},{key:"setStrokeTransparent",value:function(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}},{key:"setFillRGBColor",value:function(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}},{key:"setFillTransparent",value:function(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}},{key:"_getPattern",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?e=this.cachedPatterns.get(t):(e=function(t){switch(t[0]){case"RadialAxial":return new eo(t);case"Mesh":return new ro(t);case"Dummy":return new ao}throw new Error("Unknown IR type: ".concat(t[0]))}(this.getObject(t)),this.cachedPatterns.set(t,e)),n&&(e.matrix=n),e}},{key:"shadingFill",value:function(t){if(this.contentVisible){var e=this.ctx;this.save();var n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,We(e),Zs);var i=We(e);if(i){var r=e.canvas,a=r.width,s=r.height,o=vo.slice();le.axialAlignedBoundingBox([0,0,a,s],i,o);var l=P(o,4),u=l[0],c=l[1],h=l[2],d=l[3];this.ctx.fillRect(u,c,h-u,d-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){qt("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){qt("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform.apply(this,O(t)),this.baseTransform=Ne(this.ctx),e)){le.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);var n=P(e,4),i=n[0],r=n[1],a=n[2],s=n[3],o=new Path2D;o.rect(i,r,a-i,s-r),this.ctx.clip(o),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(t){if(this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var e=this.ctx;t.isolated||Gt("TODO: Support non-isolated groups."),t.knockout&&Vt("Knockout groups not supported.");var n=Ne(e);if(t.matrix&&e.transform.apply(e,O(t.matrix)),!t.bbox)throw new Error("Bounding box is required.");var i=vo.slice();le.axialAlignedBoundingBox(t.bbox,Ne(e),i);var r=[0,0,e.canvas.width,e.canvas.height];i=le.intersect(i,r)||[0,0,0,0];var a=Math.floor(i[0]),s=Math.floor(i[1]),o=Math.max(Math.ceil(i[2])-a,1),l=Math.max(Math.ceil(i[3])-s,1);this.current.startNewPathAndClipBox([0,0,o,l]);var u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);var c=this.cachedCanvases.getCanvas(u,o,l),h=c.context;h.translate(-a,-s),h.transform.apply(h,O(n));var d=new Path2D,f=P(t.bbox,4),v=f[0],p=f[1],g=f[2],y=f[3];if(d.rect(v,p,g-v,y-p),t.matrix){var m=new Path2D;m.addPath(d,new DOMMatrix(t.matrix)),d=m}h.clip(d),t.smask?this.smaskStack.push({canvas:c.canvas,context:h,offsetX:a,offsetY:s,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,s),e.save()),bo(e,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}}},{key:"endGroup",value:function(t){if(this.contentVisible){this.groupLevel--;var e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{var i;this.ctx.restore();var r=Ne(this.ctx);this.restore(),this.ctx.save(),(i=this.ctx).setTransform.apply(i,O(r));var a=vo.slice();le.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r,a),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}}},{key:"beginAnnotation",value:function(t,e,n,r,a){var s;(i(Mo,this,Ro).call(this),ko(this.ctx),this.ctx.save(),this.save(),this.baseTransform)&&(s=this.ctx).setTransform.apply(s,O(this.baseTransform));if(e){var o=e[2]-e[0],l=e[3]-e[1];if(a&&this.annotationCanvasMap){(n=n.slice())[4]-=e[0],n[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=o,e[3]=l,le.singularValueDecompose2dScale(Ne(this.ctx),fo);var u=this.viewportScale,c=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(c,h);var d=this.annotationCanvas,f=d.canvas,v=d.context;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(fo[0],0,0,-fo[1],0,l*fo[1]),ko(this.ctx)}else{ko(this.ctx),this.endPath();var p=new Path2D;p.rect(e[0],e[1],o,l),this.ctx.clip(p)}}this.current=new yo(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,O(n)),this.transform.apply(this,O(r))}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx.restore(),i(Mo,this,To).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}},{key:"paintImageMaskXObject",value:function(t){if(this.contentVisible){var e=t.count;(t=this.getObject(t.data,t)).count=e;var n=this.ctx,i=this._createMaskCanvas(t),r=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,i.offsetX,i.offsetY),n.restore(),this.compose()}}},{key:"paintImageMaskXObjectRepeat",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){t=this.getObject(t.data,t);var s=this.ctx;s.save();var o=Ne(s);s.transform(e,n,i,r,0,0);var l=this._createMaskCanvas(t);s.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(var u=0,c=a.length;u<c;u+=2){var h=le.transform(o,[e,n,i,r,a[u],a[u+1]]);s.drawImage(l.canvas,h[4],h[5])}s.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(t){if(this.contentVisible){var e,n=this.ctx,i=this.current.fillColor,r=this.current.patternFill,a=m(t);try{for(a.s();!(e=a.n()).done;){var s=e.value,o=s.data,l=s.width,u=s.height,c=s.transform,h=this.cachedCanvases.getCanvas("maskCanvas",l,u),d=h.context;d.save(),wo(d,this.getObject(o,s)),d.globalCompositeOperation="source-in",d.fillStyle=r?i.getPattern(d,this,We(n),Qs):i,d.fillRect(0,0,l,u),d.restore(),n.save(),n.transform.apply(n,O(c)),n.scale(1,-1),go(n,h.canvas,0,0,l,u,0,-1,1,1),n.restore()}}catch(t){a.e(t)}finally{a.f()}this.compose()}}},{key:"paintImageXObject",value:function(t){if(this.contentVisible){var e=this.getObject(t);e?this.paintInlineImageXObject(e):Vt("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function(t,e,n,i){if(this.contentVisible){var r=this.getObject(t);if(r){for(var a=r.width,s=r.height,o=[],l=0,u=i.length;l<u;l+=2)o.push({transform:[e,0,0,n,i[l],i[l+1]],x:0,y:0,w:a,h:s});this.paintInlineImageXObjectGroup(r,o)}else Vt("Dependent image isn't ready yet")}}},{key:"applyTransferMapsToCanvas",value:function(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}},{key:"applyTransferMapsToBitmap",value:function(t){if("none"===this.current.transferMaps)return t.bitmap;var e=t.bitmap,n=t.width,i=t.height,r=this.cachedCanvases.getCanvas("inlineImage",n,i),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}},{key:"paintInlineImageXObject",value:function(t){if(this.contentVisible){var e=t.width,n=t.height,i=this.ctx;this.save();var r,a=i.filter;if("none"!==a&&""!==a&&(i.filter="none"),i.scale(1/e,-1/n),t.bitmap)r=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)r=t;else{var s=this.cachedCanvases.getCanvas("inlineImage",e,n).context;mo(s,t),r=this.applyTransferMapsToCanvas(s)}var o=this._scaleImage(r,We(i));i.imageSmoothingEnabled=_o(Ne(i),t.interpolate),go(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,e,n),this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(t,e){if(this.contentVisible){var n,i=this.ctx;if(t.bitmap)n=t.bitmap;else{var r=t.width,a=t.height,s=this.cachedCanvases.getCanvas("inlineImage",r,a).context;mo(s,t),n=this.applyTransferMapsToCanvas(s)}var o,l=m(e);try{for(l.s();!(o=l.n()).done;){var u=o.value;i.save(),i.transform.apply(i,O(u.transform)),i.scale(1,-1),go(i,n,u.x,u.y,u.w,u.h,0,-1,1,1),i.restore()}}catch(t){l.e(t)}finally{l.f()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(t){}},{key:"markPointProps",value:function(t,e){}},{key:"beginMarkedContent",value:function(t){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(t,e){var n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);var i=this.ctx;this.pendingClip&&(n||(this.pendingClip===Eo?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}},{key:"getSinglePixelWidth",value:function(){if(!this._cachedGetSinglePixelWidth){var t=Ne(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{var e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function(){if(-1===this._cachedScaleForStroking[0]){var t,e,n=this.current.lineWidth,i=this.ctx.getTransform(),r=i.a,a=i.b,s=i.c,o=i.d;if(0===a&&0===s){var l=Math.abs(r),u=Math.abs(o);if(l===u)if(0===n)t=e=1/l;else{var c=l*n;t=e=c<1?1/c:1}else if(0===n)t=1/l,e=1/u;else{var h=l*n,d=u*n;t=h<1?1/h:1,e=d<1?1/d:1}}else{var f=Math.abs(r*o-a*s),v=Math.hypot(r,a),p=Math.hypot(s,o);if(0===n)t=p/f,e=v/f;else{var g=n*f;t=p>g?p/g:1,e=v>g?v/g:1}}this._cachedScaleForStroking[0]=t,this._cachedScaleForStroking[1]=e}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function(t,e){var n=this.ctx,i=this.current.lineWidth,r=P(this.getScaleForStroking(),2),a=r[0],s=r[1];if(a===s)return n.lineWidth=(i||1)*a,void n.stroke(t);var o=n.getLineDash();e&&n.save(),n.scale(a,s),ho.a=1/a,ho.d=1/s;var l=new Path2D;if(l.addPath(t,ho),o.length>0){var u=Math.max(a,s);n.setLineDash(o.map(function(t){return t/u})),n.lineDashOffset/=u}n.lineWidth=i||1,n.stroke(l),e&&n.restore()}},{key:"isContentVisible",value:function(){for(var t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}])}();function Ro(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function To(){if(this.pageColors){var t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){var e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}function Io(t,e,n){var i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i}for(var Po in Ot)void 0!==Co.prototype[Po]&&(Co.prototype[Ot[Po]]=Co.prototype[Po]);var Do=function(){function t(){c(this,t)}return y(t,null,[{key:"workerPort",get:function(){return i(t,this,Lo)._},set:function(e){if(!("undefined"!=typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");Lo._=i(t,this,e)}},{key:"workerSrc",get:function(){return i(t,this,Oo)._},set:function(e){if("string"!=typeof e)throw new Error("Invalid `workerSrc` type.");Oo._=i(t,this,e)}}])}(),Lo={_:null},Oo={_:""},Fo=new WeakMap,No=new WeakMap,Wo=function(){return y(function t(e){var n=e.parsedData,i=e.rawData;c(this,t),d(this,Fo,void 0),d(this,No,void 0),f(Fo,this,n),f(No,this,i)},[{key:"getRaw",value:function(){return h(No,this)}},{key:"get",value:function(t){var e;return null!==(e=h(Fo,this).get(t))&&void 0!==e?e:null}},{key:Symbol.iterator,value:function(){return h(Fo,this).entries()}}])}(),Bo=Symbol("INTERNAL"),jo=new WeakMap,zo=new WeakMap,Uo=new WeakMap,Ho=new WeakMap,Go=function(){return y(function t(e,n){var i=n.name,r=n.intent,a=n.usage,s=n.rbGroups;c(this,t),d(this,jo,!1),d(this,zo,!1),d(this,Uo,!1),d(this,Ho,!0),f(jo,this,!!(e&ct)),f(zo,this,!!(e&ht)),this.name=i,this.intent=r,this.usage=a,this.rbGroups=s},[{key:"visible",get:function(){if(h(Uo,this))return h(Ho,this);if(!h(Ho,this))return!1;var t=this.usage,e=t.print,n=t.view;return h(jo,this)?"OFF"!==(null==n?void 0:n.viewState):!h(zo,this)||"OFF"!==(null==e?void 0:e.printState)}},{key:"_setVisible",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t!==Bo&&qt("Internal method `_setVisible` called."),f(Uo,this,n),f(Ho,this,e)}}])}(),Vo=new WeakMap,qo=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,Ko=new WeakSet,Qo=function(){return y(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;if(c(this,t),p(this,Ko),d(this,Vo,null),d(this,qo,new Map),d(this,Xo,null),d(this,Yo,null),this.renderingIntent=n,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,f(Yo,this,e.order);var i,r=m(e.groups);try{for(r.s();!(i=r.n()).done;){var a=i.value;h(qo,this).set(a.id,new Go(n,a))}}catch(t){r.e(t)}finally{r.f()}if("OFF"===e.baseState){var s,o=m(h(qo,this).values());try{for(o.s();!(s=o.n()).done;){s.value._setVisible(Bo,!1)}}catch(t){o.e(t)}finally{o.f()}}var l,u=m(e.on);try{for(u.s();!(l=u.n()).done;){var v=l.value;h(qo,this).get(v)._setVisible(Bo,!0)}}catch(t){u.e(t)}finally{u.f()}var g,y=m(e.off);try{for(y.s();!(g=y.n()).done;){var w=g.value;h(qo,this).get(w)._setVisible(Bo,!1)}}catch(t){y.e(t)}finally{y.f()}f(Xo,this,this.getHash())}},[{key:"isVisible",value:function(t){if(0===h(qo,this).size)return!0;if(!t)return Gt("Optional content group not defined."),!0;if("OCG"===t.type)return h(qo,this).has(t.id)?h(qo,this).get(t.id).visible:(Vt("Optional content group not found: ".concat(t.id)),!0);if("OCMD"===t.type){if(t.expression)return i(Ko,this,Jo).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){var e,n=m(t.ids);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!h(qo,this).has(r))return Vt("Optional content group not found: ".concat(r)),!0;if(h(qo,this).get(r).visible)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}if("AllOn"===t.policy){var a,s=m(t.ids);try{for(s.s();!(a=s.n()).done;){var o=a.value;if(!h(qo,this).has(o))return Vt("Optional content group not found: ".concat(o)),!0;if(!h(qo,this).get(o).visible)return!1}}catch(t){s.e(t)}finally{s.f()}return!0}if("AnyOff"===t.policy){var l,u=m(t.ids);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(!h(qo,this).has(c))return Vt("Optional content group not found: ".concat(c)),!0;if(!h(qo,this).get(c).visible)return!0}}catch(t){u.e(t)}finally{u.f()}return!1}if("AllOff"===t.policy){var d,f=m(t.ids);try{for(f.s();!(d=f.n()).done;){var v=d.value;if(!h(qo,this).has(v))return Vt("Optional content group not found: ".concat(v)),!0;if(h(qo,this).get(v).visible)return!1}}catch(t){f.e(t)}finally{f.f()}return!0}return Vt("Unknown optional content policy ".concat(t.policy,".")),!0}return Vt("Unknown group type ".concat(t.type,".")),!0}},{key:"setVisibility",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=h(qo,this).get(t);if(i){if(n&&e&&i.rbGroups.length){var r,a=m(i.rbGroups);try{for(a.s();!(r=a.n()).done;){var s,o=m(r.value);try{for(o.s();!(s=o.n()).done;){var l,u=s.value;if(u!==t)null===(l=h(qo,this).get(u))||void 0===l||l._setVisible(Bo,!1,!0)}}catch(t){o.e(t)}finally{o.f()}}}catch(t){a.e(t)}finally{a.f()}}i._setVisible(Bo,!!e,!0),f(Vo,this,null)}else Vt("Optional content group not found: ".concat(t))}},{key:"setOCGState",value:function(t){var e,n,i=t.state,r=t.preserveRB,a=m(i);try{for(a.s();!(n=a.n()).done;){var s=n.value;switch(s){case"ON":case"OFF":case"Toggle":e=s;continue}var o=h(qo,this).get(s);if(o)switch(e){case"ON":this.setVisibility(s,!0,r);break;case"OFF":this.setVisibility(s,!1,r);break;case"Toggle":this.setVisibility(s,!o.visible,r)}}}catch(t){a.e(t)}finally{a.f()}f(Vo,this,null)}},{key:"hasInitialVisibility",get:function(){return null===h(Xo,this)||this.getHash()===h(Xo,this)}},{key:"getOrder",value:function(){return h(qo,this).size?h(Yo,this)?h(Yo,this).slice():O(h(qo,this).keys()):null}},{key:"getGroup",value:function(t){return h(qo,this).get(t)||null}},{key:"getHash",value:function(){if(null!==h(Vo,this))return h(Vo,this);var t,e=new ka,n=m(h(qo,this));try{for(n.s();!(t=n.n()).done;){var i=P(t.value,2),r=i[0],a=i[1];e.update("".concat(r,":").concat(a.visible))}}catch(t){n.e(t)}finally{n.f()}return f(Vo,this,e.hexdigest())}},{key:Symbol.iterator,value:function(){return h(qo,this).entries()}}])}();function Jo(t){var e=t.length;if(e<2)return!0;for(var n=t[0],r=1;r<e;r++){var a=t[r],s=void 0;if(Array.isArray(a))s=i(Ko,this,Jo).call(this,a);else{if(!h(qo,this).has(a))return Vt("Optional content group not found: ".concat(a)),!0;s=h(qo,this).get(a).visible}switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===n}var Zo=function(){return y(function t(e,n){var i=this,r=n.disableRange,a=void 0!==r&&r,s=n.disableStream,o=void 0!==s&&s;c(this,t),Xt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');var l=e.length,u=e.initialData,h=e.progressiveDone,d=e.contentDispositionFilename;if(this._queuedChunks=[],this._progressiveDone=h,this._contentDispositionFilename=d,(null==u?void 0:u.length)>0){var f=u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength?u.buffer:new Uint8Array(u).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!o,this._isRangeSupported=!a,this._contentLength=l,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener(function(t,e){i._onReceiveData({begin:t,chunk:e})}),e.addProgressListener(function(t,e){i._onProgress({loaded:t,total:e})}),e.addProgressiveReadListener(function(t){i._onReceiveData({chunk:t})}),e.addProgressiveDoneListener(function(){i._onProgressiveDone()}),e.transportReady()},[{key:"_onReceiveData",value:function(t){var e=t.begin,n=t.chunk,i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;void 0===e?this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i):Xt(this._rangeReaders.some(function(t){return t._begin===e&&(t._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}},{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"_onProgress",value:function(t){var e,n,i,r;void 0===t.total?null===(e=this._rangeReaders[0])||void 0===e||null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(r=i.onProgress)||void 0===r||r.call(i,{loaded:t.loaded,total:t.total})}},{key:"_onProgressiveDone",value:function(){var t;null===(t=this._fullRequestReader)||void 0===t||t.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(t){var e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}},{key:"getFullReader",value:function(){Xt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;return this._queuedChunks=null,new $o(this,t,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var n=new tl(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=m(this._rangeReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}this._pdfDataRangeTransport.abort()}}])}(),$o=function(){return y(function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;c(this,t),this._stream=e,this._done=i||!1,this._filename=Ee(r)?r:null,this._queuedChunks=n||[],this._loaded=0;var a,s=m(this._queuedChunks);try{for(s.s();!(a=s.n()).done;){var o=a.value;this._loaded+=o.byteLength}}catch(t){s.e(t)}finally{s.f()}this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null},[{key:"_enqueue",value:function(t){if(!this._done){if(this._requests.length>0)this._requests.shift().resolve({value:t,done:!1});else this._queuedChunks.push(t);this._loaded+=t.byteLength}}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:(t=o(C().m(function t(){var e,n;return C().w(function(t){for(;;)switch(t.n){case 0:if(!(this._queuedChunks.length>0)){t.n=1;break}return e=this._queuedChunks.shift(),t.a(2,{value:e,done:!1});case 1:if(!this._done){t.n=2;break}return t.a(2,{value:void 0,done:!0});case 2:return n=Promise.withResolvers(),this._requests.push(n),t.a(2,n.promise)}},t,this)})),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=m(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]);var t}(),tl=function(){return y(function t(e,n,i){c(this,t),this._stream=e,this._begin=n,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null},[{key:"_enqueue",value:function(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});var e,n=m(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(t=o(C().m(function t(){var e,n;return C().w(function(t){for(;;)switch(t.n){case 0:if(!this._queuedChunk){t.n=1;break}return e=this._queuedChunk,this._queuedChunk=null,t.a(2,{value:e,done:!1});case 1:if(!this._done){t.n=2;break}return t.a(2,{value:void 0,done:!0});case 2:return n=Promise.withResolvers(),this._requests.push(n),t.a(2,n.promise)}},t,this)})),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=m(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]);var t}();function el(t,e){var n=new Headers;if(!t||!e||"object"!==W(e))return n;for(var i in e){var r=e[i];void 0!==r&&n.append(i,r)}return n}function nl(t){var e,n;return null!==(e=null===(n=URL.parse(t))||void 0===n?void 0:n.origin)&&void 0!==e?e:null}function il(t){var e=t.responseHeaders,n=t.isHttp,i=t.rangeChunkSize,r=t.disableRange,a={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(e.get("Content-Length"),10);return Number.isInteger(s)?(a.suggestedLength=s,s<=2*i||r||!n||"bytes"!==e.get("Accept-Ranges")||"identity"!==(e.get("Content-Encoding")||"identity")||(a.allowRangeRequests=!0),a):a}function rl(t){var e=t.get("Content-Disposition");if(e){var n=function(t){var e=!0,n=a("filename\\*","i").exec(t);if(n){var i=l(n=n[1]);return o(i=c(i=u(i=unescape(i))))}if(n=function(t){for(var e,n=[],i=a("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(e=i.exec(t));){var r=P(e,4),s=r[1],o=r[2],c=r[3];if((s=parseInt(s,10))in n){if(0===s)break}else n[s]=[o,c]}for(var h=[],d=0;d<n.length&&d in n;++d){var f=P(n[d],2),v=f[0],p=f[1];p=l(p),v&&(p=unescape(p),0===d&&(p=u(p))),h.push(p)}return h.join("")}(t))return o(c(n));if(n=a("filename","i").exec(t)){var r=l(n=n[1]);return o(r=c(r))}function a(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function s(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{var i=new TextDecoder(t,{fatal:!0}),r=ae(n);n=i.decode(r),e=!1}catch(t){}}return n}function o(t){return e&&/[\x80-\xff]/.test(t)&&(t=s("utf-8",t),e&&(t=s("iso-8859-1",t))),t}function l(t){if(t.startsWith('"')){for(var e=t.slice(1).split('\\"'),n=0;n<e.length;++n){var i=e[n].indexOf('"');-1!==i&&(e[n]=e[n].slice(0,i),e.length=n+1),e[n]=e[n].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function u(t){var e=t.indexOf("'");return-1===e?t:s(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function c(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,e,n,i){if("q"===n||"Q"===n)return s(e,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}));try{i=atob(i)}catch(t){}return s(e,i)})}return""}(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch(t){}if(Ee(n))return n}return null}function al(t,e){return new ee("Unexpected server response (".concat(t,') while retrieving PDF "').concat(e,'".'),t,404===t||0===t&&e.startsWith("file:"))}function sl(t){return 200===t||206===t}function ol(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function ll(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(Vt("getArrayBuffer - unexpected data format: ".concat(t)),new Uint8Array(t).buffer)}var ul=function(){return y(function t(e){c(this,t),w(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=el(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]},[{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function(){return Xt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new cl(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var n=new hl(this,t,e);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=m(this._rangeRequestReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}])}(),cl=function(){return y(function t(e){var n=this;c(this,t),this._stream=e,this._reader=null,this._loaded=0,this._filename=null;var i=e.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;var r=new Headers(e.headers),a=i.url;fetch(a,ol(r,this._withCredentials,this._abortController)).then(function(t){if(e._responseOrigin=nl(t.url),!sl(t.status))throw al(t.status,a);n._reader=t.body.getReader(),n._headersCapability.resolve();var i=t.headers,r=il({responseHeaders:i,isHttp:e.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),s=r.allowRangeRequests,o=r.suggestedLength;n._isRangeSupported=s,n._contentLength=o||n._contentLength,n._filename=rl(i),!n._isStreamingSupported&&n._isRangeSupported&&n.cancel(new ie("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null},[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=o(C().m(function t(){var e,n,i,r;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this._headersCapability.promise;case 1:return t.n=2,this._reader.read();case 2:if(n=t.v,i=n.value,!(r=n.done)){t.n=3;break}return t.a(2,{value:i,done:r});case 3:return this._loaded+=i.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),t.a(2,{value:ll(i),done:!1})}},t,this)})),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}]);var t}(),hl=function(){return y(function t(e,n,i){var r=this;c(this,t),this._stream=e,this._reader=null,this._loaded=0;var a=e.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;var s=new Headers(e.headers);s.append("Range","bytes=".concat(n,"-").concat(i-1));var o=a.url;fetch(o,ol(s,this._withCredentials,this._abortController)).then(function(t){var n=nl(t.url);if(n!==e._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!sl(t.status))throw al(t.status,o);r._readCapability.resolve(),r._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null},[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=o(C().m(function t(){var e,n,i,r;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this._readCapability.promise;case 1:return t.n=2,this._reader.read();case 2:if(n=t.v,i=n.value,!(r=n.done)){t.n=3;break}return t.a(2,{value:i,done:r});case 3:return this._loaded+=i.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),t.a(2,{value:ll(i),done:!1})}},t,this)})),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}]);var t}();var dl=function(){return y(function t(e){var n=e.url,i=e.httpHeaders,r=e.withCredentials;c(this,t),w(this,"_responseOrigin",null),this.url=n,this.isHttp=/^https?:/i.test(n),this.headers=el(this.isHttp,i),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)},[{key:"request",value:function(t){var e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;var r,a=m(this.headers);try{for(a.s();!(r=a.n()).done;){var s=P(r.value,2),o=s[0],l=s[1];e.setRequestHeader(o,l)}}catch(t){a.e(t)}finally{a.f()}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),i.expectedStatus=206):i.expectedStatus=200,e.responseType="arraybuffer",Xt(t.onError,"Expected `onError` callback to be provided."),e.onerror=function(){t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}},{key:"onProgress",value:function(t,e){var n,i=this.pendingRequests[t];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,e))}},{key:"onStateChange",value:function(t,e){var n=this.pendingRequests[t];if(n){var i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4===i.readyState&&t in this.pendingRequests)if(delete this.pendingRequests[t],0===i.status&&this.isHttp)n.onError(i.status);else{var r=i.status||200;if(200===r&&206===n.expectedStatus||r===n.expectedStatus){var a=function(t){var e=t.response;return"string"!=typeof e?e:ae(e).buffer}(i);if(206===r){var s=i.getResponseHeader("Content-Range"),o=/bytes (\d+)-(\d+)\/(\d+)/.exec(s);o?n.onDone({begin:parseInt(o[1],10),chunk:a}):(Vt('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(i.status)}else n.onError(i.status)}}}},{key:"getRequestXhr",value:function(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function(t){return t in this.pendingRequests}},{key:"abortRequest",value:function(t){var e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}])}(),fl=function(){return y(function t(e){c(this,t),this._source=e,this._manager=new dl(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]},[{key:"_onRangeRequestReaderClosed",value:function(t){var e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}},{key:"getFullReader",value:function(){return Xt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vl(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){var n=new pl(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=m(this._rangeRequestReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}])}(),vl=function(){return y(function t(e,n){c(this,t),this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null},[{key:"_onHeadersReceived",value:function(){var t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=nl(e.responseURL);var n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(function(t){var e=L(t.split(": "));return[e[0],e.slice(1).join(": ")]}):[]),r=il({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),a=r.allowRangeRequests,s=r.suggestedLength;a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=rl(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}},{key:"_onDone",value:function(t){t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk));if(this._done=!0,!(this._cachedChunks.length>0)){var e,n=m(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}}},{key:"_onError",value:function(t){this._storedError=al(t,this._url),this._headersCapability.reject(this._storedError);var e,n=m(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.reject(this._storedError)}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(t){var e;null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"read",value:(t=o(C().m(function t(){var e,n;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this._headersCapability.promise;case 1:if(!this._storedError){t.n=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){t.n=3;break}return e=this._cachedChunks.shift(),t.a(2,{value:e,done:!1});case 3:if(!this._done){t.n=4;break}return t.a(2,{value:void 0,done:!0});case 4:return n=Promise.withResolvers(),this._requests.push(n),t.a(2,n.promise)}},t,this)})),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0,this._headersCapability.reject(t);var e,n=m(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]);var t}(),pl=function(){return y(function t(e,n,i){c(this,t),this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null},[{key:"_onHeadersReceived",value:function(){var t,e=nl(null===(t=this._manager.getRequestXhr(this._requestId))||void 0===t?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(e,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}},{key:"_close",value:function(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}},{key:"_onDone",value:function(t){var e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e;this._done=!0;var n,i=m(this._requests);try{for(i.s();!(n=i.n()).done;){n.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(t){var e;null!==(e=this._storedError)&&void 0!==e||(this._storedError=al(t,this._url));var n,i=m(this._requests);try{for(i.s();!(n=i.n()).done;){n.value.reject(this._storedError)}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(t){var e;this.isStreamingSupported||(null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded}))}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(t=o(C().m(function t(){var e,n;return C().w(function(t){for(;;)switch(t.n){case 0:if(!this._storedError){t.n=1;break}throw this._storedError;case 1:if(null===this._queuedChunk){t.n=2;break}return e=this._queuedChunk,this._queuedChunk=null,t.a(2,{value:e,done:!1});case 2:if(!this._done){t.n=3;break}return t.a(2,{value:void 0,done:!0});case 3:return n=Promise.withResolvers(),this._requests.push(n),t.a(2,n.promise)}},t,this)})),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=m(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]);var t}(),gl=/^[a-z][a-z0-9\-+.]+:/i;var yl=function(){return y(function t(e){c(this,t),this.source=e,this.url=function(t){if(gl.test(t))return new URL(t);var e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}(e.url),Xt("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]},[{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function(){return Xt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new ml(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var n=new wl(this,t,e);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=m(this._rangeRequestReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}])}(),ml=function(){return y(function t(e){var n=this;c(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;var i=e.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();var r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(function(t){n._contentLength=t.size,n._setReadableStream(r.createReadStream(n._url)),n._headersCapability.resolve()},function(t){"ENOENT"===t.code&&(t=al(0,n._url.href)),n._storedError=t,n._headersCapability.reject(t)})},[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=o(C().m(function t(){var e,n,i;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this._readCapability.promise;case 1:if(!this._done){t.n=2;break}return t.a(2,{value:void 0,done:!0});case 2:if(!this._storedError){t.n=3;break}throw this._storedError;case 3:if(null!==(n=this._readableStream.read())){t.n=4;break}return this._readCapability=Promise.withResolvers(),t.a(2,this.read());case 4:return this._loaded+=n.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),i=new Uint8Array(n).buffer,t.a(2,{value:i,done:!1})}},t,this)})),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",function(){e._readCapability.resolve()}),t.on("end",function(){t.destroy(),e._done=!0,e._readCapability.resolve()}),t.on("error",function(t){e._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ie("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t}(),wl=function(){return y(function t(e,n,i){c(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();var r=e.source;this._isStreamingSupported=!r.disableStream;var a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:n,end:i-1}))},[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=o(C().m(function t(){var e,n,i;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this._readCapability.promise;case 1:if(!this._done){t.n=2;break}return t.a(2,{value:void 0,done:!0});case 2:if(!this._storedError){t.n=3;break}throw this._storedError;case 3:if(null!==(n=this._readableStream.read())){t.n=4;break}return this._readCapability=Promise.withResolvers(),t.a(2,this.read());case 4:return this._loaded+=n.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),i=new Uint8Array(n).buffer,t.a(2,{value:i,done:!1})}},t,this)})),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",function(){e._readCapability.resolve()}),t.on("end",function(){t.destroy(),e._done=!0,e._readCapability.resolve()}),t.on("error",function(t){e._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t}(),bl=Symbol("INITIAL_DATA"),kl=new WeakMap,_l=new WeakSet,Al=function(){return y(function t(){c(this,t),p(this,_l),d(this,kl,Object.create(null))},[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var n=i(_l,this,xl).call(this,t);return n.promise.then(function(){return e(n.data)}),null}var r=h(kl,this)[t];if(!r||r.data===bl)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return r.data}},{key:"has",value:function(t){var e=h(kl,this)[t];return!!e&&e.data!==bl}},{key:"delete",value:function(t){var e=h(kl,this)[t];return!(!e||e.data===bl)&&(delete h(kl,this)[t],!0)}},{key:"resolve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=i(_l,this,xl).call(this,t);n.data=e,n.resolve()}},{key:"clear",value:function(){for(var t in h(kl,this)){var e,n=h(kl,this)[t].data;null==n||null===(e=n.bitmap)||void 0===e||e.close()}f(kl,this,Object.create(null))}},{key:Symbol.iterator,value:C().m(function t(){var e,n,i,r;return C().w(function(t){for(;;)switch(t.n){case 0:i=T(h(kl,this));case 1:if((r=i()).done){t.n=4;break}if(e=r.value,(n=h(kl,this)[e].data)!==bl){t.n=2;break}return t.a(3,1);case 2:return t.n=3,[e,n];case 3:t.n=1;break;case 4:return t.a(2)}},t,this)})}])}();function xl(t){var e;return(e=h(kl,this))[t]||(e[t]=M(M({},Promise.withResolvers()),{},{data:bl}))}var Sl=new WeakMap,El=new WeakMap,Ml=new WeakMap,Cl=new WeakMap,Rl=new WeakMap,Tl=new WeakMap,Il=new WeakMap,Pl=new WeakMap,Dl=new WeakMap,Ll=new WeakMap,Ol=new WeakMap,Fl=new WeakMap,Nl=new WeakMap,Wl=new WeakMap,Bl=new WeakMap,jl=new WeakMap,zl=new WeakMap,Ul=new WeakMap,Hl=new WeakSet,Gl=function(){function t(e){var n,i=this,r=e.textContentSource,a=e.container,s=e.viewport;if(c(this,t),p(this,Hl),d(this,Sl,Promise.withResolvers()),d(this,El,null),d(this,Ml,!1),d(this,Cl,!(null===(n=globalThis.FontInspector)||void 0===n||!n.enabled)),d(this,Rl,null),d(this,Tl,null),d(this,Il,0),d(this,Pl,0),d(this,Dl,null),d(this,Ll,null),d(this,Ol,0),d(this,Fl,0),d(this,Nl,Object.create(null)),d(this,Wl,[]),d(this,Bl,null),d(this,jl,[]),d(this,zl,new WeakMap),d(this,Ul,null),r instanceof ReadableStream)f(Bl,this,r);else{if("object"!==W(r))throw new Error('No "textContentSource" parameter specified.');f(Bl,this,new ReadableStream({start:function(t){t.enqueue(r),t.close()}}))}f(El,this,f(Ll,this,a)),f(Fl,this,s.scale*je.pixelRatio),f(Ol,this,s.rotation),f(Tl,this,{div:null,properties:null,ctx:null});var o=s.rawDims,l=o.pageWidth,u=o.pageHeight,v=o.pageX,g=o.pageY;f(Ul,this,[1,0,0,-1,-v,g+u]),f(Pl,this,l),f(Il,this,u),Ql.call(t),Be(a,s),h(Sl,this).promise.finally(function(){nu._.delete(i),f(Tl,i,null),f(Nl,i,null)}).catch(function(){})}return y(t,[{key:"render",value:function(){var t=this,e=function(){h(Dl,t).read().then(function(n){var r,a=n.value;n.done?h(Sl,t).resolve():(null!==(r=h(Rl,t))&&void 0!==r||f(Rl,t,a.lang),Object.assign(h(Nl,t),a.styles),i(Hl,t,Vl).call(t,a.items),e())},h(Sl,t).reject)};return f(Dl,this,h(Bl,this).getReader()),nu._.add(this),e(),h(Sl,this).promise}},{key:"update",value:function(e){var n=e.viewport,r=e.onBefore,a=void 0===r?null:r,s=n.scale*je.pixelRatio,o=n.rotation;if(o!==h(Ol,this)&&(null==a||a(),f(Ol,this,o),Be(h(Ll,this),{rotation:o})),s!==h(Fl,this)){null==a||a(),f(Fl,this,s);var l,u={div:null,properties:null,ctx:Yl.call(t,h(Rl,this))},c=m(h(jl,this));try{for(c.s();!(l=c.n()).done;){var d=l.value;u.properties=h(zl,this).get(d),u.div=d,i(Hl,this,Xl).call(this,u)}}catch(t){c.e(t)}finally{c.f()}}}},{key:"cancel",value:function(){var t,e=new ie("TextLayer task cancelled.");null===(t=h(Dl,this))||void 0===t||t.cancel(e).catch(function(){}),f(Dl,this,null),h(Sl,this).reject(e)}},{key:"textDivs",get:function(){return h(jl,this)}},{key:"textContentItemsStr",get:function(){return h(Wl,this)}}],[{key:"fontFamilyMap",get:function(){var t=se.platform,e=t.isWindows,n=t.isFirefox;return Qt(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&n?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&n?"Lucida Console, ":"","monospace")]]))}},{key:"cleanup",value:function(){if(!(i(t,this,nu)._.size>0)){i(t,this,Zl)._.clear();var e,n=m(i(t,this,$l)._.values());try{for(n.s();!(e=n.n()).done;){e.value.canvas.remove()}}catch(t){n.e(t)}finally{n.f()}i(t,this,$l)._.clear()}}}])}();function Vl(t){var e,n;if(!h(Ml,this)){null!==(n=(e=h(Tl,this)).ctx)&&void 0!==n||(e.ctx=Yl.call(V,h(Rl,this)));var r,a=h(jl,this),s=h(Wl,this),o=m(t);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(a.length>1e5)return Vt("Ignoring additional textDivs for performance reasons."),void f(Ml,this,!0);if(void 0!==l.str)s.push(l.str),i(Hl,this,ql).call(this,l);else if("beginMarkedContentProps"===l.type||"beginMarkedContent"===l.type){var u=h(El,this);f(El,this,document.createElement("span")),h(El,this).classList.add("markedContent"),null!==l.id&&h(El,this).setAttribute("id","".concat(l.id)),u.append(h(El,this))}else"endMarkedContent"===l.type&&f(El,this,h(El,this).parentNode)}}catch(t){o.e(t)}finally{o.f()}}}function ql(t){var e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};h(jl,this).push(e);var r=le.transform(h(Ul,this),t.transform),a=Math.atan2(r[1],r[0]),s=h(Nl,this)[t.fontName];s.vertical&&(a+=Math.PI/2);var o=h(Cl,this)&&s.fontSubstitution||s.fontFamily;o=V.fontFamilyMap.get(o)||o;var l,u,c=Math.hypot(r[2],r[3]),d=c*Jl.call(V,o,s,h(Rl,this));0===a?(l=r[4],u=r[5]-d):(l=r[4]+d*Math.sin(a),u=r[5]-d*Math.cos(a));var f="calc(var(--total-scale-factor) *",v=e.style;h(El,this)===h(Ll,this)?(v.left="".concat((100*l/h(Pl,this)).toFixed(2),"%"),v.top="".concat((100*u/h(Il,this)).toFixed(2),"%")):(v.left="".concat(f).concat(l.toFixed(2),"px)"),v.top="".concat(f).concat(u.toFixed(2),"px)")),v.fontSize="".concat(f).concat((eu._*c).toFixed(2),"px)"),v.fontFamily=o,n.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,h(Cl,this)&&(e.dataset.fontName=s.fontSubstitutionLoadedName||t.fontName),0!==a&&(n.angle=a*(180/Math.PI));var p=!1;if(t.str.length>1)p=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){var g=Math.abs(t.transform[0]),y=Math.abs(t.transform[3]);g!==y&&Math.max(g,y)/Math.min(g,y)>1.5&&(p=!0)}if(p&&(n.canvasWidth=s.vertical?t.height:t.width),h(zl,this).set(e,n),h(Tl,this).div=e,h(Tl,this).properties=n,i(Hl,this,Xl).call(this,h(Tl,this)),n.hasText&&h(El,this).append(e),n.hasEOL){var m=document.createElement("br");m.setAttribute("role","presentation"),h(El,this).append(m)}}function Xl(t){var e=t.div,n=t.properties,i=t.ctx,r=e.style,a="";if(eu._>1&&(a="scale(".concat(1/eu._,")")),0!==n.canvasWidth&&n.hasText){var s=r.fontFamily,o=n.canvasWidth,l=n.fontSize;Kl.call(V,i,l*h(Fl,this),s);var u=i.measureText(e.textContent).width;u>0&&(a="scaleX(".concat(o*h(Fl,this)/u,") ").concat(a))}0!==n.angle&&(a="rotate(".concat(n.angle,"deg) ").concat(a)),a.length>0&&(r.transform=a)}function Yl(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=i(V,this,$l)._.get(t||(t=""));if(!e){var n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),i(V,this,$l)._.set(t,e),i(V,this,tu)._.set(e,{size:0,family:""})}return e}function Kl(t,e,n){var r=i(V,this,tu)._.get(t);e===r.size&&n===r.family||(t.font="".concat(e,"px ").concat(n),r.size=e,r.family=n)}function Ql(){if(null===i(V,this,eu)._){var t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),eu._=i(V,this,t.getBoundingClientRect().height),t.remove()}}function Jl(t,e,n){var r=i(V,this,Zl)._.get(t);if(r)return r;var a=i(V,this,Yl).call(this,n);a.canvas.width=a.canvas.height=30,i(V,this,Kl).call(this,a,30,t);var s=a.measureText(""),o=s.fontBoundingBoxAscent,l=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;var u=.8;return o?u=o/(o+l):(se.platform.isFirefox&&Vt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),i(V,this,Zl)._.set(t,u),u}V=Gl;var Zl={_:new Map},$l={_:new Map},tu={_:new WeakMap},eu={_:null},nu={_:new Set},iu=function(){function t(){c(this,t)}return y(t,null,[{key:"textContent",value:function(e){var n=[],i={items:n,styles:Object.create(null)};return function e(i){var r;if(i){var a=null,s=i.name;if("#text"===s)a=i.value;else{if(!t.shouldBuildText(s))return;null!=i&&null!==(r=i.attributes)&&void 0!==r&&r.textContent?a=i.attributes.textContent:i.value&&(a=i.value)}if(null!==a&&n.push({str:a}),i.children){var o,l=m(i.children);try{for(l.s();!(o=l.n()).done;){e(o.value)}}catch(t){l.e(t)}finally{l.f()}}}}(e),i}},{key:"shouldBuildText",value:function(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}])}();function ru(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});var i=new au,r=i.docId,a=n.url?function(t){if(t instanceof URL)return t.href;if("string"==typeof t){if(st)return t;var e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,s=n.data?function(t){if(st&&"undefined"!=typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return ae(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"===W(t)&&!isNaN(null==t?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,u=null!==(t=n.password)&&void 0!==t?t:null,c=n.range instanceof du?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:Math.pow(2,16),d=n.worker instanceof Au?n.worker:null,f=n.verbosity,v="string"!=typeof n.docBaseUrl||Se(n.docBaseUrl)?null:n.docBaseUrl,p=La(n.cMapUrl),g=!1!==n.cMapPacked,y=n.CMapReaderFactory||(st?Xs:cs),m=La(n.iccUrl),w=La(n.standardFontDataUrl),b=n.StandardFontDataFactory||(st?Ys:Ls),k=La(n.wasmUrl),_=n.WasmFactory||(st?Ks:Fs),A=!0!==n.stopAtErrors,x=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,S=!1!==n.isEvalSupported,E="boolean"==typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!st,M="boolean"==typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!st&&(se.platform.isFirefox||!globalThis.chrome),C=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,R="boolean"==typeof n.disableFontFace?n.disableFontFace:st,T=!0===n.fontExtraProperties,I=!0===n.enableXfa,P=n.ownerDocument||globalThis.document,D=!0===n.disableRange,L=!0===n.disableStream,O=!0===n.disableAutoFetch,F=!0===n.pdfBug,N=n.CanvasFactory||(st?qs:ls),B=n.FilterFactory||(st?Vs:bs),j=!0===n.enableHWA,z=!1!==n.useWasm,U=c?c.length:null!==(e=n.length)&&void 0!==e?e:NaN,H="boolean"==typeof n.useSystemFonts?n.useSystemFonts:!st&&!R,G="boolean"==typeof n.useWorkerFetch?n.useWorkerFetch:!!(y===cs&&b===Ls&&_===Fs&&p&&w&&k&&Te(p,document.baseURI)&&Te(w,document.baseURI)&&Te(k,document.baseURI));Ut(f);var V={canvasFactory:new N({ownerDocument:P,enableHWA:j}),filterFactory:new B({docId:r,ownerDocument:P}),cMapReaderFactory:G?null:new y({baseUrl:p,isCompressed:g}),standardFontDataFactory:G?null:new b({baseUrl:w}),wasmFactory:G?null:new _({baseUrl:k})};d||(d=Au.create({verbosity:f,port:Do.workerPort}),i._worker=d);var q={docId:r,apiVersion:"5.3.31",data:s,password:u,disableAutoFetch:O,rangeChunkSize:h,length:U,docBaseUrl:v,enableXfa:I,evaluatorOptions:{maxImageSize:x,disableFontFace:R,ignoreErrors:A,isEvalSupported:S,isOffscreenCanvasSupported:E,isImageDecoderSupported:M,canvasMaxAreaInBytes:C,fontExtraProperties:T,useSystemFonts:H,useWasm:z,useWorkerFetch:G,cMapUrl:p,iccUrl:m,standardFontDataUrl:w,wasmUrl:k}},X={ownerDocument:P,pdfBug:F,styleElement:null,loadingParams:{disableAutoFetch:O,enableXfa:I}};return d.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");var t,e=d.messageHandler.sendWithPromise("GetDocRequest",q,s?[s.buffer]:null);if(c)t=new Zo(c,{disableRange:D,disableStream:L});else if(!s){if(!a)throw new Error("getDocument - no `url` parameter provided.");var n=Te(a)?ul:st?yl:fl;t=new n({url:a,length:U,httpHeaders:o,withCredentials:l,rangeChunkSize:h,disableRange:D,disableStream:L})}return e.then(function(e){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");var n=new ts(r,e,d.port),a=new Wu(n,i,t,X,V);i._transport=a,n.send("Ready",null)})}).catch(i._capability.reject),i}var au=function(){return y(function t(){c(this,t),w(this,"_capability",Promise.withResolvers()),w(this,"_transport",null),w(this,"_worker",null),w(this,"docId","d".concat((su._=(q=su._,X=q++,q),X))),w(this,"destroyed",!1),w(this,"onPassword",null),w(this,"onProgress",null)},[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:(e=o(C().m(function t(){var e,n,i,r,a;return C().w(function(t){for(;;)switch(t.p=t.n){case 0:return this.destroyed=!0,t.p=1,null!==(n=this._worker)&&void 0!==n&&n.port&&(this._worker._pendingDestroy=!0),t.n=2,null===(i=this._transport)||void 0===i?void 0:i.destroy();case 2:t.n=4;break;case 3:throw t.p=3,a=t.v,null!==(r=this._worker)&&void 0!==r&&r.port&&delete this._worker._pendingDestroy,a;case 4:this._transport=null,null===(e=this._worker)||void 0===e||e.destroy(),this._worker=null;case 5:return t.a(2)}},t,this,[[1,3]])})),function(){return e.apply(this,arguments)})},{key:"getData",value:(t=o(C().m(function t(){return C().w(function(t){for(;;)if(0===t.n)return t.a(2,this._transport.getData())},t,this)})),function(){return t.apply(this,arguments)})}]);var t,e}(),su={_:0},ou=new WeakMap,lu=new WeakMap,uu=new WeakMap,cu=new WeakMap,hu=new WeakMap,du=function(){return y(function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;c(this,t),d(this,ou,Promise.withResolvers()),d(this,lu,[]),d(this,uu,[]),d(this,cu,[]),d(this,hu,[]),this.length=e,this.initialData=n,this.progressiveDone=i,this.contentDispositionFilename=r},[{key:"addRangeListener",value:function(t){h(hu,this).push(t)}},{key:"addProgressListener",value:function(t){h(cu,this).push(t)}},{key:"addProgressiveReadListener",value:function(t){h(uu,this).push(t)}},{key:"addProgressiveDoneListener",value:function(t){h(lu,this).push(t)}},{key:"onDataRange",value:function(t,e){var n,i=m(h(hu,this));try{for(i.s();!(n=i.n()).done;){(0,n.value)(t,e)}}catch(t){i.e(t)}finally{i.f()}}},{key:"onDataProgress",value:function(t,e){var n=this;h(ou,this).promise.then(function(){var i,r=m(h(cu,n));try{for(r.s();!(i=r.n()).done;){(0,i.value)(t,e)}}catch(t){r.e(t)}finally{r.f()}})}},{key:"onDataProgressiveRead",value:function(t){var e=this;h(ou,this).promise.then(function(){var n,i=m(h(uu,e));try{for(i.s();!(n=i.n()).done;){(0,n.value)(t)}}catch(t){i.e(t)}finally{i.f()}})}},{key:"onDataProgressiveDone",value:function(){var t=this;h(ou,this).promise.then(function(){var e,n=m(h(lu,t));try{for(n.s();!(e=n.n()).done;){(0,e.value)()}}catch(t){n.e(t)}finally{n.f()}})}},{key:"transportReady",value:function(){h(ou,this).resolve()}},{key:"requestDataRange",value:function(t,e){qt("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}])}(),fu=function(){return y(function t(e,n){c(this,t),this._pdfInfo=e,this._transport=n},[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"canvasFactory",get:function(){return this._transport.canvasFactory}},{key:"filterFactory",get:function(){return this._transport.filterFactory}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"isPureXfa",get:function(){return Qt(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).intent,e=void 0===t?"display":t,n=this._transport.getRenderingIntent(e).renderingIntent;return this._transport.getOptionalContentConfig(n)}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"saveDocument",value:function(){return this._transport.saveDocument()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"cachedPageNumber",value:function(t){return this._transport.cachedPageNumber(t)}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}])}(),vu=new WeakMap,pu=new WeakSet,gu=function(){return y(function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];c(this,t),p(this,pu),d(this,vu,!1),this._pageIndex=e,this._pageInfo=n,this._transport=i,this._stats=r?new Re:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new Al,this._intentStates=new Map,this.destroyed=!1},[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scale,n=t.rotation,i=void 0===n?this.rotate:n,r=t.offsetX,a=void 0===r?0:r,s=t.offsetY,o=void 0===s?0:s,l=t.dontFlip,u=void 0!==l&&l;return new Ae({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:i,offsetX:a,offsetY:o,dontFlip:u})}},{key:"getAnnotations",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).intent,e=void 0===t?"display":t,n=this._transport.getRenderingIntent(e).renderingIntent;return this._transport.getAnnotations(this._pageIndex,n)}},{key:"getJSActions",value:function(){return this._transport.getPageJSActions(this._pageIndex)}},{key:"filterFactory",get:function(){return this._transport.filterFactory}},{key:"isPureXfa",get:function(){return Qt(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"getXfa",value:(t=o(C().m(function t(){var e;return C().w(function(t){for(;;)if(0===t.n)return t.a(2,(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null)},t,this)})),function(){return t.apply(this,arguments)})},{key:"render",value:function(t){var e,n,r=this,a=t.canvasContext,s=t.viewport,o=t.intent,l=void 0===o?"display":o,u=t.annotationMode,c=void 0===u?yt.ENABLE:u,h=t.transform,d=void 0===h?null:h,v=t.background,p=void 0===v?null:v,g=t.optionalContentConfigPromise,y=void 0===g?null:g,m=t.annotationCanvasMap,w=void 0===m?null:m,b=t.pageColors,k=void 0===b?null:b,_=t.printAnnotationStorage,A=void 0===_?null:_,x=t.isEditing,S=void 0!==x&&x;null===(e=this._stats)||void 0===e||e.time("Overall");var E=this._transport.getRenderingIntent(l,c,A,S),M=E.renderingIntent,C=E.cacheKey;f(vu,this,!1),y||(y=this._transport.getOptionalContentConfig(M));var R=this._intentStates.get(C);R||(R=Object.create(null),this._intentStates.set(C,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);var T,I=!!(M&ht);R.displayReadyCapability||(R.displayReadyCapability=Promise.withResolvers(),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(T=this._stats)||void 0===T||T.time("Page Request"),this._pumpOperatorList(E));var D=function(t){var e;(R.renderTasks.delete(L),I&&f(vu,r,!0),i(pu,r,yu).call(r),t?(L.capability.reject(t),r._abortOperatorList({intentState:R,reason:t instanceof Error?t:new Error(t)})):L.capability.resolve(),r._stats)&&(r._stats.timeEnd("Rendering"),r._stats.timeEnd("Overall"),null!==(e=globalThis.Stats)&&void 0!==e&&e.enabled&&globalThis.Stats.add(r.pageNumber,r._stats))},L=new Hu({callback:D,params:{canvasContext:a,viewport:s,transform:d,background:p},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:w,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!I,pdfBug:this._pdfBug,pageColors:k});((n=R).renderTasks||(n.renderTasks=new Set)).add(L);var O=L.task;return Promise.all([R.displayReadyCapability.promise,y]).then(function(t){var e,n=P(t,2),i=n[0],a=n[1];if(r.destroyed)D();else{if(null===(e=r._stats)||void 0===e||e.time("Rendering"),!(a.renderingIntent&M))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:i,optionalContentConfig:a}),L.operatorListChanged()}}).catch(D),O}},{key:"getOperatorList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.intent,n=void 0===e?"display":e,i=t.annotationMode,r=void 0===i?yt.ENABLE:i,a=t.printAnnotationStorage,s=void 0===a?null:a,o=t.isEditing,l=void 0!==o&&o;var u,c,h,d=this._transport.getRenderingIntent(n,r,s,l,!0),f=this._intentStates.get(d.cacheKey);(f||(f=Object.create(null),this._intentStates.set(d.cacheKey,f)),f.opListReadCapability)||((u=Object.create(null)).operatorListChanged=function(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(u))},f.opListReadCapability=Promise.withResolvers(),((c=f).renderTasks||(c.renderTasks=new Set)).add(u),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(h=this._stats)||void 0===h||h.time("Page Request"),this._pumpOperatorList(d));return f.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.includeMarkedContent,n=void 0!==e&&e,i=t.disableNormalization,r=void 0!==i&&i;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===n,disableNormalization:!0===r},{highWaterMark:100,size:function(t){return t.items.length}})}},{key:"getTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(function(t){return iu.textContent(t)});var e=this.streamTextContent(t);return new Promise(function(t,n){var i=e.getReader(),r={items:[],styles:Object.create(null),lang:null};!function e(){i.read().then(function(n){var i,a,s=n.value;n.done?t(r):(null!==(i=r.lang)&&void 0!==i||(r.lang=s.lang),Object.assign(r.styles,s.styles),(a=r.items).push.apply(a,O(s.items)),e())},n)}()})}},{key:"getStructTree",value:function(){return this._transport.getStructTree(this._pageIndex)}},{key:"_destroy",value:function(){this.destroyed=!0;var t,e=[],n=m(this._intentStates.values());try{for(n.s();!(t=n.n()).done;){var i=t.value;if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability){var r,a=m(i.renderTasks);try{for(a.s();!(r=a.n()).done;){var s=r.value;e.push(s.completed),s.cancel()}}catch(t){a.e(t)}finally{a.f()}}}}catch(t){n.e(t)}finally{n.f()}return this.objs.clear(),f(vu,this,!1),Promise.all(e)}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f(vu,this,!0);var e=i(pu,this,yu).call(this);return t&&e&&this._stats&&(this._stats=new Re),e}},{key:"_startRenderPage",value:function(t,e){var n,i,r=this._intentStates.get(e);r&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=r.displayReadyCapability)||void 0===i||i.resolve(t))}},{key:"_renderPageChunk",value:function(t,e){for(var n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;var a,s=m(e.renderTasks);try{for(s.s();!(a=s.n()).done;){a.value.operatorListChanged()}}catch(t){s.e(t)}finally{s.f()}t.lastChunk&&i(pu,this,yu).call(this)}},{key:"_pumpOperatorList",value:function(t){var e=this,n=t.renderingIntent,r=t.cacheKey,a=t.annotationStorageSerializable,s=t.modifiedIds,o=a.map,l=a.transfer,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:n,cacheKey:r,annotationStorage:o,modifiedIds:s},l).getReader(),c=this._intentStates.get(r);c.streamReader=u;var h=function(){u.read().then(function(t){var n=t.value;t.done?c.streamReader=null:e._transport.destroyed||(e._renderPageChunk(n,c),h())},function(t){if(c.streamReader=null,!e._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;var n,r=m(c.renderTasks);try{for(r.s();!(n=r.n()).done;){n.value.operatorListChanged()}}catch(t){r.e(t)}finally{r.f()}i(pu,e,yu).call(e)}if(c.displayReadyCapability)c.displayReadyCapability.reject(t);else{if(!c.opListReadCapability)throw t;c.opListReadCapability.reject(t)}}})};h()}},{key:"_abortOperatorList",value:function(t){var e=this,n=t.intentState,i=t.reason,r=t.force,a=void 0!==r&&r;if(n.streamReader){if(n.streamReaderCancelTimeout&&(clearTimeout(n.streamReaderCancelTimeout),n.streamReaderCancelTimeout=null),!a){if(n.renderTasks.size>0)return;if(i instanceof xe){var s=100;return i.extraDelay>0&&i.extraDelay<1e3&&(s+=i.extraDelay),void(n.streamReaderCancelTimeout=setTimeout(function(){n.streamReaderCancelTimeout=null,e._abortOperatorList({intentState:n,reason:i,force:!0})},s))}}if(n.streamReader.cancel(new ie(i.message)).catch(function(){}),n.streamReader=null,!this._transport.destroyed){var o,l=m(this._intentStates);try{for(l.s();!(o=l.n()).done;){var u=P(o.value,2),c=u[0];if(u[1]===n){this._intentStates.delete(c);break}}}catch(t){l.e(t)}finally{l.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]);var t}();function yu(){if(!h(vu,this)||this.destroyed)return!1;var t,e=m(this._intentStates.values());try{for(e.s();!(t=e.n()).done;){var n=t.value,i=n.renderTasks,r=n.operatorList;if(i.size>0||!r.lastChunk)return!1}}catch(t){e.e(t)}finally{e.f()}return this._intentStates.clear(),this.objs.clear(),f(vu,this,!1),!0}var mu=new WeakMap,wu=new WeakMap,bu=new WeakMap,ku=new WeakMap,_u=new WeakSet,Au=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,r=void 0===n?null:n,a=e.port,s=void 0===a?null:a,o=e.verbosity,l=void 0===o?Ht():o;if(c(this,t),p(this,_u),d(this,mu,Promise.withResolvers()),d(this,wu,null),d(this,bu,null),d(this,ku,null),this.name=r,this.destroyed=!1,this.verbosity=l,s){if(Iu._.has(s))throw new Error("Cannot use more than one PDFWorker per port.");Iu._.set(s,this),i(_u,this,Su).call(this,s)}else i(_u,this,Eu).call(this)}return y(t,[{key:"promise",get:function(){return h(mu,this).promise}},{key:"port",get:function(){return h(bu,this)}},{key:"messageHandler",get:function(){return h(wu,this)}},{key:"destroy",value:function(){var t,e;this.destroyed=!0,null===(t=h(ku,this))||void 0===t||t.terminate(),f(ku,this,null),Iu._.delete(h(bu,this)),f(bu,this,null),null===(e=h(wu,this))||void 0===e||e.destroy(),f(wu,this,null)}}],[{key:"create",value:function(e){var n=i(t,this,Iu)._.get(null==e?void 0:e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new t(e)}},{key:"workerSrc",get:function(){if(Do.workerSrc)return Do.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_setupFakeWorkerGlobal",get:function(){var e=this,n=function(){var n=o(C().m(function n(){var i;return C().w(function(n){for(;;)switch(n.n){case 0:if(!v(t,e,Cu)){n.n=1;break}return n.a(2,v(t,e,Cu));case 1:return n.n=2,import(e.workerSrc);case 2:return i=n.v,n.a(2,i.WorkerMessageHandler)}},n)}));return function(){return n.apply(this,arguments)}}();return Qt(this,"_setupFakeWorkerGlobal",n())}}])}();function xu(){h(mu,this).resolve(),h(wu,this).send("configure",{verbosity:this.verbosity})}function Su(t){f(bu,this,t),f(wu,this,new ts("main","worker",t)),h(wu,this).on("ready",function(){}),i(_u,this,xu).call(this)}function Eu(){var t=this;if(Tu._||Cu())i(_u,this,Mu).call(this);else{var e=Y.workerSrc;try{Y._isSameOrigin(window.location,e)||(e=Y._createCDNWrapper(new URL(e,window.location).href));var n=new Worker(e,{type:"module"}),r=new ts("main","worker",n),a=function(){s.abort(),r.destroy(),n.terminate(),t.destroyed?h(mu,t).reject(new Error("Worker was destroyed")):i(_u,t,Mu).call(t)},s=new AbortController;n.addEventListener("error",function(){h(ku,t)||a()},{signal:s.signal}),r.on("test",function(e){s.abort(),!t.destroyed&&e?(f(wu,t,r),f(bu,t,n),f(ku,t,n),i(_u,t,xu).call(t)):a()}),r.on("ready",function(e){if(s.abort(),t.destroyed)a();else try{o()}catch(e){i(_u,t,Mu).call(t)}});var o=function(){var t=new Uint8Array;r.send("test",t,[t.buffer])};return void o()}catch(t){Gt("The worker has been disabled.")}i(_u,this,Mu).call(this)}}function Mu(){var t=this;Tu._||(Vt("Setting up fake worker."),Tu._=!0),Y._setupFakeWorkerGlobal.then(function(e){var n,r;if(t.destroyed)h(mu,t).reject(new Error("Worker was destroyed"));else{var a=new Ba;f(bu,t,a);var s="fake".concat((Ru._=(n=Ru._,r=n++,n),r)),o=new ts(s+"_worker",s,a);e.setup(o,a),f(wu,t,new ts(s,s+"_worker",a)),i(_u,t,xu).call(t)}}).catch(function(e){h(mu,t).reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}function Cu(t){try{var e;return(null===(e=globalThis.pdfjsWorker)||void 0===e?void 0:e.WorkerMessageHandler)||null}catch(t){return null}}Y=Au;var Ru={_:0},Tu={_:!1},Iu={_:new WeakMap};st&&(Tu._=i(Y,Y,!0),Do.workerSrc||(Do.workerSrc="./pdf.worker.mjs")),Y._isSameOrigin=function(t,e){var n=URL.parse(t);if(null==n||!n.origin||"null"===n.origin)return!1;var i=new URL(e,n);return n.origin===i.origin},Y._createCDNWrapper=function(t){var e='await import("'.concat(t,'");');return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Y.fromPort=function(t){var e;if(e="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+e),null==t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Y.create(t)};var Pu=new WeakMap,Du=new WeakMap,Lu=new WeakMap,Ou=new WeakMap,Fu=new WeakMap,Nu=new WeakSet,Wu=function(){return y(function t(e,n,i,r,a){c(this,t),p(this,Nu),d(this,Pu,new Map),d(this,Du,new Map),d(this,Lu,new Map),d(this,Ou,new Map),d(this,Fu,null),this.messageHandler=e,this.loadingTask=n,this.commonObjs=new Al,this.fontLoader=new Pa({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()},[{key:"annotationStorage",get:function(){return Qt(this,"annotationStorage",new Ma)}},{key:"getRenderingIntent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yt.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=ct,s=_a;switch(t){case"any":a=ut;break;case"display":break;case"print":a=ht;break;default:Vt("getRenderingIntent - invalid intent: ".concat(t))}var o=a&ht&&n instanceof Ta?n:this.annotationStorage;switch(e){case yt.DISABLE:a+=vt;break;case yt.ENABLE:break;case yt.ENABLE_FORMS:a+=dt;break;case yt.ENABLE_STORAGE:a+=ft,s=o.serializable;break;default:Vt("getRenderingIntent - invalid annotationMode: ".concat(e))}i&&(a+=pt),r&&(a+=gt);var l=o.modifiedIds,u=l.ids,c=l.hash;return{renderingIntent:a,cacheKey:[a,s.hash,c].join("_"),annotationStorageSerializable:s,modifiedIds:u}}},{key:"destroy",value:function(){var t,e=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(t=h(Fu,this))||void 0===t||t.reject(new Error("Worker was destroyed during onPassword callback"));var n,i=[],r=m(h(Du,this).values());try{for(r.s();!(n=r.n()).done;){var a=n.value;i.push(a._destroy())}}catch(t){r.e(t)}finally{r.f()}h(Du,this).clear(),h(Lu,this).clear(),h(Ou,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var s=this.messageHandler.sendWithPromise("Terminate",null);return i.push(s),Promise.all(i).then(function(){var t,n;e.commonObjs.clear(),e.fontLoader.clear(),h(Pu,e).clear(),e.filterFactory.destroy(),Gl.cleanup(),null===(t=e._networkStream)||void 0===t||t.cancelAllRequests(new ie("Worker was terminated.")),null===(n=e.messageHandler)||void 0===n||n.destroy(),e.messageHandler=null,e.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var t=this,e=this.messageHandler,n=this.loadingTask;e.on("GetReader",function(e,n){Xt(t._networkStream,"GetReader - no `IPDFStream` instance available."),t._fullReader=t._networkStream.getFullReader(),t._fullReader.onProgress=function(e){t._lastProgress={loaded:e.loaded,total:e.total}},n.onPull=function(){t._fullReader.read().then(function(t){var e=t.value;t.done?n.close():(Xt(e instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(e),1,[e]))}).catch(function(t){n.error(t)})},n.onCancel=function(e){t._fullReader.cancel(e),n.ready.catch(function(e){if(!t.destroyed)throw e})}}),e.on("ReaderHeadersReady",function(){var e=o(C().m(function e(i){var r,a,s,o,l;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t._fullReader.headersReady;case 1:return r=t._fullReader,a=r.isStreamingSupported,s=r.isRangeSupported,o=r.contentLength,a&&s||(t._lastProgress&&(null===(l=n.onProgress)||void 0===l||l.call(n,t._lastProgress)),t._fullReader.onProgress=function(t){var e;null===(e=n.onProgress)||void 0===e||e.call(n,{loaded:t.loaded,total:t.total})}),e.a(2,{isStreamingSupported:a,isRangeSupported:s,contentLength:o})}},e)}));return function(t){return e.apply(this,arguments)}}()),e.on("GetRangeReader",function(e,n){Xt(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var i=t._networkStream.getRangeReader(e.begin,e.end);i?(n.onPull=function(){i.read().then(function(t){var e=t.value;t.done?n.close():(Xt(e instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(e),1,[e]))}).catch(function(t){n.error(t)})},n.onCancel=function(e){i.cancel(e),n.ready.catch(function(e){if(!t.destroyed)throw e})}):n.close()}),e.on("GetDoc",function(e){var i=e.pdfInfo;t._numPages=i.numPages,t._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,n._capability.resolve(new fu(i,t))}),e.on("DocException",function(t){n._capability.reject(Ja(t))}),e.on("PasswordRequest",function(e){f(Fu,t,Promise.withResolvers());try{if(!n.onPassword)throw Ja(e);n.onPassword(function(e){e instanceof Error?h(Fu,t).reject(e):h(Fu,t).resolve({password:e})},e.code)}catch(e){h(Fu,t).reject(e)}return h(Fu,t).promise}),e.on("DataLoaded",function(e){var i;null===(i=n.onProgress)||void 0===i||i.call(n,{loaded:e.length,total:e.length}),t.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",function(e){t.destroyed||h(Du,t).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",function(n){var i,r=P(n,3),a=r[0],s=r[1],o=r[2];if(t.destroyed)return null;if(t.commonObjs.has(a))return null;switch(s){case"Font":if("error"in o){var l=o.error;Vt("Error during font loading: ".concat(l)),t.commonObjs.resolve(a,l);break}var u=t._params.pdfBug&&null!==(i=globalThis.FontInspector)&&void 0!==i&&i.enabled?function(t,e){return globalThis.FontInspector.fontAdded(t,e)}:null,c=new Da(o,u);t.fontLoader.bind(c).catch(function(){return e.sendWithPromise("FontFallback",{id:a})}).finally(function(){!c.fontExtraProperties&&c.data&&(c.data=null),t.commonObjs.resolve(a,c)});break;case"CopyLocalImage":var d=o.imageRef;Xt(d,"The imageRef must be defined.");var f,v=m(h(Du,t).values());try{for(v.s();!(f=v.n()).done;){var p,g=m(f.value.objs);try{for(g.s();!(p=g.n()).done;){var y=P(p.value,2)[1];if((null==y?void 0:y.ref)===d)return y.dataLen?(t.commonObjs.resolve(a,nt.exports.cloneDeep(y)),y.dataLen):null}}catch(t){g.e(t)}finally{g.f()}}}catch(t){v.e(t)}finally{v.f()}break;case"FontPath":case"Image":case"Pattern":t.commonObjs.resolve(a,o);break;default:throw new Error("Got unknown common object type ".concat(s))}return null}),e.on("obj",function(e){var n=P(e,4),i=n[0],r=n[1],a=n[2],s=n[3];if(!t.destroyed){var o,l=h(Du,t).get(r);if(!l.objs.has(i))if(0!==l._intentStates.size)switch(a){case"Image":case"Pattern":l.objs.resolve(i,s);break;default:throw new Error("Got unknown object type ".concat(a))}else null==s||null===(o=s.bitmap)||void 0===o||o.close()}}),e.on("DocProgress",function(e){var i;t.destroyed||null===(i=n.onProgress)||void 0===i||i.call(n,{loaded:e.loaded,total:e.total})}),e.on("FetchBinaryData",function(){var e=o(C().m(function e(n){var i;return C().w(function(e){for(;;)switch(e.n){case 0:if(!t.destroyed){e.n=1;break}throw new Error("Worker was destroyed.");case 1:if(i=t[n.type]){e.n=2;break}throw new Error("".concat(n.type," not initialized, see the `useWorkerFetch` parameter."));case 2:return e.a(2,i.fetch(n))}},e)}));return function(t){return e.apply(this,arguments)}}())}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"saveDocument",value:function(){var t,e,n=this;this.annotationStorage.size<=0&&Vt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");var i=this.annotationStorage.serializable,r=i.map,a=i.transfer;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:r,filename:null!==(t=null===(e=this._fullReader)||void 0===e?void 0:e.filename)&&void 0!==t?t:null},a).finally(function(){n.annotationStorage.resetModified()})}},{key:"getPage",value:function(t){var e=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));var n=t-1,i=h(Lu,this).get(n);if(i)return i;var r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(function(i){if(e.destroyed)throw new Error("Transport destroyed");i.refStr&&h(Ou,e).set(i.refStr,t);var r=new gu(n,i,e,e._params.pdfBug);return h(Du,e).set(n,r),r});return h(Lu,this).set(n,r),r}},{key:"getPageIndex",value:function(t){return Oa(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}},{key:"getAnnotations",value:function(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}},{key:"getFieldObjects",value:function(){return i(Nu,this,Bu).call(this,"GetFieldObjects")}},{key:"hasJSActions",value:function(){return i(Nu,this,Bu).call(this,"HasJSActions")}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getDocJSActions",value:function(){return i(Nu,this,Bu).call(this,"GetDocJSActions")}},{key:"getPageJSActions",value:function(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getStructTree",value:function(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(t){return i(Nu,this,Bu).call(this,"GetOptionalContentConfig").then(function(e){return new Qo(e,t)})}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var t=this,e="GetMetadata",n=h(Pu,this).get(e);if(n)return n;var i=this.messageHandler.sendWithPromise(e,null).then(function(e){var n,i,r,a;return{info:e[0],metadata:e[1]?new Wo(e[1]):null,contentDispositionFilename:null!==(n=null===(i=t._fullReader)||void 0===i?void 0:i.filename)&&void 0!==n?n:null,contentLength:null!==(r=null===(a=t._fullReader)||void 0===a?void 0:a.contentLength)&&void 0!==r?r:null}});return h(Pu,this).set(e,i),i}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:(t=o(C().m(function t(){var e,n,i,r,a,s=arguments;return C().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=s.length>0&&void 0!==s[0]&&s[0],!this.destroyed){t.n=1;break}return t.a(2);case 1:return t.n=2,this.messageHandler.sendWithPromise("Cleanup",null);case 2:n=m(h(Du,this).values()),t.p=3,n.s();case 4:if((i=n.n()).done){t.n=6;break}if((r=i.value).cleanup()){t.n=5;break}throw new Error("startCleanup: Page ".concat(r.pageNumber," is currently rendering."));case 5:t.n=4;break;case 6:t.n=8;break;case 7:t.p=7,a=t.v,n.e(a);case 8:return t.p=8,n.f(),t.f(8);case 9:this.commonObjs.clear(),e||this.fontLoader.clear(),h(Pu,this).clear(),this.filterFactory.destroy(!0),Gl.cleanup();case 10:return t.a(2)}},t,this,[[3,7,8,9]])})),function(){return t.apply(this,arguments)})},{key:"cachedPageNumber",value:function(t){var e;if(!Oa(t))return null;var n=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return null!==(e=h(Ou,this).get(n))&&void 0!==e?e:null}}]);var t}();function Bu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=h(Pu,this).get(t);if(n)return n;var i=this.messageHandler.sendWithPromise(t,e);return h(Pu,this).set(t,i),i}var ju=new WeakMap,zu=function(){return y(function t(e){c(this,t),d(this,ju,null),w(this,"onContinue",null),w(this,"onError",null),f(ju,this,e)},[{key:"promise",get:function(){return h(ju,this).capability.promise}},{key:"cancel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;h(ju,this).cancel(null,t)}},{key:"separateAnnots",get:function(){var t=h(ju,this).operatorList.separateAnnots;if(!t)return!1;var e=h(ju,this).annotationCanvasMap;return t.form||t.canvas&&(null==e?void 0:e.size)>0}}])}(),Uu=new WeakMap,Hu=function(){return y(function t(e){var n=e.callback,i=e.params,r=e.objs,a=e.commonObjs,s=e.annotationCanvasMap,o=e.operatorList,l=e.pageIndex,u=e.canvasFactory,h=e.filterFactory,f=e.useRequestAnimationFrame,v=void 0!==f&&f,p=e.pdfBug,g=void 0!==p&&p,y=e.pageColors,m=void 0===y?null:y;c(this,t),d(this,Uu,null),this.callback=n,this.params=i,this.objs=r,this.commonObjs=a,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=u,this.filterFactory=h,this._pdfBug=g,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===v&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zu(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas},[{key:"completed",get:function(){return this.capability.promise.catch(function(){})}},{key:"initializeGraphics",value:function(t){var e,n,i=t.transparency,r=void 0!==i&&i,a=t.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(Gu._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Gu._.add(this._canvas)}this._pdfBug&&null!==(e=globalThis.StepperManager)&&void 0!==e&&e.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var s=this.params,o=s.canvasContext,l=s.viewport,u=s.transform,c=s.background;this.gfx=new Co(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:a},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:u,viewport:l,transparency:r,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}}},{key:"cancel",value:function(){var t,e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(t=this.gfx)||void 0===t||t.endDrawing(),h(Uu,this)&&(window.cancelAnimationFrame(h(Uu,this)),f(Uu,this,null)),Gu._.delete(this._canvas),i||(i=new xe("Rendering cancelled, page ".concat(this._pageIndex+1),r)),this.callback(i),null===(e=(n=this.task).onError)||void 0===e||e.call(n,i)}},{key:"operatorListChanged",value:function(){var t;this.graphicsReady?(null===(t=this.stepper)||void 0===t||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var t=this;this._useRequestAnimationFrame?f(Uu,this,window.requestAnimationFrame(function(){f(Uu,t,null),t._nextBound().catch(t._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(t=o(C().m(function t(){return C().w(function(t){for(;;)switch(t.n){case 0:if(!this.cancelled){t.n=1;break}return t.a(2);case 1:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Gu._.delete(this._canvas),this.callback()));case 2:return t.a(2)}},t,this)})),function(){return t.apply(this,arguments)})}]);var t}(),Gu={_:new WeakSet},Vu="5.3.31",qu="47ad820d9";function Xu(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function Yu(t){return Math.max(0,Math.min(255,255*t))}at(531);var Ku=function(){return y(function t(){c(this,t)},null,[{key:"CMYK_G",value:function(t){var e=P(t,4),n=e[0],i=e[1],r=e[2],a=e[3];return["G",1-Math.min(1,.3*n+.59*r+.11*i+a)]}},{key:"G_CMYK",value:function(t){return["CMYK",0,0,0,1-P(t,1)[0]]}},{key:"G_RGB",value:function(t){var e=P(t,1)[0];return["RGB",e,e,e]}},{key:"G_rgb",value:function(t){var e=P(t,1)[0];return[e=Yu(e),e,e]}},{key:"G_HTML",value:function(t){var e=Xu(P(t,1)[0]);return"#".concat(e).concat(e).concat(e)}},{key:"RGB_G",value:function(t){var e=P(t,3);return["G",.3*e[0]+.59*e[1]+.11*e[2]]}},{key:"RGB_rgb",value:function(t){return t.map(Yu)}},{key:"RGB_HTML",value:function(t){return"#".concat(t.map(Xu).join(""))}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"T_rgb",value:function(){return[null]}},{key:"CMYK_RGB",value:function(t){var e=P(t,4),n=e[0],i=e[1],r=e[2],a=e[3];return["RGB",1-Math.min(1,n+a),1-Math.min(1,r+a),1-Math.min(1,i+a)]}},{key:"CMYK_rgb",value:function(t){var e=P(t,4),n=e[0],i=e[1],r=e[2],a=e[3];return[Yu(1-Math.min(1,n+a)),Yu(1-Math.min(1,r+a)),Yu(1-Math.min(1,i+a))]}},{key:"CMYK_HTML",value:function(t){var e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}},{key:"RGB_CMYK",value:function(t){var e=P(t,3),n=1-e[0],i=1-e[1],r=1-e[2];return["CMYK",n,i,r,Math.min(n,i,r)]}}])}(),Qu=function(){return y(function t(){c(this,t)},[{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");var i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(t,"px")),i.setAttribute("height","".concat(e,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(t," ").concat(e)),i}},{key:"createElement",value:function(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}},{key:"_createSVG",value:function(t){qt("Abstract method `_createSVG` called.")}}])}(),Ju=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"_createSVG",value:function(t){return document.createElementNS(we,t)}}])}(Qu),Zu=function(){return y(function t(){c(this,t)},null,[{key:"setupStorage",value:function(t,e,n,i,r){var a=i.getValue(e,{value:null});switch(n.name){case"textarea":if(null!==a.value&&(t.textContent=a.value),"print"===r)break;t.addEventListener("input",function(t){i.setValue(e,{value:t.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),"print"===r)break;t.addEventListener("change",function(t){i.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})})}else{if(null!==a.value&&t.setAttribute("value",a.value),"print"===r)break;t.addEventListener("input",function(t){i.setValue(e,{value:t.target.value})})}break;case"select":if(null!==a.value){t.setAttribute("value",a.value);var s,o=m(n.children);try{for(o.s();!(s=o.n()).done;){var l=s.value;l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}}catch(t){o.e(t)}finally{o.f()}}t.addEventListener("input",function(t){var n=t.target.options,r=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(e,{value:r})})}}},{key:"setAttributes",value:function(t){var e=t.html,n=t.element,i=t.storage,r=void 0===i?null:i,a=t.intent,s=t.linkService,o=n.attributes,l=e instanceof HTMLAnchorElement;"radio"===o.type&&(o.name="".concat(o.name,"-").concat(a));for(var u=0,c=Object.entries(o);u<c.length;u++){var h=P(c[u],2),d=h[0],f=h[1];if(null!=f)switch(d){case"class":f.length&&e.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!l||"href"!==d&&"newWindow"!==d)&&e.setAttribute(d,f)}}l&&s.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,n,r)}},{key:"render",value:function(t){var e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,r=t.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:n});var s="richText"!==r,o=t.div;if(o.append(a),t.viewport){var l="matrix(".concat(t.viewport.transform.join(","),")");o.style.transform=l}s&&o.setAttribute("class","xfaLayer xfaFont");var u=[];if(0===i.children.length){if(i.value){var c=document.createTextNode(i.value);a.append(c),s&&iu.shouldBuildText(i.name)&&u.push(c)}return{textDivs:u}}for(var h=[[i,-1,a]];h.length>0;){var d,f,v=P(h.at(-1),3),p=v[0],g=v[1],y=v[2];if(g+1!==p.children.length){var w=p.children[++h.at(-1)[1]];if(null!==w){var b=w.name;if("#text"!==b){var k=null!=w&&null!==(d=w.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(w.attributes.xmlns,b):document.createElement(b);if(y.append(k),w.attributes&&this.setAttributes({html:k,element:w,storage:e,intent:r,linkService:n}),(null===(f=w.children)||void 0===f?void 0:f.length)>0)h.push([w,-1,k]);else if(w.value){var _=document.createTextNode(w.value);s&&iu.shouldBuildText(b)&&u.push(_),k.append(_)}}else{var A=document.createTextNode(w.value);u.push(A),y.append(A)}}}else h.pop()}var x,S=m(o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(S.s();!(x=S.n()).done;){x.value.setAttribute("readOnly",!0)}}catch(t){S.e(t)}finally{S.f()}return{textDivs:u}}},{key:"update",value:function(t){var e="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=e,t.div.hidden=!1}}])}(),$u=1e3,tc=new WeakSet,ec=function(){return y(function t(){c(this,t)},null,[{key:"create",value:function(t){switch(t.data.annotationType){case Ct.LINK:return new uc(t);case Ct.TEXT:return new fc(t);case Ct.WIDGET:switch(t.data.fieldType){case"Tx":return new pc(t);case"Btn":return t.data.radioButton?new mc(t):t.data.checkBox?new yc(t):new wc(t);case"Ch":return new bc(t);case"Sig":return new gc(t)}return new vc(t);case Ct.POPUP:return new kc(t);case Ct.FREETEXT:return new Zc(t);case Ct.LINE:return new th(t);case Ct.SQUARE:return new nh(t);case Ct.CIRCLE:return new rh(t);case Ct.POLYLINE:return new sh(t);case Ct.CARET:return new lh(t);case Ct.INK:return new dh(t);case Ct.POLYGON:return new oh(t);case Ct.HIGHLIGHT:return new vh(t);case Ct.UNDERLINE:return new ph(t);case Ct.SQUIGGLY:return new gh(t);case Ct.STRIKEOUT:return new yh(t);case Ct.STAMP:return new mh(t);case Ct.FILEATTACHMENT:return new kh(t);default:return new sc(t)}}}])}(),nc=new WeakMap,ic=new WeakMap,rc=new WeakMap,ac=new WeakSet,sc=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.isRenderable,r=void 0!==i&&i,a=n.ignoreBorder,s=void 0!==a&&a,o=n.createQuadrilaterals,l=void 0!==o&&o;c(this,t),p(this,ac),d(this,nc,null),d(this,ic,!1),d(this,rc,null),this.isRenderable=r,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,r&&(this.container=this._createContainer(s)),l&&this._createQuadrilaterals()}return y(t,[{key:"_isEditable",get:function(){return this.data.isEditable}},{key:"hasPopupData",get:function(){return t._hasPopupData(this.data)}},{key:"updateEdited",value:function(t){var e;if(this.container){h(nc,this)||f(nc,this,{rect:this.data.rect.slice(0)});var n=t.rect;n&&i(ac,this,oc).call(this,n),null===(e=h(rc,this))||void 0===e||e.popup.updateEdited(t)}}},{key:"resetEdited",value:function(){var t;h(nc,this)&&(i(ac,this,oc).call(this,h(nc,this).rect),null===(t=h(rc,this))||void 0===t||t.popup.resetEdited(),f(nc,this,null))}},{key:"_createContainer",value:function(t){var e=this.data,n=this.parent,i=n.page,r=n.viewport,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),this instanceof vc||(a.tabIndex=$u);var s=a.style;if(s.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof kc){var o=e.rotation;return e.hasOwnCanvas||0===o||this.setRotation(o,a),a}var l=this.width,u=this.height;if(!t&&e.borderStyle.width>0){s.borderWidth="".concat(e.borderStyle.width,"px");var c=e.borderStyle.horizontalCornerRadius,h=e.borderStyle.verticalCornerRadius;if(c>0||h>0){var d="calc(".concat(c,"px * var(--total-scale-factor)) / calc(").concat(h,"px * var(--total-scale-factor))");s.borderRadius=d}else if(this instanceof mc){var v="calc(".concat(l,"px * var(--total-scale-factor)) / calc(").concat(u,"px * var(--total-scale-factor))");s.borderRadius=v}switch(e.borderStyle.style){case Rt:s.borderStyle="solid";break;case Tt:s.borderStyle="dashed";break;case It:Vt("Unimplemented border style: beveled");break;case Pt:Vt("Unimplemented border style: inset");break;case Dt:s.borderBottomStyle="solid"}var p=e.borderColor||null;p?(f(ic,this,!0),s.borderColor=le.makeHexColor(0|p[0],0|p[1],0|p[2])):s.borderWidth=0}var g=le.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),y=r.rawDims,m=y.pageWidth,w=y.pageHeight,b=y.pageX,k=y.pageY;s.left="".concat(100*(g[0]-b)/m,"%"),s.top="".concat(100*(g[1]-k)/w,"%");var _=e.rotation;return e.hasOwnCanvas||0===_?(s.width="".concat(100*l/m,"%"),s.height="".concat(100*u/w,"%")):this.setRotation(_,a),a}},{key:"setRotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(this.data.rect){var n=this.parent.viewport.rawDims,i=n.pageWidth,r=n.pageHeight,a=this.width,s=this.height;if(t%180!=0){var o=[s,a];a=o[0],s=o[1]}e.style.width="".concat(100*a/i,"%"),e.style.height="".concat(100*s/r,"%"),e.setAttribute("data-main-rotation",(360-t)%360)}}},{key:"_commonActions",get:function(){var t=this,e=function(e,n,i){var r=i.detail[e],a=r[0],s=r.slice(1);i.target.style[n]=Ku["".concat(a,"_HTML")](s),t.annotationStorage.setValue(t.data.id,w({},n,Ku["".concat(a,"_rgb")](s)))};return Qt(this,"_commonActions",{display:function(e){var n=e.detail.display,i=n%2==1;t.container.style.visibility=i?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{noView:i,noPrint:1===n||2===n})},print:function(e){t.annotationStorage.setValue(t.data.id,{noPrint:!e.detail.print})},hidden:function(e){var n=e.detail.hidden;t.container.style.visibility=n?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{noPrint:n,noView:n})},focus:function(t){setTimeout(function(){return t.target.focus({preventScroll:!1})},0)},userName:function(t){t.target.title=t.detail.userName},readonly:function(t){t.target.disabled=t.detail.readonly},required:function(e){t._setRequired(e.target,e.detail.required)},bgColor:function(t){e("bgColor","backgroundColor",t)},fillColor:function(t){e("fillColor","backgroundColor",t)},fgColor:function(t){e("fgColor","color",t)},textColor:function(t){e("textColor","color",t)},borderColor:function(t){e("borderColor","borderColor",t)},strokeColor:function(t){e("strokeColor","borderColor",t)},rotation:function(e){var n=e.detail.rotation;t.setRotation(n),t.annotationStorage.setValue(t.data.id,{rotation:n})}})}},{key:"_dispatchEventFromSandbox",value:function(t,e){for(var n=this._commonActions,i=0,r=Object.keys(e.detail);i<r.length;i++){var a=r[i],s=t[a]||n[a];null==s||s(e)}}},{key:"_setDefaultPropertiesFromJS",value:function(t){if(this.enableScripting){var e=this.annotationStorage.getRawValue(this.data.id);if(e)for(var n=this._commonActions,i=0,r=Object.entries(e);i<r.length;i++){var a=P(r[i],2),s=a[0],o=a[1],l=n[s];if(l)l({detail:w({},s,o),target:t}),delete e[s]}}}},{key:"_createQuadrilaterals",value:function(){if(this.container){var t=this.data.quadPoints;if(t){var e=this.data.rect.map(function(t){return Math.fround(t)}),n=P(e,4),i=n[0],r=n[1],a=n[2],s=n[3];if(8===t.length){var o=P(t.subarray(2,6),4),l=o[0],u=o[1],c=o[2],d=o[3];if(a===l&&s===u&&i===c&&r===d)return}var f,v=this.container.style;if(h(ic,this)){var p=v.borderColor,g=v.borderWidth;v.borderWidth=0,f=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(p,'" stroke-width="').concat(g,'">')],this.container.classList.add("hasBorder")}var y=a-i,m=s-r,w=this.svgFactory,b=w.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0);var k=w.createElement("defs");b.append(k);var _=w.createElement("clipPath"),A="clippath_".concat(this.data.id);_.setAttribute("id",A),_.setAttribute("clipPathUnits","objectBoundingBox"),k.append(_);for(var x=2,S=t.length;x<S;x+=8){var E,M=t[x],C=t[x+1],R=t[x+2],T=t[x+3],I=w.createElement("rect"),D=(R-i)/y,L=(s-C)/m,O=(M-R)/y,F=(C-T)/m;I.setAttribute("x",D),I.setAttribute("y",L),I.setAttribute("width",O),I.setAttribute("height",F),_.append(I),null===(E=f)||void 0===E||E.push('<rect vector-effect="non-scaling-stroke" x="'.concat(D,'" y="').concat(L,'" width="').concat(O,'" height="').concat(F,'"/>'))}h(ic,this)&&(f.push("</g></svg>')"),v.backgroundImage=f.join("")),this.container.append(b),this.container.style.clipPath="url(#".concat(A,")")}}}},{key:"_createPopup",value:function(){var t=this.data,e=f(rc,this,new kc({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}},{key:"render",value:function(){qt("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];if(this._fieldObjects){var i=this._fieldObjects[t];if(i){var r,a=m(i);try{for(a.s();!(r=a.n()).done;){var s=r.value,o=s.page,l=s.id,u=s.exportValues;if(-1!==o&&l!==e){var c="string"==typeof u?u:null,h=document.querySelector('[data-element-id="'.concat(l,'"]'));!h||tc.has(h)?n.push({id:l,exportValue:c,domElement:h}):Vt("_getElementsByName - element not allowed: ".concat(l))}}}catch(t){a.e(t)}finally{a.f()}}return n}var d,f=m(document.getElementsByName(t));try{for(f.s();!(d=f.n()).done;){var v=d.value,p=v.exportValue,g=v.getAttribute("data-element-id");g!==e&&(tc.has(v)&&n.push({id:g,exportValue:p,domElement:v}))}}catch(t){f.e(t)}finally{f.f()}return n}},{key:"show",value:function(){var t;this.container&&(this.container.hidden=!1),null===(t=this.popup)||void 0===t||t.maybeShow()}},{key:"hide",value:function(){var t;this.container&&(this.container.hidden=!0),null===(t=this.popup)||void 0===t||t.forceHide()}},{key:"getElementsToTriggerPopup",value:function(){return this.container}},{key:"addHighlightArea",value:function(){var t=this.getElementsToTriggerPopup();if(Array.isArray(t)){var e,n=m(t);try{for(n.s();!(e=n.n()).done;){e.value.classList.add("highlightArea")}}catch(t){n.e(t)}finally{n.f()}}else t.classList.add("highlightArea")}},{key:"_editOnDoubleClick",value:function(){var t=this;if(this._isEditable){var e=this.annotationEditorType,n=this.data.id;this.container.addEventListener("dblclick",function(){var i;null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("switchannotationeditormode",{source:t,mode:e,editId:n})})}}},{key:"width",get:function(){return this.data.rect[2]-this.data.rect[0]}},{key:"height",get:function(){return this.data.rect[3]-this.data.rect[1]}}],[{key:"_hasPopupData",value:function(t){var e=t.titleObj,n=t.contentsObj,i=t.richText;return!!(null!=e&&e.str||null!=n&&n.str||null!=i&&i.str)}}])}();function oc(t){var e=this.container.style,n=this.data,i=n.rect,r=n.rotation,a=this.parent.viewport.rawDims,s=a.pageWidth,o=a.pageHeight,l=a.pageX,u=a.pageY;null==i||i.splice.apply(i,[0,4].concat(O(t))),e.left="".concat(100*(t[0]-l)/s,"%"),e.top="".concat(100*(o-t[3]+u)/o,"%"),0===r?(e.width="".concat(100*(t[2]-t[0])/s,"%"),e.height="".concat(100*(t[3]-t[1])/o,"%")):this.setRotation(r)}var lc=new WeakSet,uc=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return c(this,e),p(n=l(this,e,[t,{isRenderable:!0,ignoreBorder:!(null==i||!i.ignoreBorder),createQuadrilaterals:!0}]),lc),n.isTooltipOnly=t.data.isTooltipOnly,n}return _(e,t),y(e,[{key:"render",value:function(){var t=this.data,e=this.linkService,n=document.createElement("a");n.setAttribute("data-element-id",t.id);var r=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action),r=!0):t.attachment?(i(lc,this,hc).call(this,n,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(i(lc,this,dc).call(this,n,t.setOCGState),r=!0):t.dest?(this._bindLink(n,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}},{key:"_bindLink",value:function(t,e){var n=this;t.href=this.linkService.getDestinationHash(e),t.onclick=function(){return e&&n.linkService.goToDestination(e),!1},(e||""===e)&&i(lc,this,cc).call(this)}},{key:"_bindNamedAction",value:function(t,e){var n=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return n.linkService.executeNamedAction(e),!1},i(lc,this,cc).call(this)}},{key:"_bindJSAction",value:function(t,e){var n=this;t.href=this.linkService.getAnchorUrl("");for(var r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),a=function(){var i=o[s],a=r.get(i);if(!a)return 1;t[a]=function(){var t;return null===(t=n.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:n,detail:{id:e.id,name:i}}),!1}},s=0,o=Object.keys(e.actions);s<o.length;s++)a();t.onclick||(t.onclick=function(){return!1}),i(lc,this,cc).call(this)}},{key:"_bindResetFormAction",value:function(t,e){var n=this,r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),i(lc,this,cc).call(this),!this._fieldObjects)return Vt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(r||(t.onclick=function(){return!1}));t.onclick=function(){null==r||r();var t=e.fields,i=e.refs,a=e.include,s=[];if(0!==t.length||0!==i.length){var o,l=new Set(i),u=m(t);try{for(u.s();!(o=u.n()).done;){var c,h=o.value,d=m(n._fieldObjects[h]||[]);try{for(d.s();!(c=d.n()).done;){var f=c.value.id;l.add(f)}}catch(t){d.e(t)}finally{d.f()}}}catch(t){u.e(t)}finally{u.f()}for(var v=0,p=Object.values(n._fieldObjects);v<p.length;v++){var g,y=m(p[v]);try{for(y.s();!(g=y.n()).done;){var w=g.value;l.has(w.id)===a&&s.push(w)}}catch(t){y.e(t)}finally{y.f()}}}else for(var b=0,k=Object.values(n._fieldObjects);b<k.length;b++){var _=k[b];s.push.apply(s,O(_))}for(var A,x=n.annotationStorage,S=[],E=0,M=s;E<M.length;E++){var C=M[E],R=C.id;switch(S.push(R),C.type){case"text":var T=C.defaultValue||"";x.setValue(R,{value:T});break;case"checkbox":case"radiobutton":var I=C.defaultValue===C.exportValues;x.setValue(R,{value:I});break;case"combobox":case"listbox":var P=C.defaultValue||"";x.setValue(R,{value:P});break;default:continue}var D=document.querySelector('[data-element-id="'.concat(R,'"]'));D&&(tc.has(D)?D.dispatchEvent(new Event("resetform")):Vt("_bindResetFormAction - element not allowed: ".concat(R)))}n.enableScripting&&(null===(A=n.linkService.eventBus)||void 0===A||A.dispatch("dispatcheventinsandbox",{source:n,detail:{id:"app",ids:S,name:"ResetForm"}}));return!1}}}])}(sc);function cc(){this.container.setAttribute("data-internal-link","")}function hc(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=function(){var t;return null===(t=n.downloadManager)||void 0===t||t.openOrDownloadData(e.content,e.filename,r),!1},i(lc,this,cc).call(this)}function dc(t,e){var n=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return n.linkService.executeSetOCGState(e),!1},i(lc,this,cc).call(this)}var fc=function(t){function e(t){return c(this,e),l(this,e,[t,{isRenderable:!0}])}return _(e,t),y(e,[{key:"render",value:function(){this.container.classList.add("textAnnotation");var t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}])}(sc),vc=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"render",value:function(){return this.container}},{key:"showElementAndHideCanvas",value:function(t){var e;this.data.hasOwnCanvas&&("CANVAS"===(null===(e=t.previousSibling)||void 0===e?void 0:e.nodeName)&&(t.previousSibling.hidden=!0),t.hidden=!1)}},{key:"_getKeyModifier",value:function(t){return se.platform.isMac?t.metaKey:t.ctrlKey}},{key:"_setEventListener",value:function(t,e,n,i,r){var a=this;n.includes("mouse")?t.addEventListener(n,function(t){var e;null===(e=a.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:a,detail:{id:a.data.id,name:i,value:r(t),shift:t.shiftKey,modifier:a._getKeyModifier(t)}})}):t.addEventListener(n,function(t){var s;if("blur"===n){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===n){if(e.focused)return;e.focused=!0}r&&(null===(s=a.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:a,detail:{id:a.data.id,name:i,value:r(t)}}))})}},{key:"_setEventListeners",value:function(t,e,n,i){var r,a=m(n);try{for(a.s();!(r=a.n()).done;){var s,o,l,u=P(r.value,2),c=u[0],h=u[1];if("Action"===h||null!==(s=this.data.actions)&&void 0!==s&&s[h])"Focus"!==h&&"Blur"!==h||e||(e={focused:!1}),this._setEventListener(t,e,c,h,i),"Focus"!==h||null!==(o=this.data.actions)&&void 0!==o&&o.Blur?"Blur"!==h||null!==(l=this.data.actions)&&void 0!==l&&l.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null)}}catch(t){a.e(t)}finally{a.f()}}},{key:"_setBackgroundColor",value:function(t){var e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":le.makeHexColor(e[0],e[1],e[2])}},{key:"_setTextStyle",value:function(t){var e,n=this.data.defaultAppearanceData.fontColor,i=this.data.defaultAppearanceData.fontSize||9,r=t.style,a=function(t){return Math.round(10*t)/10};if(this.data.multiLine){var s=Math.abs(this.data.rect[3]-this.data.rect[1]-2),o=s/(Math.round(s/(lt*i))||1);e=Math.min(i,a(o/lt))}else{var l=Math.abs(this.data.rect[3]-this.data.rect[1]-2);e=Math.min(i,a(l/lt))}r.fontSize="calc(".concat(e,"px * var(--total-scale-factor))"),r.color=le.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(r.textAlign=["left","center","right"][this.data.textAlignment])}},{key:"_setRequired",value:function(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}])}(sc),pc=function(t){function e(t){return c(this,e),l(this,e,[t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue}])}return _(e,t),y(e,[{key:"setPropertyOnSiblings",value:function(t,e,n,i){var r,a=this.annotationStorage,s=m(this._getElementsByName(t.name,t.id));try{for(s.s();!(r=s.n()).done;){var o=r.value;o.domElement&&(o.domElement[e]=n),a.setValue(o.id,w({},i,n))}}catch(t){s.e(t)}finally{s.f()}}},{key:"render",value:function(){var t=this,e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");var i=null;if(this.renderForms){var r,a=e.getValue(n,{value:this.data.fieldValue}),s=a.value||"",o=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));var l=a.formattedValue||(null===(r=this.data.textContent)||void 0===r?void 0:r.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));var u={userValue:s,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?((i=document.createElement("textarea")).textContent=null!=l?l:s,this.data.doNotScroll&&(i.style.overflowY="hidden")):((i=document.createElement("input")).type=this.data.password?"password":"text",i.setAttribute("value",null!=l?l:s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),tc.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=$u,this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",function(r){e.setValue(n,{value:r.target.value}),t.setPropertyOnSiblings(i,"value",r.target.value,"value"),u.formattedValue=null}),i.addEventListener("resetform",function(e){var n,r=null!==(n=t.data.defaultFieldValue)&&void 0!==n?n:"";i.value=u.userValue=r,u.formattedValue=null});var c=function(t){var e=u.formattedValue;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var h;i.addEventListener("focus",function(e){var n;if(!u.focused){var i=e.target;u.userValue&&(i.value=u.userValue),u.lastCommittedValue=i.value,u.commitKey=1,null!==(n=t.data.actions)&&void 0!==n&&n.Focus||(u.focused=!0)}}),i.addEventListener("updatefromsandbox",function(i){t.showElementAndHideCanvas(i.target);var r={value:function(t){var i;u.userValue=null!==(i=t.detail.value)&&void 0!==i?i:"",e.setValue(n,{value:u.userValue.toString()}),t.target.value=u.userValue},formattedValue:function(t){var i=t.detail.formattedValue;u.formattedValue=i,null!=i&&t.target!==document.activeElement&&(t.target.value=i),e.setValue(n,{formattedValue:i})},selRange:function(t){var e;(e=t.target).setSelectionRange.apply(e,O(t.detail.selRange))},charLimit:function(i){var r,a=i.detail.charLimit,s=i.target;if(0!==a){s.setAttribute("maxLength",a);var o=u.userValue;!o||o.length<=a||(o=o.slice(0,a),s.value=u.userValue=o,e.setValue(n,{value:o}),null===(r=t.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:o,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}else s.removeAttribute("maxLength")}};t._dispatchEventFromSandbox(r,i)}),i.addEventListener("keydown",function(e){var i;u.commitKey=1;var r=-1;if("Escape"===e.key?r=0:"Enter"!==e.key||t.data.multiLine?"Tab"===e.key&&(u.commitKey=3):r=2,-1!==r){var a=e.target.value;u.lastCommittedValue!==a&&(u.lastCommittedValue=a,u.userValue=a,null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:a,willCommit:!0,commitKey:r,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}});var d=c;c=null,i.addEventListener("blur",function(e){var i;if(u.focused&&e.relatedTarget){null!==(i=t.data.actions)&&void 0!==i&&i.Blur||(u.focused=!1);var r,a=e.target.value;if(u.userValue=a,u.lastCommittedValue!==a)null===(r=t.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:a,willCommit:!0,commitKey:u.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}});d(e)}}),null!==(h=this.data.actions)&&void 0!==h&&h.Keystroke&&i.addEventListener("beforeinput",function(e){var i;u.lastCommittedValue=null;var r=e.data,a=e.target,s=a.value,o=a.selectionStart,l=a.selectionEnd,c=o,h=l;switch(e.inputType){case"deleteWordBackward":var d=s.substring(0,o).match(/\w*[^\w]*$/);d&&(c-=d[0].length);break;case"deleteWordForward":var f=s.substring(o).match(/^[^\w]*\w*/);f&&(h+=f[0].length);break;case"deleteContentBackward":o===l&&(c-=1);break;case"deleteContentForward":o===l&&(h+=1)}e.preventDefault(),null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:s,change:r||"",willCommit:!1,selStart:c,selEnd:h}})}),this._setEventListeners(i,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(t){return t.target.value})}if(c&&i.addEventListener("blur",c),this.data.comb){var f=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing="calc(".concat(f,"px * var(--total-scale-factor) - 1ch)")}}else(i=document.createElement("div")).textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}])}(vc),gc=function(t){function e(t){return c(this,e),l(this,e,[t,{isRenderable:!!t.data.hasOwnCanvas}])}return _(e,t),y(e)}(vc),yc=function(t){function e(t){return c(this,e),l(this,e,[t,{isRenderable:t.renderForms}])}return _(e,t),y(e,[{key:"render",value:function(){var t=this,e=this.annotationStorage,n=this.data,i=n.id,r=e.getValue(i,{value:n.exportValue===n.fieldValue}).value;"string"==typeof r&&(r="Off"!==r,e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");var a=document.createElement("input");return tc.add(a),a.setAttribute("data-element-id",i),a.disabled=n.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=n.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",n.exportValue),a.tabIndex=$u,a.addEventListener("change",function(r){var a,s=r.target,o=s.name,l=s.checked,u=m(t._getElementsByName(o,i));try{for(u.s();!(a=u.n()).done;){var c=a.value,h=l&&c.exportValue===n.exportValue;c.domElement&&(c.domElement.checked=h),e.setValue(c.id,{value:h})}}catch(t){u.e(t)}finally{u.f()}e.setValue(i,{value:l})}),a.addEventListener("resetform",function(t){var e=n.defaultFieldValue||"Off";t.target.checked=e===n.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",function(n){var r={value:function(t){t.target.checked="Off"!==t.detail.value,e.setValue(i,{value:t.target.checked})}};t._dispatchEventFromSandbox(r,n)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(t){return t.target.checked})),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}])}(vc),mc=function(t){function e(t){return c(this,e),l(this,e,[t,{isRenderable:t.renderForms}])}return _(e,t),y(e,[{key:"render",value:function(){var t=this;this.container.classList.add("buttonWidgetAnnotation","radioButton");var e=this.annotationStorage,n=this.data,i=n.id,r=e.getValue(i,{value:n.fieldValue===n.buttonValue}).value;if("string"==typeof r&&(r=r!==n.buttonValue,e.setValue(i,{value:r})),r){var a,s=m(this._getElementsByName(n.fieldName,i));try{for(s.s();!(a=s.n()).done;){var o=a.value;e.setValue(o.id,{value:!1})}}catch(t){s.e(t)}finally{s.f()}}var l=document.createElement("input");if(tc.add(l),l.setAttribute("data-element-id",i),l.disabled=n.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=n.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=$u,l.addEventListener("change",function(n){var r,a=n.target,s=a.name,o=a.checked,l=m(t._getElementsByName(s,i));try{for(l.s();!(r=l.n()).done;){var u=r.value;e.setValue(u.id,{value:!1})}}catch(t){l.e(t)}finally{l.f()}e.setValue(i,{value:o})}),l.addEventListener("resetform",function(t){var e=n.defaultFieldValue;t.target.checked=null!=e&&e===n.buttonValue}),this.enableScripting&&this.hasJSActions){var u=n.buttonValue;l.addEventListener("updatefromsandbox",function(n){var r={value:function(n){var r,a=u===n.detail.value,s=m(t._getElementsByName(n.target.name));try{for(s.s();!(r=s.n()).done;){var o=r.value,l=a&&o.id===i;o.domElement&&(o.domElement.checked=l),e.setValue(o.id,{value:l})}}catch(t){s.e(t)}finally{s.f()}}};t._dispatchEventFromSandbox(r,n)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(t){return t.target.checked})}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}])}(vc),wc=function(t){function e(t){return c(this,e),l(this,e,[t,{ignoreBorder:t.data.hasAppearance}])}return _(e,t),y(e,[{key:"render",value:function(){var t=this,n=D(e,"render",this,3)([]);n.classList.add("buttonWidgetAnnotation","pushButton");var i=n.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",function(e){t._dispatchEventFromSandbox({},e)})),n}}])}(uc),bc=function(t){function e(t){return c(this,e),l(this,e,[t,{isRenderable:t.renderForms}])}return _(e,t),y(e,[{key:"render",value:function(){var t=this;this.container.classList.add("choiceWidgetAnnotation");var e=this.annotationStorage,n=this.data.id,i=e.getValue(n,{value:this.data.fieldValue}),r=document.createElement("select");tc.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=$u;var a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",function(e){var n,i=t.data.defaultFieldValue,a=m(r.options);try{for(a.s();!(n=a.n()).done;){var s=n.value;s.selected=s.value===i}}catch(t){a.e(t)}finally{a.f()}});var s,o=m(this.data.options);try{for(o.s();!(s=o.n()).done;){var l=s.value,u=document.createElement("option");u.textContent=l.displayValue,u.value=l.exportValue,i.value.includes(l.exportValue)&&(u.setAttribute("selected",!0),a=!1),r.append(u)}}catch(t){o.e(t)}finally{o.f()}var c=null;if(a){var h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),c=function(){h.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}var d=function(t){var e=t?"value":"textContent",n=r.options;return r.multiple?Array.prototype.filter.call(n,function(t){return t.selected}).map(function(t){return t[e]}):-1===n.selectedIndex?null:n[n.selectedIndex][e]},f=d(!1),v=function(t){var e=t.target.options;return Array.prototype.map.call(e,function(t){return{displayValue:t.textContent,exportValue:t.value}})};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",function(i){var a={value:function(t){var i;null===(i=c)||void 0===i||i();var a,s=t.detail.value,o=new Set(Array.isArray(s)?s:[s]),l=m(r.options);try{for(l.s();!(a=l.n()).done;){var u=a.value;u.selected=o.has(u.value)}}catch(t){l.e(t)}finally{l.f()}e.setValue(n,{value:d(!0)}),f=d(!1)},multipleSelection:function(t){r.multiple=!0},remove:function(t){var i=r.options,a=t.detail.remove;if(i[a].selected=!1,r.remove(a),i.length>0){var s=Array.prototype.findIndex.call(i,function(t){return t.selected});-1===s&&(i[0].selected=!0)}e.setValue(n,{value:d(!0),items:v(t)}),f=d(!1)},clear:function(t){for(;0!==r.length;)r.remove(0);e.setValue(n,{value:null,items:[]}),f=d(!1)},insert:function(t){var i=t.detail.insert,a=i.index,s=i.displayValue,o=i.exportValue,l=r.children[a],u=document.createElement("option");u.textContent=s,u.value=o,l?l.before(u):r.append(u),e.setValue(n,{value:d(!0),items:v(t)}),f=d(!1)},items:function(t){for(var i=t.detail.items;0!==r.length;)r.remove(0);var a,s=m(i);try{for(s.s();!(a=s.n()).done;){var o=a.value,l=o.displayValue,u=o.exportValue,c=document.createElement("option");c.textContent=l,c.value=u,r.append(c)}}catch(t){s.e(t)}finally{s.f()}r.options.length>0&&(r.options[0].selected=!0),e.setValue(n,{value:d(!0),items:v(t)}),f=d(!1)},indices:function(t){var i,r=new Set(t.detail.indices),a=m(t.target.options);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.selected=r.has(s.index)}}catch(t){a.e(t)}finally{a.f()}e.setValue(n,{value:d(!0)}),f=d(!1)},editable:function(t){t.target.disabled=!t.detail.editable}};t._dispatchEventFromSandbox(a,i)}),r.addEventListener("input",function(i){var r,a=d(!0),s=d(!1);e.setValue(n,{value:a}),i.preventDefault(),null===(r=t.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:f,change:s,changeEx:a,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],function(t){return t.target.value})):r.addEventListener("input",function(t){e.setValue(n,{value:d(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}])}(vc),kc=function(t){function e(t){var n;c(this,e);var i=t.data,r=t.elements;return(n=l(this,e,[t,{isRenderable:sc._hasPopupData(i)}])).elements=r,n.popup=null,n}return _(e,t),y(e,[{key:"render",value:function(){this.container.classList.add("popupAnnotation");var t,e=this.popup=new Uc({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[],i=m(this.elements);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.popup=e,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea()}}catch(t){i.e(t)}finally{i.f()}return this.container.setAttribute("aria-controls",n.map(function(t){return"".concat(pe).concat(t)}).join(",")),this.container}}])}(sc),_c=new WeakMap,Ac=new WeakMap,xc=new WeakMap,Sc=new WeakMap,Ec=new WeakMap,Mc=new WeakMap,Cc=new WeakMap,Rc=new WeakMap,Tc=new WeakMap,Ic=new WeakMap,Pc=new WeakMap,Dc=new WeakMap,Lc=new WeakMap,Oc=new WeakMap,Fc=new WeakMap,Nc=new WeakMap,Wc=new WeakMap,Bc=new WeakMap,jc=new WeakMap,zc=new WeakSet,Uc=function(){return y(function t(e){var n=e.container,r=e.color,a=e.elements,s=e.titleObj,o=e.modificationDate,l=e.contentsObj,u=e.richText,v=e.parent,g=e.rect,y=e.parentRect,w=e.open;c(this,t),p(this,zc),d(this,_c,i(zc,this,Xc).bind(this)),d(this,Ac,i(zc,this,Jc).bind(this)),d(this,xc,i(zc,this,Qc).bind(this)),d(this,Sc,i(zc,this,Kc).bind(this)),d(this,Ec,null),d(this,Mc,null),d(this,Cc,null),d(this,Rc,null),d(this,Tc,null),d(this,Ic,null),d(this,Pc,null),d(this,Dc,!1),d(this,Lc,null),d(this,Oc,null),d(this,Fc,null),d(this,Nc,null),d(this,Wc,null),d(this,Bc,null),d(this,jc,!1),f(Mc,this,n),f(Wc,this,s),f(Cc,this,l),f(Nc,this,u),f(Ic,this,v),f(Ec,this,r),f(Fc,this,g),f(Pc,this,y),f(Tc,this,a),f(Rc,this,De.toDateObject(o)),this.trigger=a.flatMap(function(t){return t.getElementsToTriggerPopup()});var b,k=m(this.trigger);try{for(k.s();!(b=k.n()).done;){var _=b.value;_.addEventListener("click",h(Sc,this)),_.addEventListener("mouseenter",h(xc,this)),_.addEventListener("mouseleave",h(Ac,this)),_.classList.add("popupTriggerArea")}}catch(t){k.e(t)}finally{k.f()}var A,x=m(a);try{for(x.s();!(A=x.n()).done;){var S;null===(S=A.value.container)||void 0===S||S.addEventListener("keydown",h(_c,this))}}catch(t){x.e(t)}finally{x.f()}h(Mc,this).hidden=!0,w&&i(zc,this,Kc).call(this)},[{key:"render",value:function(){if(!h(Lc,this)){var t=f(Lc,this,document.createElement("div"));if(t.className="popup",h(Ec,this)){var e=t.style.outlineColor=le.makeHexColor.apply(le,O(h(Ec,this)));t.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)")}var n=document.createElement("span");n.className="header";var i=document.createElement("h1");n.append(i);var r=h(Wc,this);if(i.dir=r.dir,i.textContent=r.str,t.append(n),h(Rc,this)){var a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:h(Rc,this).valueOf()})),n.append(a)}var s=v(zc,this,Hc);if(s)Zu.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{var o=this._formatContents(h(Cc,this));t.append(o)}h(Mc,this).append(t)}}},{key:"_formatContents",value:function(t){var e=t.str,n=t.dir,i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;for(var r=e.split(/(?:\r\n?|\n)/),a=0,s=r.length;a<s;++a){var o=r[a];i.append(document.createTextNode(o)),a<s-1&&i.append(document.createElement("br"))}return i}},{key:"updateEdited",value:function(t){var e,n=t.rect,r=t.popupContent;h(Bc,this)||f(Bc,this,{contentsObj:h(Cc,this),richText:h(Nc,this)}),n&&f(Oc,this,null),r&&(f(Nc,this,i(zc,this,qc).call(this,r)),f(Cc,this,null)),null===(e=h(Lc,this))||void 0===e||e.remove(),f(Lc,this,null)}},{key:"resetEdited",value:function(){var t;if(h(Bc,this)){var e=h(Bc,this);N(f,[Cc,this])._=e.contentsObj,N(f,[Nc,this])._=e.richText,f(Bc,this,null),null===(t=h(Lc,this))||void 0===t||t.remove(),f(Lc,this,null),f(Oc,this,null)}}},{key:"forceHide",value:function(){f(jc,this,this.isVisible),h(jc,this)&&(h(Mc,this).hidden=!0)}},{key:"maybeShow",value:function(){h(jc,this)&&(h(Lc,this)||i(zc,this,Qc).call(this),f(jc,this,!1),h(Mc,this).hidden=!1)}},{key:"isVisible",get:function(){return!1===h(Mc,this).hidden}}])}();function Hc(t){var e=h(Nc,t),n=h(Cc,t);return null==e||!e.str||null!=n&&n.str&&n.str!==e.str?null:h(Nc,t).html||null}function Gc(t){var e;return(null===(e=v(zc,t,Hc))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.fontSize)||0}function Vc(t){var e;return(null===(e=v(zc,t,Hc))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.color)||null}function qc(t){var e,n=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},r={style:{color:v(zc,this,Vc),fontSize:v(zc,this,Gc)?"calc(".concat(v(zc,this,Gc),"px * var(--total-scale-factor))"):""}},a=m(t.split("\n"));try{for(a.s();!(e=a.n()).done;){var s=e.value;n.push({name:"span",value:s,attributes:r})}}catch(t){a.e(t)}finally{a.f()}return i}function Xc(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&h(Dc,this))&&i(zc,this,Kc).call(this)}function Yc(){if(null===h(Oc,this)){var t,e=h(Ic,this),n=e.page.view,i=e.viewport.rawDims,r=i.pageWidth,a=i.pageHeight,s=i.pageX,o=i.pageY,l=!!h(Pc,this),u=h(l?Pc:Fc,this),c=m(h(Tc,this));try{for(c.s();!(t=c.n()).done;){var d=t.value;if(!u||null!==le.intersect(d.data.rect,u)){u=d.data.rect,l=!0;break}}}catch(t){c.e(t)}finally{c.f()}var v=le.normalizeRect([u[0],n[3]-u[1]+n[1],u[2],n[3]-u[3]+n[1]]),p=l?u[2]-u[0]+5:0,g=v[0]+p,y=v[1];f(Oc,this,[100*(g-s)/r,100*(y-o)/a]);var w=h(Mc,this).style;w.left="".concat(h(Oc,this)[0],"%"),w.top="".concat(h(Oc,this)[1],"%")}}function Kc(){f(Dc,this,!h(Dc,this)),h(Dc,this)?(i(zc,this,Qc).call(this),h(Mc,this).addEventListener("click",h(Sc,this)),h(Mc,this).addEventListener("keydown",h(_c,this))):(i(zc,this,Jc).call(this),h(Mc,this).removeEventListener("click",h(Sc,this)),h(Mc,this).removeEventListener("keydown",h(_c,this)))}function Qc(){h(Lc,this)||this.render(),this.isVisible?h(Dc,this)&&h(Mc,this).classList.add("focused"):(i(zc,this,Yc).call(this),h(Mc,this).hidden=!1,h(Mc,this).style.zIndex=parseInt(h(Mc,this).style.zIndex)+1e3)}function Jc(){h(Mc,this).classList.remove("focused"),!h(Dc,this)&&this.isVisible&&(h(Mc,this).hidden=!0,h(Mc,this).style.zIndex=parseInt(h(Mc,this).style.zIndex)-1e3)}var Zc=function(t){function e(t){var n;return c(this,e),(n=l(this,e,[t,{isRenderable:!0,ignoreBorder:!0}])).textContent=t.data.textContent,n.textPosition=t.data.textPosition,n.annotationEditorType=mt.FREETEXT,n}return _(e,t),y(e,[{key:"render",value:function(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){var t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");var e,n=m(this.textContent);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=document.createElement("span");r.textContent=i,t.append(r)}}catch(t){n.e(t)}finally{n.f()}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}])}(sc),$c=new WeakMap,th=function(t){function e(t){var n;return c(this,e),d(n=l(this,e,[t,{isRenderable:!0,ignoreBorder:!0}]),$c,null),n}return _(e,t),y(e,[{key:"render",value:function(){this.container.classList.add("lineAnnotation");var t=this.data,e=this.width,n=this.height,i=this.svgFactory.create(e,n,!0),r=f($c,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return h($c,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(sc),eh=new WeakMap,nh=function(t){function e(t){var n;return c(this,e),d(n=l(this,e,[t,{isRenderable:!0,ignoreBorder:!0}]),eh,null),n}return _(e,t),y(e,[{key:"render",value:function(){this.container.classList.add("squareAnnotation");var t=this.data,e=this.width,n=this.height,i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,a=f(eh,this,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",e-r),a.setAttribute("height",n-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return h(eh,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(sc),ih=new WeakMap,rh=function(t){function e(t){var n;return c(this,e),d(n=l(this,e,[t,{isRenderable:!0,ignoreBorder:!0}]),ih,null),n}return _(e,t),y(e,[{key:"render",value:function(){this.container.classList.add("circleAnnotation");var t=this.data,e=this.width,n=this.height,i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,a=f(ih,this,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",e/2),a.setAttribute("cy",n/2),a.setAttribute("rx",e/2-r/2),a.setAttribute("ry",n/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return h(ih,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(sc),ah=new WeakMap,sh=function(t){function e(t){var n;return c(this,e),d(n=l(this,e,[t,{isRenderable:!0,ignoreBorder:!0}]),ah,null),n.containerClassName="polylineAnnotation",n.svgElementName="svg:polyline",n}return _(e,t),y(e,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var t=this.data,e=t.rect,n=t.vertices,i=t.borderStyle,r=t.popupRef,a=this.width,s=this.height;if(!n)return this.container;for(var o=this.svgFactory.create(a,s,!0),l=[],u=0,c=n.length;u<c;u+=2){var h=n[u]-e[0],d=e[3]-n[u+1];l.push("".concat(h,",").concat(d))}l=l.join(" ");var v=f(ah,this,this.svgFactory.createElement(this.svgElementName));return v.setAttribute("points",l),v.setAttribute("stroke-width",i.width||1),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),o.append(v),this.container.append(o),!r&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return h(ah,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(sc),oh=function(t){function e(t){var n;return c(this,e),(n=l(this,e,[t])).containerClassName="polygonAnnotation",n.svgElementName="svg:polygon",n}return _(e,t),y(e)}(sh),lh=function(t){function e(t){return c(this,e),l(this,e,[t,{isRenderable:!0,ignoreBorder:!0}])}return _(e,t),y(e,[{key:"render",value:function(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}])}(sc),uh=new WeakMap,ch=new WeakMap,hh=new WeakSet,dh=function(t){function e(t){var n;return c(this,e),p(n=l(this,e,[t,{isRenderable:!0,ignoreBorder:!0}]),hh),d(n,uh,null),d(n,ch,[]),n.containerClassName="inkAnnotation",n.svgElementName="svg:polyline",n.annotationEditorType="InkHighlight"===n.data.it?mt.HIGHLIGHT:mt.INK,n}return _(e,t),y(e,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var t=this.data,e=t.rect,n=t.rotation,r=t.inkLists,a=t.borderStyle,s=t.popupRef,o=i(hh,this,fh).call(this,n,e),l=o.transform,u=o.width,c=o.height,d=this.svgFactory.create(u,c,!0),v=f(uh,this,this.svgFactory.createElement("svg:g"));d.append(v),v.setAttribute("stroke-width",a.width||1),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-miterlimit",10),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),v.setAttribute("transform",l);for(var p=0,g=r.length;p<g;p++){var y=this.svgFactory.createElement(this.svgElementName);h(ch,this).push(y),y.setAttribute("points",r[p].join(",")),v.append(y)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}},{key:"updateEdited",value:function(t){D(e,"updateEdited",this,3)([t]);var n=t.thickness,r=t.points,a=t.rect,s=h(uh,this);if(n>=0&&s.setAttribute("stroke-width",n||1),r)for(var o=0,l=h(ch,this).length;o<l;o++)h(ch,this)[o].setAttribute("points",r[o].join(","));if(a){var u=i(hh,this,fh).call(this,this.data.rotation,a),c=u.transform,d=u.width,f=u.height;s.parentElement.setAttribute("viewBox","0 0 ".concat(d," ").concat(f)),s.setAttribute("transform",c)}}},{key:"getElementsToTriggerPopup",value:function(){return h(ch,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(sc);function fh(t,e){switch(t){case 90:return{transform:"rotate(90) translate(".concat(-e[0],",").concat(e[1],") scale(1,-1)"),width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:"rotate(180) translate(".concat(-e[2],",").concat(e[1],") scale(1,-1)"),width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:"rotate(270) translate(".concat(-e[2],",").concat(e[3],") scale(1,-1)"),width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:"translate(".concat(-e[0],",").concat(e[3],") scale(1,-1)"),width:e[2]-e[0],height:e[3]-e[1]}}}var vh=function(t){function e(t){var n;return c(this,e),(n=l(this,e,[t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])).annotationEditorType=mt.HIGHLIGHT,n}return _(e,t),y(e,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}])}(sc),ph=function(t){function e(t){return c(this,e),l(this,e,[t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])}return _(e,t),y(e,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}])}(sc),gh=function(t){function e(t){return c(this,e),l(this,e,[t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])}return _(e,t),y(e,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}])}(sc),yh=function(t){function e(t){return c(this,e),l(this,e,[t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])}return _(e,t),y(e,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}])}(sc),mh=function(t){function e(t){var n;return c(this,e),(n=l(this,e,[t,{isRenderable:!0,ignoreBorder:!0}])).annotationEditorType=mt.STAMP,n}return _(e,t),y(e,[{key:"render",value:function(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}])}(sc),wh=new WeakMap,bh=new WeakSet,kh=function(t){function e(t){var n,i;c(this,e),p(i=l(this,e,[t,{isRenderable:!0}]),bh),d(i,wh,null);var r=i.data.file;return i.filename=r.filename,i.content=r.content,null===(n=i.linkService.eventBus)||void 0===n||n.dispatch("fileattachmentannotation",M({source:i},r)),i}return _(e,t),y(e,[{key:"render",value:function(){var t=this;this.container.classList.add("fileAttachmentAnnotation");var e,n=this.container,r=this.data;r.hasAppearance||0===r.fillAlpha?e=document.createElement("div"):((e=document.createElement("img")).src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(r.name)?"paperclip":"pushpin",".svg"),r.fillAlpha&&r.fillAlpha<1&&(e.style="filter: opacity(".concat(Math.round(100*r.fillAlpha),"%);"))),e.addEventListener("dblclick",i(bh,this,_h).bind(this)),f(wh,this,e);var a=se.platform.isMac;return n.addEventListener("keydown",function(e){"Enter"===e.key&&(a?e.metaKey:e.ctrlKey)&&i(bh,t,_h).call(t)}),!r.popupRef&&this.hasPopupData?this._createPopup():e.classList.add("popupTriggerArea"),n.append(e),n}},{key:"getElementsToTriggerPopup",value:function(){return h(wh,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(sc);function _h(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.content,this.filename)}var Ah=new WeakMap,xh=new WeakMap,Sh=new WeakMap,Eh=new WeakMap,Mh=new WeakSet,Ch=function(){function t(e){var n=e.div,i=e.accessibilityManager,r=e.annotationCanvasMap,a=e.annotationEditorUIManager,s=e.page,o=e.viewport,l=e.structTreeLayer;c(this,t),p(this,Mh),d(this,Ah,null),d(this,xh,null),d(this,Sh,new Map),d(this,Eh,null),this.div=n,f(Ah,this,i),f(xh,this,r),f(Eh,this,l||null),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=a}return y(t,[{key:"hasEditableAnnotations",value:function(){return h(Sh,this).size>0}},{key:"render",value:(n=o(C().m(function t(e){var n,r,a,s,o,l,u,c,d,f,v,p,g,y;return C().w(function(t){for(;;)switch(t.p=t.n){case 0:n=e.annotations,Be(r=this.div,this.viewport),a=new Map,s={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new Ju,annotationStorage:e.annotationStorage||new Ma,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null},o=m(n),t.p=1,o.s();case 2:if((l=o.n()).done){t.n=11;break}if(!(u=l.value).noHTML){t.n=3;break}return t.a(3,10);case 3:if(c=u.annotationType===Ct.POPUP){t.n=5;break}if(u.rect[2]!==u.rect[0]&&u.rect[3]!==u.rect[1]){t.n=4;break}return t.a(3,10);case 4:t.n=7;break;case 5:if(d=a.get(u.id)){t.n=6;break}return t.a(3,10);case 6:s.elements=d;case 7:if(s.data=u,(f=ec.create(s)).isRenderable){t.n=8;break}return t.a(3,10);case 8:return!c&&u.popupRef&&((v=a.get(u.popupRef))?v.push(f):a.set(u.popupRef,[f])),p=f.render(),u.hidden&&(p.style.visibility="hidden"),t.n=9,i(Mh,this,Rh).call(this,p,u.id);case 9:f._isEditable&&(h(Sh,this).set(f.data.id,f),null===(g=this._annotationEditorUIManager)||void 0===g||g.renderAnnotationElement(f));case 10:t.n=2;break;case 11:t.n=13;break;case 12:t.p=12,y=t.v,o.e(y);case 13:return t.p=13,o.f(),t.f(13);case 14:i(Mh,this,Ih).call(this);case 15:return t.a(2)}},t,this,[[1,12,13,14]])})),function(t){return n.apply(this,arguments)})},{key:"addLinkAnnotations",value:(e=o(C().m(function e(n,r){var a,s,o,l,u,c,h;return C().w(function(e){for(;;)switch(e.p=e.n){case 0:a={data:null,layer:this.div,linkService:r,svgFactory:new Ju,parent:this},s=m(n),e.p=1,s.s();case 2:if((o=s.n()).done){e.n=5;break}if((l=o.value).borderStyle||(l.borderStyle=t._defaultBorderStyle),a.data=l,(u=ec.create(a)).isRenderable){e.n=3;break}return e.a(3,4);case 3:return c=u.render(),e.n=4,i(Mh,this,Rh).call(this,c,l.id);case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,h=e.v,s.e(h);case 7:return e.p=7,s.f(),e.f(7);case 8:return e.a(2)}},e,this,[[1,6,7,8]])})),function(t,n){return e.apply(this,arguments)})},{key:"update",value:function(t){var e=t.viewport,n=this.div;this.viewport=e,Be(n,{rotation:e.rotation}),i(Mh,this,Ih).call(this),n.hidden=!1}},{key:"getEditableAnnotations",value:function(){return Array.from(h(Sh,this).values())}},{key:"getEditableAnnotation",value:function(t){return h(Sh,this).get(t)}}],[{key:"_defaultBorderStyle",get:function(){return Qt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Rt,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}]);var e,n}();function Rh(t,e){return Th.apply(this,arguments)}function Th(){return(Th=o(C().m(function t(e,n){var i,r,a,s,o,l,u,c,d,f;return C().w(function(t){for(;;)switch(t.n){case 0:return a=e.firstChild||e,s=a.id="".concat(pe).concat(n),t.n=1,null===(i=h(Eh,this))||void 0===i?void 0:i.getAriaAttributes(s);case 1:if(o=t.v){l=m(o);try{for(l.s();!(u=l.n()).done;)c=P(u.value,2),d=c[0],f=c[1],a.setAttribute(d,f)}catch(t){l.e(t)}finally{l.f()}}this.div.append(e),null===(r=h(Ah,this))||void 0===r||r.moveElementInDOM(this.div,e,a,!1);case 2:return t.a(2)}},t,this)}))).apply(this,arguments)}function Ih(){if(h(xh,this)){var t,e=this.div,n=m(h(xh,this));try{for(n.s();!(t=n.n()).done;){var i=P(t.value,2),r=i[0],a=i[1],s=e.querySelector('[data-annotation-id="'.concat(r,'"]'));if(s){a.className="annotationContent";var o=s.firstChild;o?"CANVAS"===o.nodeName?o.replaceWith(a):o.classList.contains("annotationContent")?o.after(a):o.before(a):s.append(a);var l,u=h(Sh,this).get(r);if(u)if(u._hasNoCanvas)null===(l=this._annotationEditorUIManager)||void 0===l||l.setMissingCanvas(r,s.id,a),u._hasNoCanvas=!1;else u.canvas=a}}}catch(t){n.e(t)}finally{n.f()}h(xh,this).clear()}}var Ph=/\r\n?|\n/g,Dh=new WeakMap,Lh=new WeakMap,Oh=new WeakMap,Fh=new WeakMap,Nh=new WeakMap,Wh=new WeakSet,Bh=function(t){function e(t){var n;return c(this,e),p(n=l(this,e,[M(M({},t),{},{name:"freeTextEditor"})]),Wh),d(n,Dh,void 0),d(n,Lh,""),d(n,Oh,"".concat(n.id,"-editor")),d(n,Fh,null),d(n,Nh,void 0),f(Dh,n,t.color||e._defaultColor||Jr._defaultLineColor),f(Nh,n,t.fontSize||e._defaultFontSize),n}return _(e,t),y(e,[{key:"updateParams",value:function(t,e){switch(t){case wt.FREETEXT_SIZE:i(Wh,this,jh).call(this,e);break;case wt.FREETEXT_COLOR:i(Wh,this,zh).call(this,e)}}},{key:"propertiesToUpdate",get:function(){return[[wt.FREETEXT_SIZE,h(Nh,this)],[wt.FREETEXT_COLOR,h(Dh,this)]]}},{key:"_translateEmpty",value:function(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}},{key:"getInitialTranslation",value:function(){var t=this.parentScale;return[-e._internalPadding*t,-(e._internalPadding+h(Nh,this))*t]}},{key:"rebuild",value:function(){this.parent&&(D(e,"rebuild",this,3)([]),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}},{key:"enableEditMode",value:function(){if(!D(e,"enableEditMode",this,3)([]))return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),f(Fh,this,new AbortController);var t=this._uiManager.combinedSignal(h(Fh,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}},{key:"disableEditMode",value:function(){var t;return!!D(e,"disableEditMode",this,3)([])&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",h(Oh,this)),this._isDraggable=!0,null===(t=h(Fh,this))||void 0===t||t.abort(),f(Fh,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}},{key:"focusin",value:function(t){this._focusEventsAllowed&&(D(e,"focusin",this,3)([t]),t.target!==this.editorDiv&&this.editorDiv.focus())}},{key:"onceAdded",value:function(t){var e;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered&&this.center(),this._initialOptions=null)}},{key:"isEmpty",value:function(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}},{key:"remove",value:function(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),D(e,"remove",this,3)([])}},{key:"commit",value:function(){var t=this;if(this.isInEditMode()){D(e,"commit",this,3)([]),this.disableEditMode();var n=h(Lh,this),r=f(Lh,this,i(Wh,this,Uh).call(this).trimEnd());if(n!==r){var a=function(e){f(Lh,t,e),e?(i(Wh,t,Vh).call(t),t._uiManager.rebuild(t),i(Wh,t,Hh).call(t)):t.remove()};this.addCommands({cmd:function(){a(r)},undo:function(){a(n)},mustExec:!1}),i(Wh,this,Hh).call(this)}}}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"enterInEditMode",value:function(){this.enableEditMode(),this.editorDiv.focus()}},{key:"keydown",value:function(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}},{key:"editorDivKeydown",value:function(t){e._keyboardManager.exec(this,t)}},{key:"editorDivFocus",value:function(t){this.isEditing=!0}},{key:"editorDivBlur",value:function(t){this.isEditing=!1}},{key:"editorDivInput",value:function(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"canChangeContent",get:function(){return!0}},{key:"render",value:function(){if(this.div)return this.div;var t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),D(e,"render",this,3)([]),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",h(Oh,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;var r=this.editorDiv.style;if(r.fontSize="calc(".concat(h(Nh,this),"px * var(--total-scale-factor))"),r.color=h(Dh,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){var a=P(this.parentDimensions,2),s=a[0],o=a[1];if(this.annotationElementId){var l=this._initialData.position,u=P(this.getInitialTranslation(),2),c=u[0],d=u[1],f=P(this.pageTranslationToScreen(c,d),2);c=f[0],d=f[1];var v,p,g=P(this.pageDimensions,2),y=g[0],m=g[1],w=P(this.pageTranslation,2),b=w[0],k=w[1];switch(this.rotation){case 0:v=t+(l[0]-b)/y,p=n+this.height-(l[1]-k)/m;break;case 90:v=t+(l[0]-b)/y,p=n-(l[1]-k)/m;var _=[d,-c];c=_[0],d=_[1];break;case 180:v=t-this.width+(l[0]-b)/y,p=n-(l[1]-k)/m;var A=[-c,-d];c=A[0],d=A[1];break;case 270:v=t+(l[0]-b-this.height*m)/y,p=n+(l[1]-k-this.width*y)/m;var x=[-d,c];c=x[0],d=x[1]}this.setAt(v*s,p*o,c,d)}else this._moveAfterPaste(t,n);i(Wh,this,Vh).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"editorDivPaste",value:function(t){var n=t.clipboardData||window.clipboardData,r=n.types;if(1!==r.length||"text/plain"!==r[0]){t.preventDefault();var a=Xh.call(e,n.getData("text")||"").replaceAll(Ph,"\n");if(a){var s=window.getSelection();if(s.rangeCount){this.editorDiv.normalize(),s.deleteFromDocument();var o=s.getRangeAt(0);if(!a.includes("\n"))return o.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),void s.collapseToStart();var l=o.startContainer,u=o.startOffset,c=[],h=[];if(l.nodeType===Node.TEXT_NODE){var d=l.parentElement;if(h.push(l.nodeValue.slice(u).replaceAll(Ph,"")),d!==this.editorDiv){var v,p=c,g=m(this.editorDiv.childNodes);try{for(g.s();!(v=g.n()).done;){var y=v.value;y!==d?p.push(Gh.call(e,y)):p=h}}catch(t){g.e(t)}finally{g.f()}}c.push(l.nodeValue.slice(0,u).replaceAll(Ph,""))}else if(l===this.editorDiv){var w,b=c,k=0,_=m(this.editorDiv.childNodes);try{for(_.s();!(w=_.n()).done;){var A=w.value;k++===u&&(b=h),b.push(Gh.call(e,A))}}catch(t){_.e(t)}finally{_.f()}}f(Lh,this,"".concat(c.join("\n")).concat(a).concat(h.join("\n"))),i(Wh,this,Vh).call(this);var x,S=new Range,E=Math.sumPrecise(c.map(function(t){return t.length})),M=m(this.editorDiv.childNodes);try{for(M.s();!(x=M.n()).done;){var C=x.value.firstChild;if(C.nodeType===Node.TEXT_NODE){var R=C.nodeValue.length;if(E<=R){S.setStart(C,E),S.setEnd(C,E);break}E-=R}}}catch(t){M.e(t)}finally{M.f()}s.removeAllRanges(),s.addRange(S)}}}}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();var n=e._internalPadding*this.parentScale,r=this.getRect(n,n),a=Jr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:h(Dh,this)),s={annotationType:mt.FREETEXT,color:a,fontSize:h(Nh,this),value:i(Wh,this,qh).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(s.isCopy=!0,s):this.annotationElementId&&!i(Wh,this,Yh).call(this,s)?null:(s.id=this.annotationElementId,s)}},{key:"renderAnnotationElement",value:function(t){var n=D(e,"renderAnnotationElement",this,3)([t]);if(this.deleted)return n;var i=n.style;i.fontSize="calc(".concat(h(Nh,this),"px * var(--total-scale-factor))"),i.color=h(Dh,this),n.replaceChildren();var r,a=m(h(Lh,this).split("\n"));try{for(a.s();!(r=a.n()).done;){var s=r.value,o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),n.append(o)}}catch(t){a.e(t)}finally{a.f()}var l=e._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(l,l),popupContent:h(Lh,this)}),n}},{key:"resetAnnotationElement",value:function(t){D(e,"resetAnnotationElement",this,3)([t]),t.resetEdited()}}],[{key:"_keyboardManager",get:function(){var t=e.prototype,n=function(t){return t.isEmpty()},i=_i.TRANSLATE_SMALL,r=_i.TRANSLATE_BIG;return Qt(this,"_keyboardManager",new Cn([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}]]))}},{key:"initialize",value:function(t,e){Jr.initialize(t,e);var n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function(t,n){switch(t){case wt.FREETEXT_SIZE:e._defaultFontSize=n;break;case wt.FREETEXT_COLOR:e._defaultColor=n}}},{key:"defaultPropertiesToUpdate",get:function(){return[[wt.FREETEXT_SIZE,e._defaultFontSize],[wt.FREETEXT_COLOR,e._defaultColor||Jr._defaultLineColor]]}},{key:"deserialize",value:(n=o(C().m(function t(n,i,r){var a,s,o,l,u,c,h,d,v,p,g,y,m,w;return C().w(function(t){for(;;)switch(t.n){case 0:if(a=null,!(n instanceof Zc)){t.n=2;break}if(o=(s=n).data,l=o.defaultAppearanceData,u=l.fontSize,c=l.fontColor,h=o.rect,d=o.rotation,v=o.id,p=o.popupRef,g=s.textContent,y=s.textPosition,m=s.parent.page.pageNumber,g&&0!==g.length){t.n=1;break}return t.a(2,null);case 1:a=n={annotationType:mt.FREETEXT,color:Array.from(c),fontSize:u,value:g.join("\n"),position:y,pageIndex:m-1,rect:h.slice(0),rotation:d,id:v,deleted:!1,popupRef:p};case 2:return t.n=3,D(e,"deserialize",this,2)([n,i,r]);case 3:return w=t.v,f(Nh,w,n.fontSize),f(Dh,w,le.makeHexColor.apply(le,O(n.color))),f(Lh,w,Xh.call(e,n.value)),w.annotationElementId=n.id||null,w._initialData=a,t.a(2,w)}},t,this)})),function(t,e,i){return n.apply(this,arguments)})}]);var n}(Jr);function jh(t){var e=this,n=function(t){e.editorDiv.style.fontSize="calc(".concat(t,"px * var(--total-scale-factor))"),e.translate(0,-(t-h(Nh,e))*e.parentScale),f(Nh,e,t),i(Wh,e,Hh).call(e)},r=h(Nh,this);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function zh(t){var e=this,n=function(t){f(Dh,e,e.editorDiv.style.color=t)},i=h(Dh,this);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Uh(){var t=[];this.editorDiv.normalize();var e,n=null,i=m(this.editorDiv.childNodes);try{for(i.s();!(e=i.n()).done;){var r,a=e.value;(null===(r=n)||void 0===r?void 0:r.nodeType)===Node.TEXT_NODE&&"BR"===a.nodeName||(t.push(Gh.call(K,a)),n=a)}}catch(t){i.e(t)}finally{i.f()}return t.join("\n")}function Hh(){var t,e=P(this.parentDimensions,2),n=e[0],i=e[1];if(this.isAttachedToDOM)t=this.div.getBoundingClientRect();else{var r=this.currentLayer,a=this.div,s=a.style.display,o=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),t=a.getBoundingClientRect(),a.remove(),a.style.display=s,a.classList.toggle("hidden",o)}this.rotation%180==this.parentRotation%180?(this.width=t.width/n,this.height=t.height/i):(this.width=t.height/n,this.height=t.width/i),this.fixAndSetPosition()}function Gh(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ph,"")}function Vh(){if(this.editorDiv.replaceChildren(),h(Lh,this)){var t,e=m(h(Lh,this).split("\n"));try{for(e.s();!(t=e.n()).done;){var n=t.value,i=document.createElement("div");i.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(i)}}catch(t){e.e(t)}finally{e.f()}}}function qh(){return h(Lh,this).replaceAll(" "," ")}function Xh(t){return t.replaceAll(" "," ")}function Yh(t){var e=this._initialData,n=e.value,i=e.fontSize,r=e.color,a=e.pageIndex;return this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some(function(t,e){return t!==r[e]})||t.pageIndex!==a}K=Bh,w(Bh,"_freeTextDefaultContent",""),w(Bh,"_internalPadding",0),w(Bh,"_defaultColor",null),w(Bh,"_defaultFontSize",10),w(Bh,"_type","freetext"),w(Bh,"_editorType",mt.FREETEXT);var Kh=function(){return y(function t(){c(this,t)},[{key:"toSVGPath",value:function(){qt("Abstract method `toSVGPath` must be implemented.")}},{key:"box",get:function(){qt("Abstract getter `box` must be implemented.")}},{key:"serialize",value:function(t,e){qt("Abstract method `serialize` must be implemented.")}}],[{key:"_rescale",value:function(t,e,n,i,r,a){a||(a=new Float32Array(t.length));for(var s=0,o=t.length;s<o;s+=2)a[s]=e+t[s]*i,a[s+1]=n+t[s+1]*r;return a}},{key:"_rescaleAndSwap",value:function(t,e,n,i,r,a){a||(a=new Float32Array(t.length));for(var s=0,o=t.length;s<o;s+=2)a[s]=e+t[s+1]*i,a[s+1]=n+t[s]*r;return a}},{key:"_translate",value:function(t,e,n,i){i||(i=new Float32Array(t.length));for(var r=0,a=t.length;r<a;r+=2)i[r]=e+t[r],i[r+1]=n+t[r+1];return i}},{key:"svgRound",value:function(t){return Math.round(1e4*t)}},{key:"_normalizePoint",value:function(t,e,n,i,r){switch(r){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}},{key:"_normalizePagePoint",value:function(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}},{key:"createBezierPoints",value:function(t,e,n,i,r,a){return[(t+5*n)/6,(e+5*i)/6,(5*n+r)/6,(5*i+a)/6,(n+r)/2,(i+a)/2]}}])}();w(Kh,"PRECISION",1e-4);var Qh=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,$h=new WeakMap,td=new WeakMap,ed=new WeakMap,nd=new WeakMap,id=new WeakMap,rd=new WeakMap,ad=new WeakMap,sd=new WeakMap,od=new WeakMap,ld=new WeakMap,ud=new WeakSet,cd=function(){return y(function t(e,n,i,r,a){var s=e.x,o=e.y,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;c(this,t),p(this,ud),d(this,Qh,void 0),d(this,Jh,[]),d(this,Zh,void 0),d(this,$h,void 0),d(this,td,[]),d(this,ed,new Float32Array(18)),d(this,nd,void 0),d(this,id,void 0),d(this,rd,void 0),d(this,ad,void 0),d(this,sd,void 0),d(this,od,void 0),d(this,ld,[]),f(Qh,this,n),f(od,this,r*i),f($h,this,a),h(ed,this).set([NaN,NaN,NaN,NaN,s,o],6),f(Zh,this,l),f(ad,this,md._*i),f(rd,this,wd._*i),f(sd,this,i),h(ld,this).push(s,o)},[{key:"isEmpty",value:function(){return isNaN(h(ed,this)[8])}},{key:"add",value:function(t){var e,n=t.x,i=t.y;f(nd,this,n),f(id,this,i);var r=P(h(Qh,this),4),a=r[0],s=r[1],o=r[2],l=r[3],u=P(h(ed,this).subarray(8,12),4),c=u[0],d=u[1],v=u[2],p=u[3],g=n-v,y=i-p,m=Math.hypot(g,y);if(m<h(rd,this))return!1;var w=m-h(ad,this),b=w/m,k=b*g,_=b*y,A=c,x=d;c=v,d=p,v+=k,p+=_,null===(e=h(ld,this))||void 0===e||e.push(n,i);var S=k/w,E=-_/w*h(od,this),M=S*h(od,this);if(h(ed,this).set(h(ed,this).subarray(2,8),0),h(ed,this).set([v+E,p+M],4),h(ed,this).set(h(ed,this).subarray(14,18),12),h(ed,this).set([v-E,p-M],16),isNaN(h(ed,this)[6]))return 0===h(td,this).length&&(h(ed,this).set([c+E,d+M],2),h(td,this).push(NaN,NaN,NaN,NaN,(c+E-a)/o,(d+M-s)/l),h(ed,this).set([c-E,d-M],14),h(Jh,this).push(NaN,NaN,NaN,NaN,(c-E-a)/o,(d-M-s)/l)),h(ed,this).set([A,x,c,d,v,p],6),!this.isEmpty();if(h(ed,this).set([A,x,c,d,v,p],6),Math.abs(Math.atan2(x-d,A-c)-Math.atan2(_,k))<Math.PI/2){var C=P(h(ed,this).subarray(2,6),4);c=C[0],d=C[1],v=C[2],p=C[3],h(td,this).push(NaN,NaN,NaN,NaN,((c+v)/2-a)/o,((d+p)/2-s)/l);var R=P(h(ed,this).subarray(14,18),4);return c=R[0],d=R[1],A=R[2],x=R[3],h(Jh,this).push(NaN,NaN,NaN,NaN,((A+c)/2-a)/o,((x+d)/2-s)/l),!0}var T=P(h(ed,this).subarray(0,6),6);A=T[0],x=T[1],c=T[2],d=T[3],v=T[4],p=T[5],h(td,this).push(((A+5*c)/6-a)/o,((x+5*d)/6-s)/l,((5*c+v)/6-a)/o,((5*d+p)/6-s)/l,((c+v)/2-a)/o,((d+p)/2-s)/l);var I=P(h(ed,this).subarray(12,18),6);return v=I[0],p=I[1],c=I[2],d=I[3],A=I[4],x=I[5],h(Jh,this).push(((A+5*c)/6-a)/o,((x+5*d)/6-s)/l,((5*c+v)/6-a)/o,((5*d+p)/6-s)/l,((c+v)/2-a)/o,((d+p)/2-s)/l),!0}},{key:"toSVGPath",value:function(){if(this.isEmpty())return"";var t=h(td,this),e=h(Jh,this);if(isNaN(h(ed,this)[6])&&!this.isEmpty())return i(ud,this,dd).call(this);var n=[];n.push("M".concat(t[4]," ").concat(t[5]));for(var r=6;r<t.length;r+=6)isNaN(t[r])?n.push("L".concat(t[r+4]," ").concat(t[r+5])):n.push("C".concat(t[r]," ").concat(t[r+1]," ").concat(t[r+2]," ").concat(t[r+3]," ").concat(t[r+4]," ").concat(t[r+5]));i(ud,this,vd).call(this,n);for(var a=e.length-6;a>=6;a-=6)isNaN(e[a])?n.push("L".concat(e[a+4]," ").concat(e[a+5])):n.push("C".concat(e[a]," ").concat(e[a+1]," ").concat(e[a+2]," ").concat(e[a+3]," ").concat(e[a+4]," ").concat(e[a+5]));return i(ud,this,fd).call(this,n),n.join(" ")}},{key:"newFreeDrawOutline",value:function(t,e,n,i,r,a){return new Cd(t,e,n,i,r,a)}},{key:"getOutlines",value:function(){for(var t,e,n=h(td,this),r=h(Jh,this),a=h(ed,this),s=P(h(Qh,this),4),o=s[0],l=s[1],u=s[2],c=s[3],d=new Float32Array((null!==(t=null===(e=h(ld,this))||void 0===e?void 0:e.length)&&void 0!==t?t:0)+2),f=0,v=d.length-2;f<v;f+=2)d[f]=(h(ld,this)[f]-o)/u,d[f+1]=(h(ld,this)[f+1]-l)/c;if(d[d.length-2]=(h(nd,this)-o)/u,d[d.length-1]=(h(id,this)-l)/c,isNaN(a[6])&&!this.isEmpty())return i(ud,this,pd).call(this,d);for(var p=new Float32Array(h(td,this).length+24+h(Jh,this).length),g=n.length,y=0;y<g;y+=2)isNaN(n[y])?p[y]=p[y+1]=NaN:(p[y]=n[y],p[y+1]=n[y+1]);g=i(ud,this,yd).call(this,p,g);for(var m=r.length-6;m>=6;m-=6)for(var w=0;w<6;w+=2)isNaN(r[m+w])?(p[g]=p[g+1]=NaN,g+=2):(p[g]=r[m+w],p[g+1]=r[m+w+1],g+=2);return i(ud,this,gd).call(this,p,g),this.newFreeDrawOutline(p,d,h(Qh,this),h(sd,this),h(Zh,this),h($h,this))}}])}();function hd(){var t=h(ed,this).subarray(4,6),e=h(ed,this).subarray(16,18),n=P(h(Qh,this),4),i=n[0],r=n[1],a=n[2],s=n[3];return[(h(nd,this)+(t[0]-e[0])/2-i)/a,(h(id,this)+(t[1]-e[1])/2-r)/s,(h(nd,this)+(e[0]-t[0])/2-i)/a,(h(id,this)+(e[1]-t[1])/2-r)/s]}function dd(){var t=P(h(Qh,this),4),e=t[0],n=t[1],r=t[2],a=t[3],s=P(i(ud,this,hd).call(this),4),o=s[0],l=s[1],u=s[2],c=s[3];return"M".concat((h(ed,this)[2]-e)/r," ").concat((h(ed,this)[3]-n)/a," L").concat((h(ed,this)[4]-e)/r," ").concat((h(ed,this)[5]-n)/a," L").concat(o," ").concat(l," L").concat(u," ").concat(c," L").concat((h(ed,this)[16]-e)/r," ").concat((h(ed,this)[17]-n)/a," L").concat((h(ed,this)[14]-e)/r," ").concat((h(ed,this)[15]-n)/a," Z")}function fd(t){var e=h(Jh,this);t.push("L".concat(e[4]," ").concat(e[5]," Z"))}function vd(t){var e=P(h(Qh,this),4),n=e[0],r=e[1],a=e[2],s=e[3],o=h(ed,this).subarray(4,6),l=h(ed,this).subarray(16,18),u=P(i(ud,this,hd).call(this),4),c=u[0],d=u[1],f=u[2],v=u[3];t.push("L".concat((o[0]-n)/a," ").concat((o[1]-r)/s," L").concat(c," ").concat(d," L").concat(f," ").concat(v," L").concat((l[0]-n)/a," ").concat((l[1]-r)/s))}function pd(t){var e=h(ed,this),n=P(h(Qh,this),4),r=n[0],a=n[1],s=n[2],o=n[3],l=P(i(ud,this,hd).call(this),4),u=l[0],c=l[1],d=l[2],f=l[3],v=new Float32Array(36);return v.set([NaN,NaN,NaN,NaN,(e[2]-r)/s,(e[3]-a)/o,NaN,NaN,NaN,NaN,(e[4]-r)/s,(e[5]-a)/o,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(e[16]-r)/s,(e[17]-a)/o,NaN,NaN,NaN,NaN,(e[14]-r)/s,(e[15]-a)/o],0),this.newFreeDrawOutline(v,t,h(Qh,this),h(sd,this),h(Zh,this),h($h,this))}function gd(t,e){var n=h(Jh,this);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+6}function yd(t,e){var n=h(ed,this).subarray(4,6),r=h(ed,this).subarray(16,18),a=P(h(Qh,this),4),s=a[0],o=a[1],l=a[2],u=a[3],c=P(i(ud,this,hd).call(this),4),d=c[0],f=c[1],v=c[2],p=c[3];return t.set([NaN,NaN,NaN,NaN,(n[0]-s)/l,(n[1]-o)/u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,v,p,NaN,NaN,NaN,NaN,(r[0]-s)/l,(r[1]-o)/u],e),e+24}var md={_:8},wd={_:md._+2},bd=new WeakMap,kd=new WeakMap,_d=new WeakMap,Ad=new WeakMap,xd=new WeakMap,Sd=new WeakMap,Ed=new WeakMap,Md=new WeakSet,Cd=function(t){function e(t,n,r,a,s,o){var u;c(this,e),p(u=l(this,e),Md),d(u,bd,void 0),d(u,kd,new Float32Array(4)),d(u,_d,void 0),d(u,Ad,void 0),d(u,xd,void 0),d(u,Sd,void 0),d(u,Ed,void 0),f(Ed,u,t),f(xd,u,n),f(bd,u,r),f(Sd,u,a),f(_d,u,s),f(Ad,u,o),u.lastPoint=[NaN,NaN],i(Md,u,Rd).call(u,o);for(var v=P(h(kd,u),4),g=v[0],y=v[1],m=v[2],w=v[3],b=0,k=t.length;b<k;b+=2)t[b]=(t[b]-g)/m,t[b+1]=(t[b+1]-y)/w;for(var _=0,A=n.length;_<A;_+=2)n[_]=(n[_]-g)/m,n[_+1]=(n[_+1]-y)/w;return u}return _(e,t),y(e,[{key:"toSVGPath",value:function(){for(var t=["M".concat(h(Ed,this)[4]," ").concat(h(Ed,this)[5])],e=6,n=h(Ed,this).length;e<n;e+=6)isNaN(h(Ed,this)[e])?t.push("L".concat(h(Ed,this)[e+4]," ").concat(h(Ed,this)[e+5])):t.push("C".concat(h(Ed,this)[e]," ").concat(h(Ed,this)[e+1]," ").concat(h(Ed,this)[e+2]," ").concat(h(Ed,this)[e+3]," ").concat(h(Ed,this)[e+4]," ").concat(h(Ed,this)[e+5]));return t.push("Z"),t.join(" ")}},{key:"serialize",value:function(t,e){var n,i,r=P(t,4),a=r[0],s=r[1],o=r[2],l=r[3],u=o-a,c=l-s;switch(e){case 0:n=Kh._rescale(h(Ed,this),a,l,u,-c),i=Kh._rescale(h(xd,this),a,l,u,-c);break;case 90:n=Kh._rescaleAndSwap(h(Ed,this),a,s,u,c),i=Kh._rescaleAndSwap(h(xd,this),a,s,u,c);break;case 180:n=Kh._rescale(h(Ed,this),o,s,-u,c),i=Kh._rescale(h(xd,this),o,s,-u,c);break;case 270:n=Kh._rescaleAndSwap(h(Ed,this),o,l,-u,-c),i=Kh._rescaleAndSwap(h(xd,this),o,l,-u,-c)}return{outline:Array.from(n),points:[Array.from(i)]}}},{key:"box",get:function(){return h(kd,this)}},{key:"newOutliner",value:function(t,e,n,i,r){return new cd(t,e,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}},{key:"getNewOutline",value:function(t,e){for(var n=P(h(kd,this),4),i=n[0],r=n[1],a=n[2],s=n[3],o=P(h(bd,this),4),l=o[0],u=o[1],c=o[2],d=o[3],f=a*c,v=s*d,p=i*c+l,g=r*d+u,y=this.newOutliner({x:h(xd,this)[0]*f+p,y:h(xd,this)[1]*v+g},h(bd,this),h(Sd,this),t,h(Ad,this),null!=e?e:h(_d,this)),m=2;m<h(xd,this).length;m+=2)y.add({x:h(xd,this)[m]*f+p,y:h(xd,this)[m+1]*v+g});return y.getOutlines()}}])}(Kh);function Rd(t){for(var e=h(Ed,this),n=e[4],i=e[5],r=[n,i,n,i],a=n,s=i,o=t?Math.max:Math.min,l=6,u=e.length;l<u;l+=6){var c=e[l+4],d=e[l+5];if(isNaN(e[l]))le.pointBoundingBox(c,d,r),s<d?(a=c,s=d):s===d&&(a=o(a,c));else{var f=[1/0,1/0,-1/0,-1/0];le.bezierBoundingBox.apply(le,[n,i].concat(O(e.slice(l,l+6)),[f])),le.rectBoundingBox.apply(le,f.concat([r])),s<f[3]?(a=f[2],s=f[3]):s===f[3]&&(a=o(a,f[2]))}n=c,i=d}var v=h(kd,this);v[0]=r[0]-h(_d,this),v[1]=r[1]-h(_d,this),v[2]=r[2]-r[0]+2*h(_d,this),v[3]=r[3]-r[1]+2*h(_d,this),this.lastPoint=[a,s]}var Td=new WeakMap,Id=new WeakMap,Pd=new WeakMap,Dd=new WeakMap,Ld=new WeakSet,Od=function(){return y(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];c(this,t),p(this,Ld),d(this,Td,void 0),d(this,Id,void 0),d(this,Pd,[]),d(this,Dd,[]);var a,s=[1/0,1/0,-1/0,-1/0],o=Math.pow(10,-4),l=m(e);try{for(l.s();!(a=l.n()).done;){var u=a.value,v=u.x,g=u.y,y=u.width,w=u.height,b=Math.floor((v-n)/o)*o,k=Math.ceil((v+y+n)/o)*o,_=Math.floor((g-n)/o)*o,A=Math.ceil((g+w+n)/o)*o,x=[b,_,A,!0],S=[k,_,A,!1];h(Pd,this).push(x,S),le.rectBoundingBox(b,_,k,A,s)}}catch(t){l.e(t)}finally{l.f()}var E,M=s[2]-s[0]+2*i,C=s[3]-s[1]+2*i,R=s[0]-i,T=s[1]-i,I=h(Pd,this).at(r?-1:-2),D=[I[0],I[2]],L=m(h(Pd,this));try{for(L.s();!(E=L.n()).done;){var O=E.value,F=P(O,3),N=F[0],W=F[1],B=F[2];O[0]=(N-R)/M,O[1]=(W-T)/C,O[2]=(B-T)/C}}catch(t){L.e(t)}finally{L.f()}f(Td,this,new Float32Array([R,T,M,C])),f(Id,this,D)},[{key:"getOutlines",value:function(){h(Pd,this).sort(function(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]});var t,e=[],n=m(h(Pd,this));try{for(n.s();!(t=n.n()).done;){var r=t.value;r[3]?(e.push.apply(e,O(i(Ld,this,jd).call(this,r))),i(Ld,this,Wd).call(this,r)):(i(Ld,this,Bd).call(this,r),e.push.apply(e,O(i(Ld,this,jd).call(this,r))))}}catch(t){n.e(t)}finally{n.f()}return i(Ld,this,Fd).call(this,e)}}])}();function Fd(t){var e,n=[],i=new Set,r=m(t);try{for(r.s();!(e=r.n()).done;){var a=e.value,s=P(a,3),o=s[0],l=s[1],u=s[2];n.push([o,l,a],[o,u,a])}}catch(t){r.e(t)}finally{r.f()}n.sort(function(t,e){return t[1]-e[1]||t[0]-e[0]});for(var c=0,d=n.length;c<d;c+=2){var f=n[c][2],v=n[c+1][2];f.push(v),v.push(f),i.add(f),i.add(v)}for(var p,g=[];i.size>0;){var y=i.values().next().value,w=P(y,5),b=w[0],k=w[1],_=w[2],A=w[3],x=w[4];i.delete(y);var S=b,E=k;for(p=[b,_],g.push(p);;){var M=void 0;if(i.has(A))M=A;else{if(!i.has(x))break;M=x}i.delete(M);var C=P(M,5);b=C[0],k=C[1],_=C[2],A=C[3],x=C[4],S!==b&&(p.push(S,E,b,E===k?k:_),S=b),E=E===k?_:k}p.push(S,E)}return new Hd(g,h(Td,this),h(Id,this))}function Nd(t){for(var e=h(Dd,this),n=0,i=e.length-1;n<=i;){var r=n+i>>1,a=e[r][0];if(a===t)return r;a<t?n=r+1:i=r-1}return i+1}function Wd(t){var e=P(t,3),n=e[1],r=e[2],a=i(Ld,this,Nd).call(this,n);h(Dd,this).splice(a,0,[n,r])}function Bd(t){for(var e=P(t,3),n=e[1],r=e[2],a=i(Ld,this,Nd).call(this,n),s=a;s<h(Dd,this).length;s++){var o=P(h(Dd,this)[s],2),l=o[0],u=o[1];if(l!==n)break;if(l===n&&u===r)return void h(Dd,this).splice(s,1)}for(var c=a-1;c>=0;c--){var d=P(h(Dd,this)[c],2),f=d[0],v=d[1];if(f!==n)break;if(f===n&&v===r)return void h(Dd,this).splice(c,1)}}function jd(t){for(var e=P(t,3),n=e[0],r=e[1],a=e[2],s=[[n,r,a]],o=i(Ld,this,Nd).call(this,a),l=0;l<o;l++)for(var u=P(h(Dd,this)[l],2),c=u[0],d=u[1],f=0,v=s.length;f<v;f++){var p=P(s[f],3),g=p[1],y=p[2];if(!(d<=g||y<=c))if(g>=c)if(y>d)s[f][1]=d;else{if(1===v)return[];s.splice(f,1),f--,v--}else s[f][2]=c,y>d&&s.push([n,d,y])}return s}var zd=new WeakMap,Ud=new WeakMap,Hd=function(t){function e(t,n,i){var r;return c(this,e),d(r=l(this,e),zd,void 0),d(r,Ud,void 0),f(Ud,r,t),f(zd,r,n),r.lastPoint=i,r}return _(e,t),y(e,[{key:"toSVGPath",value:function(){var t,e=[],n=m(h(Ud,this));try{for(n.s();!(t=n.n()).done;){var i=t.value,r=P(i,2),a=r[0],s=r[1];e.push("M".concat(a," ").concat(s));for(var o=2;o<i.length;o+=2){var l=i[o],u=i[o+1];l===a?(e.push("V".concat(u)),s=u):u===s&&(e.push("H".concat(l)),a=l)}e.push("Z")}}catch(t){n.e(t)}finally{n.f()}return e.join(" ")}},{key:"serialize",value:function(t,e){var n,i=P(t,4),r=i[0],a=i[1],s=i[2],o=i[3],l=[],u=s-r,c=o-a,d=m(h(Ud,this));try{for(d.s();!(n=d.n()).done;){for(var f=n.value,v=new Array(f.length),p=0;p<f.length;p+=2)v[p]=r+f[p]*u,v[p+1]=o-f[p+1]*c;l.push(v)}}catch(t){d.e(t)}finally{d.f()}return l}},{key:"box",get:function(){return h(zd,this)}},{key:"classNamesForOutlining",get:function(){return["highlightOutline"]}}])}(Kh),Gd=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"newFreeDrawOutline",value:function(t,e,n,i,r,a){return new Vd(t,e,n,i,r,a)}}])}(cd),Vd=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"newOutliner",value:function(t,e,n,i,r){return new Gd(t,e,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}])}(Cd),qd=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,Kd=new WeakMap,Qd=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,$d=new WeakMap,tf=new WeakMap,ef=new WeakMap,nf=new WeakMap,rf=new WeakSet,af=function(){function t(e){var n,i=e.editor,r=void 0===i?null:i,a=e.uiManager,s=void 0===a?null:a;c(this,t),p(this,rf),d(this,qd,null),d(this,Xd,null),d(this,Yd,void 0),d(this,Kd,null),d(this,Qd,!1),d(this,Jd,!1),d(this,Zd,null),d(this,$d,void 0),d(this,tf,null),d(this,ef,null),d(this,nf,void 0),r?(f(Jd,this,!1),f(nf,this,wt.HIGHLIGHT_COLOR),f(Zd,this,r)):(f(Jd,this,!0),f(nf,this,wt.HIGHLIGHT_DEFAULT_COLOR)),f(ef,this,(null==r?void 0:r._uiManager)||s),f($d,this,h(ef,this)._eventBus),f(Yd,this,(null==r?void 0:r.color)||(null===(n=h(ef,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98"),df._||(df._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}return y(t,[{key:"renderButton",value:function(){var t=f(qd,this,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);var e=h(ef,this)._signal;t.addEventListener("click",i(rf,this,uf).bind(this),{signal:e}),t.addEventListener("keydown",i(rf,this,lf).bind(this),{signal:e});var n=f(Xd,this,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=h(Yd,this),t.append(n),t}},{key:"renderMainDropdown",value:function(){var t=f(Kd,this,i(rf,this,sf).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}},{key:"_colorSelectFromKeyboard",value:function(t){if(t.target!==h(qd,this)){var e=t.target.getAttribute("data-color");e&&i(rf,this,of).call(this,e,t)}else i(rf,this,uf).call(this,t)}},{key:"_moveToNext",value:function(t){var e,n;v(rf,this,hf)?t.target!==h(qd,this)?null===(e=t.target.nextSibling)||void 0===e||e.focus():null===(n=h(Kd,this).firstChild)||void 0===n||n.focus():i(rf,this,uf).call(this,t)}},{key:"_moveToPrevious",value:function(t){var e,n;t.target!==(null===(e=h(Kd,this))||void 0===e?void 0:e.firstChild)&&t.target!==h(qd,this)?(v(rf,this,hf)||i(rf,this,uf).call(this,t),null===(n=t.target.previousSibling)||void 0===n||n.focus()):v(rf,this,hf)&&this._hideDropdownFromKeyboard()}},{key:"_moveToBeginning",value:function(t){var e;v(rf,this,hf)?null===(e=h(Kd,this).firstChild)||void 0===e||e.focus():i(rf,this,uf).call(this,t)}},{key:"_moveToEnd",value:function(t){var e;v(rf,this,hf)?null===(e=h(Kd,this).lastChild)||void 0===e||e.focus():i(rf,this,uf).call(this,t)}},{key:"hideDropdown",value:function(){var t,e;null===(t=h(Kd,this))||void 0===t||t.classList.add("hidden"),null===(e=h(tf,this))||void 0===e||e.abort(),f(tf,this,null)}},{key:"_hideDropdownFromKeyboard",value:function(){var t;h(Jd,this)||(v(rf,this,hf)?(this.hideDropdown(),h(qd,this).focus({preventScroll:!0,focusVisible:h(Qd,this)})):null===(t=h(Zd,this))||void 0===t||t.unselect())}},{key:"updateColor",value:function(t){if(h(Xd,this)&&(h(Xd,this).style.backgroundColor=t),h(Kd,this)){var e,n=h(ef,this).highlightColors.values(),i=m(h(Kd,this).children);try{for(i.s();!(e=i.n()).done;){e.value.setAttribute("aria-selected",n.next().value===t)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"destroy",value:function(){var t,e;null===(t=h(qd,this))||void 0===t||t.remove(),f(qd,this,null),f(Xd,this,null),null===(e=h(Kd,this))||void 0===e||e.remove(),f(Kd,this,null)}}],[{key:"_keyboardManager",get:function(){return Qt(this,"_keyboardManager",new Cn([[["Escape","mac+Escape"],t.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],t.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],t.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],t.prototype._moveToPrevious],[["Home","mac+Home"],t.prototype._moveToBeginning],[["End","mac+End"],t.prototype._moveToEnd]]))}}])}();function sf(){var t=document.createElement("div"),e=h(ef,this)._signal;t.addEventListener("contextmenu",Ie,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");var n,r=m(h(ef,this).highlightColors);try{for(r.s();!(n=r.n()).done;){var a=P(n.value,2),s=a[0],o=a[1],l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",o),l.title=s,l.setAttribute("data-l10n-id",df._[s]);var u=document.createElement("span");l.append(u),u.className="swatch",u.style.backgroundColor=o,l.setAttribute("aria-selected",o===h(Yd,this)),l.addEventListener("click",i(rf,this,of).bind(this,o),{signal:e}),t.append(l)}}catch(t){r.e(t)}finally{r.f()}return t.addEventListener("keydown",i(rf,this,lf).bind(this),{signal:e}),t}function of(t,e){e.stopPropagation(),h($d,this).dispatch("switchannotationeditorparams",{source:this,type:h(nf,this),value:t})}function lf(t){Q._keyboardManager.exec(this,t)}function uf(t){if(v(rf,this,hf))this.hideDropdown();else if(f(Qd,this,0===t.detail),h(tf,this)||(f(tf,this,new AbortController),window.addEventListener("pointerdown",i(rf,this,cf).bind(this),{signal:h(ef,this).combinedSignal(h(tf,this))})),h(Kd,this))h(Kd,this).classList.remove("hidden");else{var e=f(Kd,this,i(rf,this,sf).call(this));h(qd,this).append(e)}}function cf(t){var e;null!==(e=h(Kd,this))&&void 0!==e&&e.contains(t.target)||this.hideDropdown()}function hf(t){return h(Kd,t)&&!h(Kd,t).classList.contains("hidden")}Q=af;var df={_:null},ff=new WeakMap,vf=new WeakMap,pf=new WeakMap,gf=new WeakMap,yf=new WeakMap,mf=new WeakMap,wf=new WeakMap,bf=new WeakMap,kf=new WeakMap,_f=new WeakMap,Af=new WeakMap,xf=new WeakMap,Sf=new WeakMap,Ef=new WeakMap,Mf=new WeakMap,Cf=new WeakMap,Rf=new WeakMap,Tf=new WeakMap,If=new WeakSet,Pf=function(t){function e(t){var n;return c(this,e),p(n=l(this,e,[M(M({},t),{},{name:"highlightEditor"})]),If),d(n,ff,null),d(n,vf,0),d(n,pf,void 0),d(n,gf,null),d(n,yf,null),d(n,mf,null),d(n,wf,null),d(n,bf,0),d(n,kf,null),d(n,_f,null),d(n,Af,null),d(n,xf,!1),d(n,Sf,null),d(n,Ef,void 0),d(n,Mf,null),d(n,Cf,""),d(n,Rf,void 0),d(n,Tf,""),n.color=t.color||e._defaultColor,f(Rf,n,t.thickness||e._defaultThickness),f(Ef,n,t.opacity||e._defaultOpacity),f(pf,n,t.boxes||null),f(Tf,n,t.methodOfCreation||""),f(Cf,n,t.text||""),n._isDraggable=!1,n.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(f(xf,n,!0),i(If,n,Lf).call(n,t),i(If,n,Bf).call(n)):h(pf,n)&&(f(ff,n,t.anchorNode),f(vf,n,t.anchorOffset),f(wf,n,t.focusNode),f(bf,n,t.focusOffset),i(If,n,Df).call(n),i(If,n,Bf).call(n),n.rotate(n.rotation)),n}return _(e,t),y(e,[{key:"telemetryInitialData",get:function(){return{action:"added",type:h(xf,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:h(Rf,this),methodOfCreation:h(Tf,this)}}},{key:"telemetryFinalData",get:function(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}},{key:"translateInPage",value:function(t,e){}},{key:"toolbarPosition",get:function(){return h(Sf,this)}},{key:"updateParams",value:function(t,e){switch(t){case wt.HIGHLIGHT_COLOR:i(If,this,Of).call(this,e);break;case wt.HIGHLIGHT_THICKNESS:i(If,this,Ff).call(this,e)}}},{key:"propertiesToUpdate",get:function(){return[[wt.HIGHLIGHT_COLOR,this.color||e._defaultColor],[wt.HIGHLIGHT_THICKNESS,h(Rf,this)||e._defaultThickness],[wt.HIGHLIGHT_FREE,h(xf,this)]]}},{key:"addEditToolbar",value:(r=o(C().m(function t(){var n;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,D(e,"addEditToolbar",this,3)([]);case 1:if(n=t.v){t.n=2;break}return t.a(2,null);case 2:return this._uiManager.highlightColors&&(f(yf,this,new af({editor:this})),n.addColorPicker(h(yf,this))),t.a(2,n)}},t,this)})),function(){return r.apply(this,arguments)})},{key:"disableEditing",value:function(){D(e,"disableEditing",this,3)([]),this.div.classList.toggle("disabled",!0)}},{key:"enableEditing",value:function(){D(e,"enableEditing",this,3)([]),this.div.classList.toggle("disabled",!1)}},{key:"fixAndSetPosition",value:function(){return D(e,"fixAndSetPosition",this,3)([i(If,this,Hf).call(this)])}},{key:"getBaseTranslation",value:function(){return[0,0]}},{key:"getRect",value:function(t,n){return D(e,"getRect",this,3)([t,n,i(If,this,Hf).call(this)])}},{key:"onceAdded",value:function(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}},{key:"remove",value:function(){i(If,this,Wf).call(this),this._reportTelemetry({action:"deleted"}),D(e,"remove",this,3)([])}},{key:"rebuild",value:function(){this.parent&&(D(e,"rebuild",this,3)([]),null!==this.div&&(i(If,this,Bf).call(this),this.isAttachedToDOM||this.parent.add(this)))}},{key:"setParent",value:function(t){var n=!1;if(this.parent&&!t)i(If,this,Wf).call(this);else if(t){var r;i(If,this,Bf).call(this,t),n=!this.parent&&(null===(r=this.div)||void 0===r?void 0:r.classList.contains("selectedEditor"))}D(e,"setParent",this,3)([t]),this.show(this._isVisible),n&&this.select()}},{key:"rotate",value:function(t){var n,i=this.parent.drawLayer;h(xf,this)?(t=(t-this.rotation+360)%360,n=jf.call(e,h(_f,this).box,t)):n=jf.call(e,[this.x,this.y,this.width,this.height],t),i.updateProperties(h(Af,this),{bbox:n,root:{"data-main-rotation":t}}),i.updateProperties(h(Mf,this),{bbox:jf.call(e,h(mf,this).box,t),root:{"data-main-rotation":t}})}},{key:"render",value:function(){if(this.div)return this.div;var t=D(e,"render",this,3)([]);h(Cf,this)&&(t.setAttribute("aria-label",h(Cf,this)),t.setAttribute("role","mark")),h(xf,this)?t.classList.add("free"):this.div.addEventListener("keydown",i(If,this,zf).bind(this),{signal:this._uiManager._signal});var n=f(kf,this,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=h(gf,this);var r=P(this.parentDimensions,2),a=r[0],s=r[1];return this.setDims(this.width*a,this.height*s),dn(this,h(kf,this),["pointerover","pointerleave"]),this.enableEditing(),t}},{key:"pointerover",value:function(){var t;this.isSelected||(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(h(Mf,this),{rootClass:{hovered:!0}}))}},{key:"pointerleave",value:function(){var t;this.isSelected||(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(h(Mf,this),{rootClass:{hovered:!1}}))}},{key:"_moveCaret",value:function(t){switch(this.parent.unselect(this),t){case 0:case 2:i(If,this,Uf).call(this,!0);break;case 1:case 3:i(If,this,Uf).call(this,!1)}}},{key:"select",value:function(){var t;D(e,"select",this,3)([]),h(Mf,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(h(Mf,this),{rootClass:{hovered:!1,selected:!0}}))}},{key:"unselect",value:function(){var t;D(e,"unselect",this,3)([]),h(Mf,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(h(Mf,this),{rootClass:{selected:!1}}),h(xf,this)||i(If,this,Uf).call(this,!1))}},{key:"_mustFixPosition",get:function(){return!h(xf,this)}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;D(e,"show",this,3)([t]),this.parent&&(this.parent.drawLayer.updateProperties(h(Af,this),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(h(Mf,this),{rootClass:{hidden:!t}}))}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();var e=this.getRect(0,0),n=Jr._colorManager.convert(this.color),r={annotationType:mt.HIGHLIGHT,color:n,opacity:h(Ef,this),thickness:h(Rf,this),quadPoints:i(If,this,Gf).call(this),outlines:i(If,this,Vf).call(this,e),pageIndex:this.pageIndex,rect:e,rotation:i(If,this,Hf).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!i(If,this,Yf).call(this,r)?null:(r.id=this.annotationElementId,r)}},{key:"renderAnnotationElement",value:function(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}],[{key:"_keyboardManager",get:function(){var t=e.prototype;return Qt(this,"_keyboardManager",new Cn([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}},{key:"computeTelemetryFinalData",value:function(t){return{numberOfColors:t.get("color").size}}},{key:"initialize",value:function(t,n){var i;Jr.initialize(t,n),e._defaultColor||(e._defaultColor=(null===(i=n.highlightColors)||void 0===i?void 0:i.values().next().value)||"#fff066")}},{key:"updateDefaultParams",value:function(t,n){switch(t){case wt.HIGHLIGHT_DEFAULT_COLOR:e._defaultColor=n;break;case wt.HIGHLIGHT_THICKNESS:e._defaultThickness=n}}},{key:"defaultPropertiesToUpdate",get:function(){return[[wt.HIGHLIGHT_DEFAULT_COLOR,e._defaultColor],[wt.HIGHLIGHT_THICKNESS,e._defaultThickness]]}},{key:"startHighlighting",value:function(t,n,r){var a=this,s=r.target,o=r.x,l=r.y,u=s.getBoundingClientRect(),c=u.x,h=u.y,d=u.width,f=u.height,v=new AbortController,p=t.combinedSignal(v),g=function(n){v.abort(),i(e,a,Xf).call(a,t,n)};window.addEventListener("blur",g,{signal:p}),window.addEventListener("pointerup",g,{signal:p}),window.addEventListener("pointerdown",Pe,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Ie,{signal:p}),s.addEventListener("pointermove",i(e,this,qf).bind(this,t),{signal:p}),this._freeHighlight=new Gd({x:o,y:l},[c,h,d,f],t.scale,this._defaultThickness/2,n,.001);var y=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0);this._freeHighlightId=y.id,this._freeHighlightClipId=y.clipPathId}},{key:"deserialize",value:(n=o(C().m(function t(n,r,a){var s,o,l,u,c,d,v,p,g,y,m,w,b,k,_,A,x,S,E,M,R,T,I,L,F,N,W,B,j,z,U,H,G,V,q,X,Y,K,Q,J,Z,$,tt;return C().w(function(t){for(;;)switch(t.n){case 0:return s=null,n instanceof vh?(l=(o=n).data,u=l.quadPoints,c=l.rect,d=l.rotation,v=l.id,p=l.color,g=l.opacity,y=l.popupRef,m=o.parent.page.pageNumber,s=n={annotationType:mt.HIGHLIGHT,color:Array.from(p),opacity:g,quadPoints:u,boxes:null,pageIndex:m-1,rect:c.slice(0),rotation:d,id:v,deleted:!1,popupRef:y}):n instanceof dh&&(b=(w=n).data,k=b.inkLists,_=b.rect,A=b.rotation,x=b.id,S=b.color,E=b.borderStyle.rawWidth,M=b.popupRef,R=w.parent.page.pageNumber,s=n={annotationType:mt.HIGHLIGHT,color:Array.from(S),thickness:E,inkLists:k,boxes:null,pageIndex:R-1,rect:_.slice(0),rotation:A,id:x,deleted:!1,popupRef:M}),I=(T=n).color,L=T.quadPoints,F=T.inkLists,N=T.opacity,t.n=1,D(e,"deserialize",this,2)([n,r,a]);case 1:if((W=t.v).color=le.makeHexColor.apply(le,O(I)),f(Ef,W,N||1),F&&f(Rf,W,n.thickness),W.annotationElementId=n.id||null,W._initialData=s,B=P(W.pageDimensions,2),j=B[0],z=B[1],U=P(W.pageTranslation,2),H=U[0],G=U[1],L){for(V=f(pf,W,[]),q=0;q<L.length;q+=8)V.push({x:(L[q]-H)/j,y:1-(L[q+1]-G)/z,width:(L[q+2]-L[q])/j,height:(L[q+1]-L[q+5])/z});i(If,W,Df).call(W),i(If,W,Bf).call(W),W.rotate(W.rotation)}else if(F){for(f(xf,W,!0),X=F[0],Y={x:X[0]-H,y:z-(X[1]-G)},K=new Gd(Y,[0,0,j,z],1,h(Rf,W)/2,!0,.001),Q=0,J=X.length;Q<J;Q+=2)Y.x=X[Q]-H,Y.y=z-(X[Q+1]-G),K.add(Y);Z=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:W.color,"fill-opacity":W._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:K.toSVGPath()}},!0,!0),$=Z.id,tt=Z.clipPathId,i(If,W,Lf).call(W,{highlightOutlines:K.getOutlines(),highlightId:$,clipPathId:tt}),i(If,W,Bf).call(W),W.rotate(W.parentRotation)}return t.a(2,W)}},t,this)})),function(t,e,i){return n.apply(this,arguments)})},{key:"canCreateNewEmptyEditor",value:function(){return!1}}]);var n,r}(Jr);function Df(){var t=new Od(h(pf,this),.001);f(_f,this,t.getOutlines());var e=P(h(_f,this).box,4);this.x=e[0],this.y=e[1],this.width=e[2],this.height=e[3];var n=new Od(h(pf,this),.0025,.001,"ltr"===this._uiManager.direction);f(mf,this,n.getOutlines());var i=h(mf,this).lastPoint;f(Sf,this,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])}function Lf(t){var e=t.highlightOutlines,n=t.highlightId,i=t.clipPathId;f(_f,this,e);if(f(mf,this,e.getNewOutline(h(Rf,this)/2+1.5,.0025)),n>=0)f(Af,this,n),f(gf,this,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),f(Mf,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:h(mf,this).box,path:{d:h(mf,this).toSVGPath()}},!0));else if(this.parent){var r=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(h(Af,this),{bbox:jf.call(J,h(_f,this).box,(r-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(h(Mf,this),{bbox:jf.call(J,h(mf,this).box,r),path:{d:h(mf,this).toSVGPath()}})}var a=P(e.box,4),s=a[0],o=a[1],l=a[2],u=a[3];switch(this.rotation){case 0:this.x=s,this.y=o,this.width=l,this.height=u;break;case 90:var c=P(this.parentDimensions,2),d=c[0],v=c[1];this.x=o,this.y=1-s,this.width=l*v/d,this.height=u*d/v;break;case 180:this.x=1-s,this.y=1-o,this.width=l,this.height=u;break;case 270:var p=P(this.parentDimensions,2),g=p[0],y=p[1];this.x=1-o,this.y=s,this.width=l*y/g,this.height=u*g/y}var m=h(mf,this).lastPoint;f(Sf,this,[(m[0]-s)/l,(m[1]-o)/u])}function Of(t){var e=this,n=function(t,n){var i,r;e.color=t,f(Ef,e,n),null===(i=e.parent)||void 0===i||i.drawLayer.updateProperties(h(Af,e),{root:{fill:t,"fill-opacity":n}}),null===(r=h(yf,e))||void 0===r||r.updateColor(t)},i=this.color,r=h(Ef,this);this.addCommands({cmd:n.bind(this,t,J._defaultOpacity),undo:n.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}function Ff(t){var e=this,n=h(Rf,this),r=function(t){f(Rf,e,t),i(If,e,Nf).call(e,t)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}function Nf(t){if(h(xf,this)){i(If,this,Lf).call(this,{highlightOutlines:h(_f,this).getNewOutline(t/2)}),this.fixAndSetPosition();var e=P(this.parentDimensions,2),n=e[0],r=e[1];this.setDims(this.width*n,this.height*r)}}function Wf(){null!==h(Af,this)&&this.parent&&(this.parent.drawLayer.remove(h(Af,this)),f(Af,this,null),this.parent.drawLayer.remove(h(Mf,this)),f(Mf,this,null))}function Bf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;if(null===h(Af,this)){var e=t.drawLayer.draw({bbox:h(_f,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":h(Ef,this)},rootClass:{highlight:!0,free:h(xf,this)},path:{d:h(_f,this).toSVGPath()}},!1,!0);N(f,[Af,this])._=e.id,N(f,[gf,this])._=e.clipPathId,f(Mf,this,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:h(xf,this)},bbox:h(mf,this).box,path:{d:h(mf,this).toSVGPath()}},h(xf,this))),h(kf,this)&&(h(kf,this).style.clipPath=h(gf,this))}}function jf(t,e){var n=P(t,4),i=n[0],r=n[1],a=n[2],s=n[3];switch(e){case 90:return[1-r-s,i,s,a];case 180:return[1-i-a,1-r-s,a,s];case 270:return[r,1-i-a,s,a]}return[i,r,a,s]}function zf(t){J._keyboardManager.exec(this,t)}function Uf(t){if(h(ff,this)){var e=window.getSelection();t?e.setPosition(h(ff,this),h(vf,this)):e.setPosition(h(wf,this),h(bf,this))}}function Hf(){return h(xf,this)?this.rotation:0}function Gf(){if(h(xf,this))return null;var t,e=P(this.pageDimensions,2),n=e[0],i=e[1],r=P(this.pageTranslation,2),a=r[0],s=r[1],o=h(pf,this),l=new Float32Array(8*o.length),u=0,c=m(o);try{for(c.s();!(t=c.n()).done;){var d=t.value,f=d.x,v=d.y,p=d.width,g=d.height,y=f*n+a,w=(1-v)*i+s;l[u]=l[u+4]=y,l[u+1]=l[u+3]=w,l[u+2]=l[u+6]=y+p*n,l[u+5]=l[u+7]=w-g*i,u+=8}}catch(t){c.e(t)}finally{c.f()}return l}function Vf(t){return h(_f,this).serialize(t,i(If,this,Hf).call(this))}function qf(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function Xf(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function Yf(t){var e=this._initialData.color;return t.color.some(function(t,n){return t!==e[n]})}J=Pf,w(Pf,"_defaultColor",null),w(Pf,"_defaultOpacity",1),w(Pf,"_defaultThickness",12),w(Pf,"_type","highlight"),w(Pf,"_editorType",mt.HIGHLIGHT),w(Pf,"_freeHighlightId",-1),w(Pf,"_freeHighlight",null),w(Pf,"_freeHighlightClipId","");var Kf=new WeakMap,Qf=function(){return y(function t(){c(this,t),d(this,Kf,Object.create(null))},[{key:"updateProperty",value:function(t,e){this[t]=e,this.updateSVGProperty(t,e)}},{key:"updateProperties",value:function(t){if(t)for(var e=0,n=Object.entries(t);e<n.length;e++){var i=P(n[e],2),r=i[0],a=i[1];r.startsWith("_")||this.updateProperty(r,a)}}},{key:"updateSVGProperty",value:function(t,e){h(Kf,this)[t]=e}},{key:"toSVGProperties",value:function(){var t=h(Kf,this);return f(Kf,this,Object.create(null)),{root:t}}},{key:"reset",value:function(){f(Kf,this,Object.create(null))}},{key:"updateAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(t)}},{key:"clone",value:function(){qt("Not implemented")}}])}(),Jf=new WeakMap,Zf=new WeakMap,$f=new WeakSet,tv=function(t){function e(t){var n;return c(this,e),p(n=l(this,e,[t]),$f),d(n,Jf,null),d(n,Zf,void 0),w(n,"_drawId",null),f(Zf,n,t.mustBeCommitted||!1),n._addOutlines(t),n}return _(e,t),y(e,[{key:"_addOutlines",value:function(t){t.drawOutlines&&(i($f,this,ev).call(this,t),i($f,this,rv).call(this))}},{key:"updateParams",value:function(t,e){var n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}},{key:"propertiesToUpdate",get:function(){var t,e=[],n=this._drawingOptions,i=m(this.constructor.typesMap);try{for(i.s();!(t=i.n()).done;){var r=P(t.value,2),a=r[0],s=r[1];e.push([a,n[s]])}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"_updateProperty",value:function(t,e,n){var r=this,a=this._drawingOptions,s=a[e],o=function(t){var n;a.updateProperty(e,t);var s=h(Jf,r).updateProperty(e,t);s&&i($f,r,ov).call(r,s),null===(n=r.parent)||void 0===n||n.drawLayer.updateProperties(r._drawId,a.toSVGProperties())};this.addCommands({cmd:o.bind(this,n),undo:o.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}},{key:"_onResizing",value:function(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties(h(Jf,this).getPathResizingSVGProperties(i($f,this,sv).call(this)),{bbox:i($f,this,lv).call(this)}))}},{key:"_onResized",value:function(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties(h(Jf,this).getPathResizedSVGProperties(i($f,this,sv).call(this)),{bbox:i($f,this,lv).call(this)}))}},{key:"_onTranslating",value:function(t,e){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:i($f,this,lv).call(this)})}},{key:"_onTranslated",value:function(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties(h(Jf,this).getPathTranslatedSVGProperties(i($f,this,sv).call(this),this.parentDimensions),{bbox:i($f,this,lv).call(this)}))}},{key:"_onStartDragging",value:function(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}},{key:"_onStopDragging",value:function(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}},{key:"commit",value:function(){D(e,"commit",this,3)([]),this.disableEditMode(),this.disableEditing()}},{key:"disableEditing",value:function(){D(e,"disableEditing",this,3)([]),this.div.classList.toggle("disabled",!0)}},{key:"enableEditing",value:function(){D(e,"enableEditing",this,3)([]),this.div.classList.toggle("disabled",!1)}},{key:"getBaseTranslation",value:function(){return[0,0]}},{key:"isResizable",get:function(){return!0}},{key:"onceAdded",value:function(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,h(Zf,this)&&(f(Zf,this,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}},{key:"remove",value:function(){i($f,this,iv).call(this),D(e,"remove",this,3)([])}},{key:"rebuild",value:function(){this.parent&&(D(e,"rebuild",this,3)([]),null!==this.div&&(i($f,this,rv).call(this),i($f,this,ov).call(this,h(Jf,this).box),this.isAttachedToDOM||this.parent.add(this)))}},{key:"setParent",value:function(t){var n=!1;if(this.parent&&!t)this._uiManager.removeShouldRescale(this),i($f,this,iv).call(this);else if(t){var r;this._uiManager.addShouldRescale(this),i($f,this,rv).call(this,t),n=!this.parent&&(null===(r=this.div)||void 0===r?void 0:r.classList.contains("selectedEditor"))}D(e,"setParent",this,3)([t]),n&&this.select()}},{key:"rotate",value:function(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties({bbox:i($f,this,lv).call(this)},h(Jf,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}},{key:"onScaleChanging",value:function(){this.parent&&i($f,this,ov).call(this,h(Jf,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}},{key:"render",value:function(){if(this.div)return this.div;var t,n;this._isCopy&&(t=this.x,n=this.y);var i=D(e,"render",this,3)([]);i.classList.add("draw");var r=document.createElement("div");i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";var a=P(this.parentDimensions,2),s=a[0],o=a[1];return this.setDims(this.width*s,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),i}},{key:"createDrawingOptions",value:function(t){}},{key:"serializeDraw",value:function(t){var e=P(this.pageTranslation,2),n=e[0],i=e[1],r=P(this.pageDimensions,2),a=r[0],s=r[1];return h(Jf,this).serialize([n,i,a,s],t)}},{key:"renderAnnotationElement",value:function(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}],[{key:"_mergeSVGProperties",value:function(t,e){for(var n=new Set(Object.keys(t)),i=0,r=Object.entries(e);i<r.length;i++){var a=P(r[i],2),s=a[0],o=a[1];n.has(s)?Object.assign(t[s],o):t[s]=o}return t}},{key:"getDefaultDrawingOptions",value:function(t){qt("Not implemented")}},{key:"typesMap",get:function(){qt("Not implemented")}},{key:"isDrawer",get:function(){return!0}},{key:"supportMultipleDrawings",get:function(){return!1}},{key:"updateDefaultParams",value:function(t,e){var n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(uv._.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}},{key:"defaultPropertiesToUpdate",get:function(){var t,e=[],n=this._defaultDrawingOptions,i=m(this.typesMap);try{for(i.s();!(t=i.n()).done;){var r=P(t.value,2),a=r[0],s=r[1];e.push([a,n[s]])}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"onScaleChangingWhenDrawing",value:function(){}},{key:"createDrawerInstance",value:function(t,e,n,i,r){qt("Not implemented")}},{key:"startDrawing",value:function(t,e,n,i){var r,a,s=this,o=i.target,l=i.offsetX,u=i.offsetY,c=i.pointerId,h=i.pointerType;if(!fv._||fv._===h){var d=t.viewport.rotation,f=o.getBoundingClientRect(),v=f.width,p=f.height,g=cv._=new AbortController,y=t.combinedSignal(g);if(dv._||(dv._=c),null!==(r=fv._)&&void 0!==r||(fv._=h),window.addEventListener("pointerup",function(t){var e;dv._===t.pointerId?s._endDraw(t):null===(e=vv._)||void 0===e||e.delete(t.pointerId)},{signal:y}),window.addEventListener("pointercancel",function(t){var e;dv._===t.pointerId?s._currentParent.endDrawingSession():null===(e=vv._)||void 0===e||e.delete(t.pointerId)},{signal:y}),window.addEventListener("pointerdown",function(t){fv._===t.pointerType&&((vv._||(vv._=new Set)).add(t.pointerId),uv._.isCancellable()&&(uv._.removeLastElement(),uv._.isEmpty()?s._currentParent.endDrawingSession(!0):s._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Ie,{signal:y}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),o.addEventListener("touchmove",function(t){t.timeStamp===pv._&&Pe(t)},{signal:y}),t.toggleDrawing(),null===(a=e._editorUndoBar)||void 0===a||a.hide(),uv._)t.drawLayer.updateProperties(this._currentDrawId,uv._.startNew(l,u,v,p,d));else{e.updateUIForDefaultProperties(this),uv._=this.createDrawerInstance(l,u,v,p,d),hv._=this.getDefaultDrawingOptions(),this._currentParent=t;var m=t.drawLayer.draw(this._mergeSVGProperties(hv._.toSVGProperties(),uv._.defaultSVGProperties),!0,!1);this._currentDrawId=m.id}}}},{key:"_drawMove",value:function(t){var e;if(pv._=-1,uv._){var n=t.offsetX,i=t.offsetY,r=t.pointerId;dv._===r&&((null===(e=vv._)||void 0===e?void 0:e.size)>=1?this._endDraw(t):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,uv._.add(n,i)),pv._=t.timeStamp,Pe(t)))}}},{key:"_cleanup",value:function(t){t&&(this._currentDrawId=-1,this._currentParent=null,uv._=null,hv._=null,fv._=null,pv._=NaN),cv._&&(cv._.abort(),cv._=null,dv._=NaN,vv._=null)}},{key:"_endDraw",value:function(t){var e=this._currentParent;if(e)if(e.toggleDrawing(!0),this._cleanup(!1),(null==t?void 0:t.target)===e.div&&e.drawLayer.updateProperties(this._currentDrawId,uv._.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){var n=uv._,i=this._currentDrawId,r=n.getLastElement();e.addCommands({cmd:function(){e.drawLayer.updateProperties(i,n.setLastElement(r))},undo:function(){e.drawLayer.updateProperties(i,n.removeLastElement())},mustExec:!1,type:wt.DRAW_STEP})}else this.endDrawing(!1)}},{key:"endDrawing",value:function(t){var e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(wt.DRAW_STEP),!uv._.isEmpty()){var n=P(e.pageDimensions,2),i=n[0],r=n[1],a=e.scale,s=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:uv._.getOutlines(i*a,r*a,a,this._INNER_MARGIN),drawingOptions:hv._,mustBeCommitted:!t});return this._cleanup(!0),s}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}},{key:"deserializeDraw",value:function(t,e,n,i,r,a){qt("Not implemented")}},{key:"deserialize",value:(n=o(C().m(function t(n,r,a){var s,o,l,u,c,h,d;return C().w(function(t){for(;;)switch(t.n){case 0:return s=r.viewport.rawDims,o=s.pageWidth,l=s.pageHeight,u=s.pageX,c=s.pageY,h=this.deserializeDraw(u,c,o,l,this._INNER_MARGIN,n),t.n=1,D(e,"deserialize",this,2)([n,r,a]);case 1:return(d=t.v).createDrawingOptions(n),i($f,d,ev).call(d,{drawOutlines:h}),i($f,d,rv).call(d),d.onScaleChanging(),d.rotate(),t.a(2,d)}},t,this)})),function(t,e,i){return n.apply(this,arguments)})},{key:"canCreateNewEmptyEditor",value:function(){return!1}}]);var n}(Jr);function ev(t){var e=t.drawOutlines,n=t.drawId,r=t.drawingOptions;f(Jf,this,e),this._drawingOptions||(this._drawingOptions=r),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=i($f,this,nv).call(this,e,this.parent),i($f,this,ov).call(this,e.box)}function nv(t,e){return e.drawLayer.draw(Z._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1).id}function iv(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function rv(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===t||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=i($f,this,nv).call(this,h(Jf,this),t)):this.parent.drawLayer.updateParent(this._drawId,t.drawLayer))}function av(t){var e=P(t,4),n=e[0],i=e[1],r=e[2],a=e[3],s=P(this.parentDimensions,2),o=s[0],l=s[1];switch(this.rotation){case 90:return[i,1-n,r*(l/o),a*(o/l)];case 180:return[1-n,1-i,r,a];case 270:return[1-i,n,r*(l/o),a*(o/l)];default:return[n,i,r,a]}}function sv(){var t=this.x,e=this.y,n=this.width,i=this.height,r=P(this.parentDimensions,2),a=r[0],s=r[1];switch(this.rotation){case 90:return[1-e,t,n*(a/s),i*(s/a)];case 180:return[1-t,1-e,n,i];case 270:return[e,1-t,n*(a/s),i*(s/a)];default:return[t,e,n,i]}}function ov(t){var e=P(i($f,this,av).call(this,t),4);if(this.x=e[0],this.y=e[1],this.width=e[2],this.height=e[3],this.div){this.fixAndSetPosition();var n=P(this.parentDimensions,2),r=n[0],a=n[1];this.setDims(this.width*r,this.height*a)}this._onResized()}function lv(){var t=this.x,e=this.y,n=this.width,i=this.height,r=this.rotation,a=this.parentRotation,s=P(this.parentDimensions,2),o=s[0],l=s[1];switch((4*r+a)/90){case 1:return[1-e-i,t,i,n];case 2:return[1-t-n,1-e-i,n,i];case 3:return[e,1-t-n,i,n];case 4:return[t,e-n*(o/l),i*(l/o),n*(o/l)];case 5:return[1-e,t,n*(o/l),i*(l/o)];case 6:return[1-t-i*(l/o),1-e,i*(l/o),n*(o/l)];case 7:return[e-n*(o/l),1-t-i*(l/o),n*(o/l),i*(l/o)];case 8:return[t-n,e-i,n,i];case 9:return[1-e,t-n,i,n];case 10:return[1-t,1-e,n,i];case 11:return[e-i,1-t,i,n];case 12:return[t-i*(l/o),e,i*(l/o),n*(o/l)];case 13:return[1-e-n*(o/l),t-i*(l/o),n*(o/l),i*(l/o)];case 14:return[1-t,1-e-n*(o/l),i*(l/o),n*(o/l)];case 15:return[e,1-t,n*(o/l),i*(l/o)];default:return[t,e,n,i]}}Z=tv,w(tv,"_currentDrawId",-1),w(tv,"_currentParent",null);var uv={_:null},cv={_:null},hv={_:null},dv={_:NaN},fv={_:null},vv={_:null},pv={_:NaN};w(tv,"_INNER_MARGIN",3);var gv=new WeakMap,yv=new WeakMap,mv=new WeakMap,wv=new WeakMap,bv=new WeakMap,kv=new WeakMap,_v=new WeakMap,Av=new WeakMap,xv=new WeakMap,Sv=new WeakMap,Ev=new WeakMap,Mv=new WeakSet,Cv=function(){return y(function t(e,n,r,a,s,o){c(this,t),p(this,Mv),d(this,gv,new Float64Array(6)),d(this,yv,void 0),d(this,mv,void 0),d(this,wv,void 0),d(this,bv,void 0),d(this,kv,void 0),d(this,_v,""),d(this,Av,0),d(this,xv,new jv),d(this,Sv,void 0),d(this,Ev,void 0),f(Sv,this,r),f(Ev,this,a),f(wv,this,s),f(bv,this,o);var l=P(i(Mv,this,Rv).call(this,e,n),2);e=l[0],n=l[1];var u=f(yv,this,[NaN,NaN,NaN,NaN,e,n]);f(kv,this,[e,n]),f(mv,this,[{line:u,points:h(kv,this)}]),h(gv,this).set(u,0)},[{key:"updateProperty",value:function(t,e){"stroke-width"===t&&f(bv,this,e)}},{key:"isEmpty",value:function(){return!h(mv,this)||0===h(mv,this).length}},{key:"isCancellable",value:function(){return h(kv,this).length<=10}},{key:"add",value:function(t,e){var n,r=P(i(Mv,this,Rv).call(this,t,e),2);t=r[0],e=r[1];var a=P(h(gv,this).subarray(2,6),4),s=a[0],o=a[1],l=a[2],u=a[3],c=t-l,d=e-u;return Math.hypot(h(Sv,this)*c,h(Ev,this)*d)<=2?null:(h(kv,this).push(t,e),isNaN(s)?(h(gv,this).set([l,u,t,e],2),h(yv,this).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(h(gv,this)[0])&&h(yv,this).splice(6,6),h(gv,this).set([s,o,l,u,t,e],0),(n=h(yv,this)).push.apply(n,O(Kh.createBezierPoints(s,o,l,u,t,e))),{path:{d:this.toSVGPath()}}))}},{key:"end",value:function(t,e){var n=this.add(t,e);return n||(2===h(kv,this).length?{path:{d:this.toSVGPath()}}:null)}},{key:"startNew",value:function(t,e,n,r,a){f(Sv,this,n),f(Ev,this,r),f(wv,this,a);var s=P(i(Mv,this,Rv).call(this,t,e),2);t=s[0],e=s[1];var o=f(yv,this,[NaN,NaN,NaN,NaN,t,e]);f(kv,this,[t,e]);var l=h(mv,this).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),h(mv,this).push({line:o,points:h(kv,this)}),h(gv,this).set(o,0),f(Av,this,0),this.toSVGPath(),null}},{key:"getLastElement",value:function(){return h(mv,this).at(-1)}},{key:"setLastElement",value:function(t){return h(mv,this)?(h(mv,this).push(t),f(yv,this,t.line),f(kv,this,t.points),f(Av,this,0),{path:{d:this.toSVGPath()}}):h(xv,this).setLastElement(t)}},{key:"removeLastElement",value:function(){if(!h(mv,this))return h(xv,this).removeLastElement();h(mv,this).pop(),f(_v,this,"");for(var t=0,e=h(mv,this).length;t<e;t++){var n=h(mv,this)[t],i=n.line,r=n.points;f(yv,this,i),f(kv,this,r),f(Av,this,0),this.toSVGPath()}return{path:{d:h(_v,this)}}}},{key:"toSVGPath",value:function(){var t=Kh.svgRound(h(yv,this)[4]),e=Kh.svgRound(h(yv,this)[5]);if(2===h(kv,this).length)return f(_v,this,"".concat(h(_v,this)," M ").concat(t," ").concat(e," Z")),h(_v,this);if(h(kv,this).length<=6){var n=h(_v,this).lastIndexOf("M");f(_v,this,"".concat(h(_v,this).slice(0,n)," M ").concat(t," ").concat(e)),f(Av,this,6)}if(4===h(kv,this).length){var i=Kh.svgRound(h(yv,this)[10]),r=Kh.svgRound(h(yv,this)[11]);return f(_v,this,"".concat(h(_v,this)," L ").concat(i," ").concat(r)),f(Av,this,12),h(_v,this)}var a=[];0===h(Av,this)&&(a.push("M ".concat(t," ").concat(e)),f(Av,this,6));for(var s=h(Av,this),o=h(yv,this).length;s<o;s+=6){var l=P(h(yv,this).slice(s,s+6).map(Kh.svgRound),6),u=l[0],c=l[1],d=l[2],v=l[3],p=l[4],g=l[5];a.push("C".concat(u," ").concat(c," ").concat(d," ").concat(v," ").concat(p," ").concat(g))}return f(_v,this,h(_v,this)+a.join(" ")),f(Av,this,h(yv,this).length),h(_v,this)}},{key:"getOutlines",value:function(t,e,n,i){var r=h(mv,this).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),h(xv,this).build(h(mv,this),t,e,n,h(wv,this),h(bv,this),i),f(gv,this,null),f(yv,this,null),f(mv,this,null),f(_v,this,null),h(xv,this)}},{key:"defaultSVGProperties",get:function(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}])}();function Rv(t,e){return Kh._normalizePoint(t,e,h(Sv,this),h(Ev,this),h(wv,this))}var Tv=new WeakMap,Iv=new WeakMap,Pv=new WeakMap,Dv=new WeakMap,Lv=new WeakMap,Ov=new WeakMap,Fv=new WeakMap,Nv=new WeakMap,Wv=new WeakMap,Bv=new WeakSet,jv=function(t){function e(){var t;c(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return p(t=l(this,e,[].concat(i)),Bv),d(t,Tv,void 0),d(t,Iv,0),d(t,Pv,void 0),d(t,Dv,void 0),d(t,Lv,void 0),d(t,Ov,void 0),d(t,Fv,void 0),d(t,Nv,void 0),d(t,Wv,void 0),t}return _(e,t),y(e,[{key:"build",value:function(t,e,n,r,a,s,o){f(Lv,this,e),f(Ov,this,n),f(Fv,this,r),f(Nv,this,a),f(Wv,this,s),f(Pv,this,null!=o?o:0),f(Dv,this,t),i(Bv,this,Hv).call(this)}},{key:"thickness",get:function(){return h(Wv,this)}},{key:"setLastElement",value:function(t){return h(Dv,this).push(t),{path:{d:this.toSVGPath()}}}},{key:"removeLastElement",value:function(){return h(Dv,this).pop(),{path:{d:this.toSVGPath()}}}},{key:"toSVGPath",value:function(){var t,e=[],n=m(h(Dv,this));try{for(n.s();!(t=n.n()).done;){var i=t.value.line;if(e.push("M".concat(Kh.svgRound(i[4])," ").concat(Kh.svgRound(i[5]))),6!==i.length)if(12===i.length&&isNaN(i[6]))e.push("L".concat(Kh.svgRound(i[10])," ").concat(Kh.svgRound(i[11])));else for(var r=6,a=i.length;r<a;r+=6){var s=P(i.subarray(r,r+6).map(Kh.svgRound),6),o=s[0],l=s[1],u=s[2],c=s[3],d=s[4],f=s[5];e.push("C".concat(o," ").concat(l," ").concat(u," ").concat(c," ").concat(d," ").concat(f))}else e.push("Z")}}catch(t){n.e(t)}finally{n.f()}return e.join("")}},{key:"serialize",value:function(t,e){var n,r,a,s,o,l,u,c,d,f=P(t,4),v=f[0],p=f[1],g=f[2],y=f[3],w=[],b=[],k=P(i(Bv,this,Uv).call(this),4),_=k[0],A=k[1],x=k[2],S=k[3];switch(h(Nv,this)){case 0:d=Kh._rescale,n=v,r=p+y,a=g,s=-y,o=v+_*g,l=p+(1-A-S)*y,u=v+(_+x)*g,c=p+(1-A)*y;break;case 90:d=Kh._rescaleAndSwap,n=v,r=p,a=g,s=y,o=v+A*g,l=p+_*y,u=v+(A+S)*g,c=p+(_+x)*y;break;case 180:d=Kh._rescale,n=v+g,r=p,a=-g,s=y,o=v+(1-_-x)*g,l=p+A*y,u=v+(1-_)*g,c=p+(A+S)*y;break;case 270:d=Kh._rescaleAndSwap,n=v+g,r=p+y,a=-g,s=-y,o=v+(1-A-S)*g,l=p+(1-_-x)*y,u=v+(1-A)*g,c=p+(1-_)*y}var E,M=m(h(Dv,this));try{for(M.s();!(E=M.n()).done;){var C=E.value,R=C.line,T=C.points;w.push(d(R,n,r,a,s,e?new Array(R.length):null)),b.push(d(T,n,r,a,s,e?new Array(T.length):null))}}catch(t){M.e(t)}finally{M.f()}return{lines:w,points:b,rect:[o,l,u,c]}}},{key:"box",get:function(){return h(Tv,this)}},{key:"updateProperty",value:function(t,e){return"stroke-width"===t?i(Bv,this,Gv).call(this,e):null}},{key:"updateParentDimensions",value:function(t,e){var n=P(t,2),r=n[0],a=n[1],s=P(i(Bv,this,zv).call(this),2),o=s[0],l=s[1];f(Lv,this,r),f(Ov,this,a),f(Fv,this,e);var u=P(i(Bv,this,zv).call(this),2),c=u[0]-o,d=u[1]-l,v=h(Tv,this);return v[0]-=c,v[1]-=d,v[2]+=2*c,v[3]+=2*d,v}},{key:"updateRotation",value:function(t){return f(Iv,this,t),{path:{transform:this.rotationTransform}}}},{key:"viewBox",get:function(){return h(Tv,this).map(Kh.svgRound).join(" ")}},{key:"defaultProperties",get:function(){var t=P(h(Tv,this),2),e=t[0],n=t[1];return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Kh.svgRound(e)," ").concat(Kh.svgRound(n))}}}},{key:"rotationTransform",get:function(){var t=P(h(Tv,this),4),e=t[2],n=t[3],i=0,r=0,a=0,s=0,o=0,l=0;switch(h(Iv,this)){case 90:r=n/e,a=-e/n,o=e;break;case 180:i=-1,s=-1,o=e,l=n;break;case 270:r=-n/e,a=e/n,l=n;break;default:return""}return"matrix(".concat(i," ").concat(r," ").concat(a," ").concat(s," ").concat(Kh.svgRound(o)," ").concat(Kh.svgRound(l),")")}},{key:"getPathResizingSVGProperties",value:function(t){var e=P(t,4),n=e[0],r=e[1],a=e[2],s=e[3],o=P(i(Bv,this,zv).call(this),2),l=o[0],u=o[1],c=P(h(Tv,this),4),d=c[0],f=c[1],v=c[2],p=c[3];if(Math.abs(v-l)<=Kh.PRECISION||Math.abs(p-u)<=Kh.PRECISION){var g=n+a/2-(d+v/2),y=r+s/2-(f+p/2);return{path:{"transform-origin":"".concat(Kh.svgRound(n)," ").concat(Kh.svgRound(r)),transform:"".concat(this.rotationTransform," translate(").concat(g," ").concat(y,")")}}}var m=(a-2*l)/(v-2*l),w=(s-2*u)/(p-2*u),b=v/a,k=p/s;return{path:{"transform-origin":"".concat(Kh.svgRound(d)," ").concat(Kh.svgRound(f)),transform:"".concat(this.rotationTransform," scale(").concat(b," ").concat(k,") ")+"translate(".concat(Kh.svgRound(l)," ").concat(Kh.svgRound(u),") scale(").concat(m," ").concat(w,") ")+"translate(".concat(Kh.svgRound(-l)," ").concat(Kh.svgRound(-u),")")}}}},{key:"getPathResizedSVGProperties",value:function(t){var e=P(t,4),n=e[0],r=e[1],a=e[2],s=e[3],o=P(i(Bv,this,zv).call(this),2),l=o[0],u=o[1],c=h(Tv,this),d=P(c,4),f=d[0],v=d[1],p=d[2],g=d[3];if(c[0]=n,c[1]=r,c[2]=a,c[3]=s,Math.abs(p-l)<=Kh.PRECISION||Math.abs(g-u)<=Kh.PRECISION){var y,w=n+a/2-(f+p/2),b=r+s/2-(v+g/2),k=m(h(Dv,this));try{for(k.s();!(y=k.n()).done;){var _=y.value,A=_.line,x=_.points;Kh._translate(A,w,b,A),Kh._translate(x,w,b,x)}}catch(t){k.e(t)}finally{k.f()}return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Kh.svgRound(n)," ").concat(Kh.svgRound(r)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}var S=(a-2*l)/(p-2*l),E=(s-2*u)/(g-2*u),M=-S*(f+l)+n+l,C=-E*(v+u)+r+u;if(1!==S||1!==E||0!==M||0!==C){var R,T=m(h(Dv,this));try{for(T.s();!(R=T.n()).done;){var I=R.value,D=I.line,L=I.points;Kh._rescale(D,M,C,S,E,D),Kh._rescale(L,M,C,S,E,L)}}catch(t){T.e(t)}finally{T.f()}}return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Kh.svgRound(n)," ").concat(Kh.svgRound(r)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}},{key:"getPathTranslatedSVGProperties",value:function(t,e){var n=P(t,2),i=n[0],r=n[1],a=P(e,2),s=a[0],o=a[1],l=h(Tv,this),u=i-l[0],c=r-l[1];if(h(Lv,this)===s&&h(Ov,this)===o){var d,v=m(h(Dv,this));try{for(v.s();!(d=v.n()).done;){var p=d.value,g=p.line,y=p.points;Kh._translate(g,u,c,g),Kh._translate(y,u,c,y)}}catch(t){v.e(t)}finally{v.f()}}else{var w=h(Lv,this)/s,b=h(Ov,this)/o;f(Lv,this,s),f(Ov,this,o);var k,_=m(h(Dv,this));try{for(_.s();!(k=_.n()).done;){var A=k.value,x=A.line,S=A.points;Kh._rescale(x,u,c,w,b,x),Kh._rescale(S,u,c,w,b,S)}}catch(t){_.e(t)}finally{_.f()}l[2]*=w,l[3]*=b}return l[0]=i,l[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(Kh.svgRound(i)," ").concat(Kh.svgRound(r))}}}},{key:"defaultSVGProperties",get:function(){var t=h(Tv,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(Kh.svgRound(t[0])," ").concat(Kh.svgRound(t[1])),transform:this.rotationTransform||null},bbox:t}}}],[{key:"deserialize",value:function(t,e,n,i,r,a){var s,o,l,u,c,h=a.paths,d=h.lines,f=h.points,v=a.rotation,p=a.thickness,g=[];switch(v){case 0:c=Kh._rescale,s=-t/n,o=e/i+1,l=1/n,u=-1/i;break;case 90:c=Kh._rescaleAndSwap,s=-e/i,o=-t/n,l=1/i,u=1/n;break;case 180:c=Kh._rescale,s=t/n+1,o=-e/i,l=-1/n,u=1/i;break;case 270:c=Kh._rescaleAndSwap,s=e/i+1,o=t/n+1,l=-1/i,u=-1/n}if(!d){d=[];var y,w=m(f);try{for(w.s();!(y=w.n()).done;){var b=y.value,k=b.length;if(2!==k)if(4!==k){var _=new Float32Array(3*(k-2));d.push(_);var A=P(b.subarray(0,4),4),x=A[0],S=A[1],E=A[2],M=A[3];_.set([NaN,NaN,NaN,NaN,x,S],0);for(var C=4;C<k;C+=2){var R=b[C],T=b[C+1];_.set(Kh.createBezierPoints(x,S,E,M,R,T),3*(C-2));var I=[E,M,R,T];x=I[0],S=I[1],E=I[2],M=I[3]}}else d.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));else d.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]))}}catch(t){w.e(t)}finally{w.f()}}for(var D=0,L=d.length;D<L;D++)g.push({line:c(d[D].map(function(t){return null!=t?t:NaN}),s,o,l,u),points:c(f[D].map(function(t){return null!=t?t:NaN}),s,o,l,u)});var O=new this.prototype.constructor;return O.build(g,n,i,1,v,p,r),O}}])}(Kh);function zv(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h(Wv,this),e=h(Pv,this)+t/2*h(Fv,this);return h(Nv,this)%180==0?[e/h(Lv,this),e/h(Ov,this)]:[e/h(Ov,this),e/h(Lv,this)]}function Uv(){var t=P(h(Tv,this),4),e=t[0],n=t[1],r=t[2],a=t[3],s=P(i(Bv,this,zv).call(this,0),2),o=s[0],l=s[1];return[e+o,n+l,r-2*o,a-2*l]}function Hv(){var t,e=f(Tv,this,new Float32Array([1/0,1/0,-1/0,-1/0])),n=m(h(Dv,this));try{for(n.s();!(t=n.n()).done;){var r=t.value.line;if(r.length<=12)for(var a=4,s=r.length;a<s;a+=6)le.pointBoundingBox(r[a],r[a+1],e);else for(var o=r[4],l=r[5],u=6,c=r.length;u<c;u+=6){var d=P(r.subarray(u,u+6),6),v=d[0],p=d[1],g=d[2],y=d[3],w=d[4],b=d[5];le.bezierBoundingBox(o,l,v,p,g,y,w,b,e),o=w,l=b}}}catch(t){n.e(t)}finally{n.f()}var k=P(i(Bv,this,zv).call(this),2),_=k[0],A=k[1];e[0]=ge(e[0]-_,0,1),e[1]=ge(e[1]-A,0,1),e[2]=ge(e[2]+_,0,1),e[3]=ge(e[3]+A,0,1),e[2]-=e[0],e[3]-=e[1]}function Gv(t){var e=P(i(Bv,this,zv).call(this),2),n=e[0],r=e[1];f(Wv,this,t);var a=P(i(Bv,this,zv).call(this),2),s=a[0]-n,o=a[1]-r,l=h(Tv,this);return l[0]-=s,l[1]-=o,l[2]+=2*s,l[3]+=2*o,l}var Vv=function(t){function e(t){var n;return c(this,e),(n=l(this,e))._viewParameters=t,D(e,"updateProperties",n,3)([{fill:"none",stroke:Jr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10}]),n}return _(e,t),y(e,[{key:"updateSVGProperty",value:function(t,n){"stroke-width"===t&&(null!=n||(n=this["stroke-width"]),n*=this._viewParameters.realScale),D(e,"updateSVGProperty",this,3)([t,n])}},{key:"clone",value:function(){var t=new e(this._viewParameters);return t.updateAll(this),t}}])}(Qf),qv=new WeakSet,Xv=function(t){function e(t){var n;return c(this,e),p(n=l(this,e,[M(M({},t),{},{name:"inkEditor"})]),qv),n._willKeepAspectRatio=!0,n.defaultL10nId="pdfjs-editor-ink-editor",n}return _(e,t),y(e,[{key:"onScaleChanging",value:function(){if(this.parent){D(e,"onScaleChanging",this,3)([]);var t=this._drawId,n=this._drawingOptions,i=this.parent;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}}},{key:"createDrawingOptions",value:function(t){var n=t.color,i=t.thickness,r=t.opacity;this._drawingOptions=e.getDefaultDrawingOptions({stroke:le.makeHexColor.apply(le,O(n)),"stroke-width":i,"stroke-opacity":r})}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();var e=this.serializeDraw(t),n=e.lines,r=e.points,a=e.rect,s=this._drawingOptions,o=s.stroke,l=s["stroke-opacity"],u=s["stroke-width"],c={annotationType:mt.INK,color:Jr._colorManager.convert(o),opacity:l,thickness:u,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(c.isCopy=!0,c):this.annotationElementId&&!i(qv,this,Yv).call(this,c)?null:(c.id=this.annotationElementId,c)}},{key:"renderAnnotationElement",value:function(t){var e=this.serializeDraw(!1),n=e.points,i=e.rect;return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n}),null}}],[{key:"initialize",value:function(t,e){Jr.initialize(t,e),this._defaultDrawingOptions=new Vv(e.viewParameters)}},{key:"getDefaultDrawingOptions",value:function(t){var e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}},{key:"supportMultipleDrawings",get:function(){return!0}},{key:"typesMap",get:function(){return Qt(this,"typesMap",new Map([[wt.INK_THICKNESS,"stroke-width"],[wt.INK_COLOR,"stroke"],[wt.INK_OPACITY,"stroke-opacity"]]))}},{key:"createDrawerInstance",value:function(t,e,n,i,r){return new Cv(t,e,n,i,r,this._defaultDrawingOptions["stroke-width"])}},{key:"deserializeDraw",value:function(t,e,n,i,r,a){return jv.deserialize(t,e,n,i,r,a)}},{key:"deserialize",value:(n=o(C().m(function t(n,i,r){var a,s,o,l,u,c,h,d,f,v,p,g,y;return C().w(function(t){for(;;)switch(t.n){case 0:return a=null,n instanceof dh&&(o=(s=n).data,l=o.inkLists,u=o.rect,c=o.rotation,h=o.id,d=o.color,f=o.opacity,v=o.borderStyle.rawWidth,p=o.popupRef,g=s.parent.page.pageNumber,a=n={annotationType:mt.INK,color:Array.from(d),thickness:v,opacity:f,paths:{points:l},boxes:null,pageIndex:g-1,rect:u.slice(0),rotation:c,id:h,deleted:!1,popupRef:p}),t.n=1,D(e,"deserialize",this,2)([n,i,r]);case 1:return(y=t.v).annotationElementId=n.id||null,y._initialData=a,t.a(2,y)}},t,this)})),function(t,e,i){return n.apply(this,arguments)})},{key:"onScaleChangingWhenDrawing",value:function(){var t=this._currentParent;t&&(D(e,"onScaleChangingWhenDrawing",this,2)([]),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}}]);var n}(tv);function Yv(t){var e=this._initialData,n=e.color,i=e.thickness,r=e.opacity,a=e.pageIndex;return this._hasBeenMoved||this._hasBeenResized||t.color.some(function(t,e){return t!==n[e]})||t.thickness!==i||t.opacity!==r||t.pageIndex!==a}w(Xv,"_type","ink"),w(Xv,"_editorType",mt.INK),w(Xv,"_defaultDrawingOptions",null);var Kv=function(t){function e(){return c(this,e),l(this,e,arguments)}return _(e,t),y(e,[{key:"toSVGPath",value:function(){var t=D(e,"toSVGPath",this,3)([]);return t.endsWith("Z")||(t+="Z"),t}}])}(jv),Qv=function(){function t(){c(this,t)}return y(t,null,[{key:"extractContoursFromText",value:function(e,n,r,a,s,o){var l=n.fontFamily,u=n.fontStyle,c=n.fontWeight,h=new OffscreenCanvas(1,1),d=h.getContext("2d",{alpha:!1}),f=d.font="".concat(u," ").concat(c," ").concat(200,"px ").concat(l),v=d.measureText(e),p=v.actualBoundingBoxLeft,g=v.actualBoundingBoxRight,y=v.actualBoundingBoxAscent,m=v.actualBoundingBoxDescent,w=v.fontBoundingBoxAscent,b=v.fontBoundingBoxDescent,k=v.width,_=1.5,A=Math.ceil(Math.max(Math.abs(p)+Math.abs(g)||0,k)*_),x=Math.ceil(Math.max(Math.abs(y)+Math.abs(m)||200,Math.abs(w)+Math.abs(b)||200)*_);(d=(h=new OffscreenCanvas(A,x)).getContext("2d",{alpha:!0,willReadFrequently:!0})).font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,A,x),d.fillStyle="black",d.fillText(e,.5*A/2,1.5*x/2);var S=i(t,this,ap).call(this,d.getImageData(0,0,A,x).data),E=i(t,this,rp).call(this,S),M=i(t,this,sp).call(this,E),C=i(t,this,tp).call(this,S,A,x,M);return this.processDrawnLines({lines:{curves:C,width:A,height:x},pageWidth:r,pageHeight:a,rotation:s,innerMargin:o,mustSmooth:!0,areContours:!0})}},{key:"process",value:function(e,n,r,a,s){var o=P(i(t,this,op).call(this,e),3),l=o[0],u=o[1],c=o[2],h=P(i(t,this,ip).call(this,l,u,c,Math.hypot(u,c)*i(t,this,lp)._.sigmaSFactor,i(t,this,lp)._.sigmaR,i(t,this,lp)._.kernelSize),2),d=h[0],f=h[1],v=i(t,this,sp).call(this,f),p=i(t,this,tp).call(this,d,u,c,v);return this.processDrawnLines({lines:{curves:p,width:u,height:c},pageWidth:n,pageHeight:r,rotation:a,innerMargin:s,mustSmooth:!0,areContours:!0})}},{key:"processDrawnLines",value:function(e){var n,r=e.lines,a=e.pageWidth,s=e.pageHeight,o=e.rotation,l=e.innerMargin,u=e.mustSmooth,c=e.areContours;if(o%180!=0){var h=[s,a];a=h[0],s=h[1]}var d,f=r.curves,v=r.width,p=r.height,g=null!==(n=r.thickness)&&void 0!==n?n:0,y=[],w=Math.min(a/v,s/p),b=w/a,k=w/s,_=[],A=m(f);try{for(A.s();!(d=A.n()).done;){var x=d.value.points,S=u?i(t,this,np).call(this,x):x;if(S){_.push(S);var E=S.length,M=new Float32Array(E),C=new Float32Array(3*(2===E?2:E-2));if(y.push({line:C,points:M}),2!==E){var R=P(S,4),T=R[0],I=R[1],D=R[2],L=R[3];T*=b,I*=k,D*=b,L*=k,M.set([T,I,D,L],0),C.set([NaN,NaN,NaN,NaN,T,I],0);for(var O=4;O<E;O+=2){var F=M[O]=S[O]*b,N=M[O+1]=S[O+1]*k;C.set(Kh.createBezierPoints(T,I,D,L,F,N),3*(O-2));var W=[D,L,F,N];T=W[0],I=W[1],D=W[2],L=W[3]}}else M[0]=S[0]*b,M[1]=S[1]*k,C.set([NaN,NaN,NaN,NaN,M[0],M[1]],0)}}}catch(t){A.e(t)}finally{A.f()}if(0===y.length)return null;var B=c?new Kv:new jv;return B.build(y,a,s,1,o,c?0:g,l),{outline:B,newCurves:_,areContours:c,thickness:g,width:v,height:p}}},{key:"compressSignature",value:(n=o(C().m(function t(e){var n,i,r,a,s,o,l,u,c,h,d,f,v,p,g,y,w,b,k,_,A,x,S,E,M,R,T,I,P,D,L,O,F;return C().w(function(t){for(;;)switch(t.n){case 0:n=e.outlines,i=e.areContours,r=e.thickness,a=e.width,s=e.height,o=1/0,l=-1/0,u=0,c=m(n);try{for(c.s();!(h=c.n()).done;)for(d=h.value,u+=d.length,f=2,v=d.length;f<v;f++)p=d[f]-d[f-2],o=Math.min(o,p),l=Math.max(l,p)}catch(t){c.e(t)}finally{c.f()}g=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array,y=n.length,w=8+3*y,b=new Uint32Array(w),k=0,b[k++]=w*Uint32Array.BYTES_PER_ELEMENT+(u-2*y)*g.BYTES_PER_ELEMENT,b[k++]=0,b[k++]=a,b[k++]=s,b[k++]=i?0:1,b[k++]=Math.max(0,Math.floor(null!=r?r:0)),b[k++]=y,b[k++]=g.BYTES_PER_ELEMENT,_=m(n);try{for(_.s();!(A=_.n()).done;)x=A.value,b[k++]=x.length-2,b[k++]=x[0],b[k++]=x[1]}catch(t){_.e(t)}finally{_.f()}return S=new CompressionStream("deflate-raw"),E=S.writable.getWriter(),t.n=1,E.ready;case 1:E.write(b),M=g.prototype.constructor,R=m(n);try{for(R.s();!(T=R.n()).done;){for(I=T.value,P=new M(I.length-2),D=2,L=I.length;D<L;D++)P[D-2]=I[D]-I[D-2];E.write(P)}}catch(t){R.e(t)}finally{R.f()}return E.close(),t.n=2,new Response(S.readable).arrayBuffer();case 2:return O=t.v,F=new Uint8Array(O),t.a(2,ye(F))}},t)})),function(t){return n.apply(this,arguments)})},{key:"decompressSignature",value:(e=o(C().m(function t(e){var n,i,a,s,l,u,c,h,d,f,v,p,g,y,m,w,b,k,_,A,x,S,E,M,R,T,I,P,D,L,O,F;return C().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,n=me(e),i=new DecompressionStream("deflate-raw"),a=i.readable,s=i.writable,l=s.getWriter(),t.n=1,l.ready;case 1:l.write(n).then(o(C().m(function t(){return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,l.ready;case 1:return t.n=2,l.close();case 2:return t.a(2)}},t)}))).catch(function(){}),u=null,c=0,h=!1,d=!1,t.p=2,v=r(a);case 3:return t.n=4,v.next();case 4:if(!(h=!(p=t.v).done)){t.n=6;break}g=p.value,u||(u=new Uint8Array(new Uint32Array(g.buffer,0,4)[0])),u.set(g,c),c+=g.length;case 5:h=!1,t.n=3;break;case 6:t.n=8;break;case 7:t.p=7,L=t.v,d=!0,f=L;case 8:if(t.p=8,t.p=9,!h||null==v.return){t.n=10;break}return t.n=10,v.return();case 10:if(t.p=10,!d){t.n=11;break}throw f;case 11:return t.f(10);case 12:return t.f(8);case 13:if(y=new Uint32Array(u.buffer,0,u.length>>2),0===(m=y[1])){t.n=14;break}throw new Error("Invalid version: ".concat(m));case 14:w=y[2],b=y[3],k=0===y[4],_=y[5],A=y[6],x=y[7],S=[],E=(8+3*A)*Uint32Array.BYTES_PER_ELEMENT,O=x,t.n=O===Int8Array.BYTES_PER_ELEMENT?15:O===Int16Array.BYTES_PER_ELEMENT?16:O===Int32Array.BYTES_PER_ELEMENT?17:18;break;case 15:return M=new Int8Array(u.buffer,E),t.a(3,18);case 16:return M=new Int16Array(u.buffer,E),t.a(3,18);case 17:return M=new Int32Array(u.buffer,E),t.a(3,18);case 18:for(c=0,R=0;R<A;R++){for(T=y[3*R+8],I=new Float32Array(T+2),S.push(I),P=0;P<2;P++)I[P]=y[3*R+8+P+1];for(D=0;D<T;D++)I[D+2]=I[D]+M[c++]}return t.a(2,{areContours:k,thickness:_,outlines:S,width:w,height:b});case 19:return t.p=19,F=t.v,Vt("decompressSignature: ".concat(F)),t.a(2,null)}},t,null,[[9,,10,12],[2,7,8,13],[0,19]])})),function(t){return e.apply(this,arguments)})}]);var e,n}();function Jv(t,e,n,i){return i-=e,0===(n-=t)?i>0?0:4:1===n?i+6:2-i}function Zv(t,e,n,r,a,s,o){for(var l=i($,this,Jv).call(this,n,r,a,s),u=0;u<8;u++){var c=(-u+l-o+16)%8;if(0!==t[(n+i($,this,up)._[2*c])*e+(r+i($,this,up)._[2*c+1])])return c}return-1}function $v(t,e,n,r,a,s,o){for(var l=i($,this,Jv).call(this,n,r,a,s),u=0;u<8;u++){var c=(u+l+o+16)%8;if(0!==t[(n+i($,this,up)._[2*c])*e+(r+i($,this,up)._[2*c+1])])return c}return-1}function tp(t,e,n,r){for(var a=t.length,s=new Int32Array(a),o=0;o<a;o++)s[o]=t[o]<=r?1:0;for(var l=1;l<n-1;l++)s[l*e]=s[l*e+e-1]=0;for(var u=0;u<e;u++)s[u]=s[e*n-1-u]=0;for(var c,h=1,d=[],f=1;f<n-1;f++){c=1;for(var v=1;v<e-1;v++){var p=f*e+v,g=s[p];if(0!==g){var y=f,w=v;if(1===g&&0===s[p-1])h+=1,w-=1;else{if(!(g>=1&&0===s[p+1])){1!==g&&(c=Math.abs(g));continue}h+=1,w+=1,g>1&&(c=g)}var b=[v,f],k=w===v+1,_={isHole:k,points:b,id:h,parent:0};d.push(_);var A,x=void 0,S=m(d);try{for(S.s();!(A=S.n()).done;){var E=A.value;if(E.id===c){x=E;break}}}catch(t){S.e(t)}finally{S.f()}x?x.isHole?_.parent=k?x.parent:c:_.parent=k?c:x.parent:_.parent=k?c:0;var M=i($,this,Zv).call(this,s,e,f,v,y,w,0);if(-1!==M){var C=i($,this,up)._[2*M],R=i($,this,up)._[2*M+1],T=f+C,I=v+R;y=T,w=I;for(var P=f,D=v;;){var L=i($,this,$v).call(this,s,e,P,D,y,w,1),O=P+(C=i($,this,up)._[2*L]),F=D+(R=i($,this,up)._[2*L+1]);b.push(F,O);var N=P*e+D;if(0===s[N+1]?s[N]=-h:1===s[N]&&(s[N]=h),O===f&&F===v&&P===T&&D===I){1!==s[p]&&(c=Math.abs(s[p]));break}y=P,w=D,P=O,D=F}}else s[p]=-h,1!==s[p]&&(c=Math.abs(s[p]))}}}return d}function ep(t,e,n,r){if(n-e<=4)for(var a=e;a<n-2;a+=2)r.push(t[a],t[a+1]);else{for(var s=t[e],o=t[e+1],l=t[n-4]-s,u=t[n-3]-o,c=Math.hypot(l,u),h=l/c,d=u/c,f=h*o-d*s,v=u/l,p=1/c,g=Math.atan(v),y=Math.cos(g),m=Math.sin(g),w=p*(Math.abs(y)+Math.abs(m)),b=p*(1-w+Math.pow(w,2)),k=Math.max(Math.atan(Math.abs(m+y)*b),Math.atan(Math.abs(m-y)*b)),_=0,A=e,x=e+2;x<n-2;x+=2){var S=Math.abs(f-h*t[x+1]+d*t[x]);S>_&&(A=x,_=S)}_>Math.pow(c*k,2)?(i($,this,ep).call(this,t,e,A+2,r),i($,this,ep).call(this,t,A,n,r)):r.push(s,o)}}function np(t){var e=[],n=t.length;return i($,this,ep).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}function ip(t,e,n,i,r,a){for(var s=new Float32Array(Math.pow(a,2)),o=-2*Math.pow(i,2),l=a>>1,u=0;u<a;u++)for(var c=Math.pow(u-l,2),h=0;h<a;h++)s[u*a+h]=Math.exp((c+Math.pow(h-l,2))/o);for(var d=new Float32Array(256),f=-2*Math.pow(r,2),v=0;v<256;v++)d[v]=Math.exp(Math.pow(v,2)/f);for(var p=t.length,g=new Uint8Array(p),y=new Uint32Array(256),m=0;m<n;m++)for(var w=0;w<e;w++){for(var b=m*e+w,k=t[b],_=0,A=0,x=0;x<a;x++){var S=m+x-l;if(!(S<0||S>=n))for(var E=0;E<a;E++){var M=w+E-l;if(!(M<0||M>=e)){var C=t[S*e+M],R=s[x*a+E]*d[Math.abs(C-k)];_+=C*R,A+=R}}}y[g[b]=Math.round(_/A)]++}return[g,y]}function rp(t){var e,n=new Uint32Array(256),i=m(t);try{for(i.s();!(e=i.n()).done;){n[e.value]++}}catch(t){i.e(t)}finally{i.f()}return n}function ap(t){for(var e=t.length,n=new Uint8ClampedArray(e>>2),i=-1/0,r=1/0,a=0,s=n.length;a<s;a++){if(0!==t[3+(a<<2)]){var o=n[a]=t[a<<2];o>i&&(i=o),o<r&&(r=o)}else i=n[a]=255}for(var l=255/(i-r),u=0;u<e;u++)n[u]=(n[u]-r)*l;return n}function sp(t){var e,n=-1/0,i=-1/0,r=t.findIndex(function(t){return 0!==t}),a=r,s=r;for(e=r;e<256;e++){var o=t[e];o>n&&(e-a>i&&(i=e-a,s=e-1),n=o,a=e)}for(e=s-1;e>=0&&!(t[e]>t[e+1]);e--);return e}function op(t){var e=t,n=t,r=n.width,a=n.height,s=i($,this,lp)._.maxDim,o=r,l=a;if(r>s||a>s){var u=r,c=a,h=Math.log2(Math.max(r,a)/s),d=Math.floor(h);h=h===d?d-1:d;for(var f=0;f<h;f++){o=Math.ceil(u/2),l=Math.ceil(c/2);var v=new OffscreenCanvas(o,l);v.getContext("2d").drawImage(t,0,0,u,c,0,0,o,l),u=o,c=l,t!==e&&t.close(),t=v.transferToImageBitmap()}var p=Math.min(s/o,s/l);o=Math.round(o*p),l=Math.round(l*p)}var g=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});g.filter="grayscale(1)",g.drawImage(t,0,0,t.width,t.height,0,0,o,l);var y=g.getImageData(0,0,o,l).data;return[i($,this,ap).call(this,y),o,l]}$=Qv;var lp={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},up={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])},cp=function(t){function e(){var t;return c(this,e),D(e,"updateProperties",t=l(this,e),3)([{fill:Jr._defaultLineColor,"stroke-width":0}]),t}return _(e,t),y(e,[{key:"clone",value:function(){var t=new e;return t.updateAll(this),t}}])}(Qf),hp=function(t){function e(t){var n;return c(this,e),D(e,"updateProperties",n=l(this,e,[t]),3)([{stroke:Jr._defaultLineColor,"stroke-width":1}]),n}return _(e,t),y(e,[{key:"clone",value:function(){var t=new e(this._viewParameters);return t.updateAll(this),t}}])}(Vv),dp=new WeakMap,fp=new WeakMap,vp=new WeakMap,pp=new WeakMap,gp=function(t){function e(t){var n;return c(this,e),d(n=l(this,e,[M(M({},t),{},{mustBeCommitted:!0,name:"signatureEditor"})]),dp,!1),d(n,fp,null),d(n,vp,null),d(n,pp,null),n._willKeepAspectRatio=!0,f(vp,n,t.signatureData||null),f(fp,n,null),n.defaultL10nId="pdfjs-editor-signature-editor1",n}return _(e,t),y(e,[{key:"telemetryFinalData",get:function(){return{type:"signature",hasDescription:!!h(fp,this)}}},{key:"isResizable",get:function(){return!0}},{key:"onScaleChanging",value:function(){null!==this._drawId&&D(e,"onScaleChanging",this,3)([])}},{key:"render",value:function(){if(this.div)return this.div;var t,n,i=this._isCopy;if(i&&(this._isCopy=!1,t=this.x,n=this.y),D(e,"render",this,3)([]),null===this._drawId)if(h(vp,this)){var r=h(vp,this),a=r.lines,s=r.mustSmooth,o=r.areContours,l=r.description,u=r.uuid,c=r.heightInPage,d=this.parent.viewport,f=d.rawDims,v=f.pageWidth,p=f.pageHeight,g=d.rotation,y=Qv.processDrawnLines({lines:a,pageWidth:v,pageHeight:p,rotation:g,innerMargin:e._INNER_MARGIN,mustSmooth:s,areContours:o});this.addSignature(y,c,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}},{key:"setUuid",value:function(t){f(pp,this,t),this.addEditToolbar()}},{key:"getUuid",value:function(){return h(pp,this)}},{key:"description",get:function(){return h(fp,this)},set:function(t){f(fp,this,t),D(e,"addEditToolbar",this,3)([]).then(function(e){null==e||e.updateEditSignatureButton(t)})}},{key:"getSignaturePreview",value:function(){var t=h(vp,this),e=t.newCurves,n=t.areContours,i=t.thickness,r=t.width,a=t.height,s=Math.max(r,a);return{areContours:n,outline:Qv.processDrawnLines({lines:{curves:e.map(function(t){return{points:t}}),thickness:i,width:r,height:a},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n}).outline}}},{key:"addEditToolbar",value:(i=o(C().m(function t(){var n;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,D(e,"addEditToolbar",this,3)([]);case 1:if(n=t.v){t.n=2;break}return t.a(2,null);case 2:if(!this._uiManager.signatureManager||null===h(fp,this)){t.n=4;break}return t.n=3,n.addEditSignatureButton(this._uiManager.signatureManager,h(pp,this),h(fp,this));case 3:n.show();case 4:return t.a(2,n)}},t,this)})),function(){return i.apply(this,arguments)})},{key:"addSignature",value:function(t,n,i,r){var a,s=this.x,o=this.y,l=f(vp,this,t).outline;f(dp,this,l instanceof Kv),f(fp,this,i),this.div.setAttribute("data-l10n-args",JSON.stringify({description:i})),h(dp,this)?a=e.getDefaultDrawingOptions():(a=e._defaultDrawnSignatureOptions.clone()).updateProperties({"stroke-width":l.thickness}),this._addOutlines({drawOutlines:l,drawingOptions:a});var u=P(this.parentDimensions,2),c=u[0],d=u[1],v=n/P(this.pageDimensions,2)[1];v=v>=1?.5:v,this.width*=v/this.height,this.width>=1&&(v*=.9/this.width,this.width=.9),this.height=v,this.setDims(c*this.width,d*this.height),this.x=s,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}},{key:"getFromImage",value:function(t){var n=this.parent.viewport,i=n.rawDims,r=i.pageWidth,a=i.pageHeight,s=n.rotation;return Qv.process(t,r,a,s,e._INNER_MARGIN)}},{key:"getFromText",value:function(t,n){var i=this.parent.viewport,r=i.rawDims,a=r.pageWidth,s=r.pageHeight,o=i.rotation;return Qv.extractContoursFromText(t,n,a,s,o,e._INNER_MARGIN)}},{key:"getDrawnSignature",value:function(t){var n=this.parent.viewport,i=n.rawDims,r=i.pageWidth,a=i.pageHeight,s=n.rotation;return Qv.processDrawnLines({lines:t,pageWidth:r,pageHeight:a,rotation:s,innerMargin:e._INNER_MARGIN,mustSmooth:!1,areContours:!1})}},{key:"createDrawingOptions",value:function(t){var n=t.areContours,i=t.thickness;n?this._drawingOptions=e.getDefaultDrawingOptions():(this._drawingOptions=e._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;var e=this.serializeDraw(t),n=e.lines,i=e.points,r=e.rect,a=this._drawingOptions["stroke-width"],s={annotationType:mt.SIGNATURE,isSignature:!0,areContours:h(dp,this),color:[0,0,0],thickness:h(dp,this)?0:a,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(s.paths={lines:n,points:i},s.uuid=h(pp,this),s.isCopy=!0):s.lines=n,h(fp,this)&&(s.accessibilityData={type:"Figure",alt:h(fp,this)}),s}}],[{key:"initialize",value:function(t,e){Jr.initialize(t,e),this._defaultDrawingOptions=new cp,this._defaultDrawnSignatureOptions=new hp(e.viewParameters)}},{key:"getDefaultDrawingOptions",value:function(t){var e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}},{key:"supportMultipleDrawings",get:function(){return!1}},{key:"typesMap",get:function(){return Qt(this,"typesMap",new Map)}},{key:"isDrawer",get:function(){return!1}},{key:"computeTelemetryFinalData",value:function(t){var e,n,i=t.get("hasDescription");return{hasAltText:null!==(e=i.get(!0))&&void 0!==e?e:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}},{key:"deserializeDraw",value:function(t,e,n,i,r,a){return a.areContours?Kv.deserialize(t,e,n,i,r,a):jv.deserialize(t,e,n,i,r,a)}},{key:"deserialize",value:(n=o(C().m(function t(n,i,r){var a,s;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,D(e,"deserialize",this,2)([n,i,r]);case 1:return s=t.v,f(dp,s,n.areContours),f(fp,s,(null===(a=n.accessibilityData)||void 0===a?void 0:a.alt)||""),f(pp,s,n.uuid),t.a(2,s)}},t,this)})),function(t,e,i){return n.apply(this,arguments)})}]);var n,i}(tv);w(gp,"_type","signature"),w(gp,"_editorType",mt.SIGNATURE),w(gp,"_defaultDrawingOptions",null);var yp=new WeakMap,mp=new WeakMap,wp=new WeakMap,bp=new WeakMap,kp=new WeakMap,_p=new WeakMap,Ap=new WeakMap,xp=new WeakMap,Sp=new WeakMap,Ep=new WeakMap,Mp=new WeakMap,Cp=new WeakSet,Rp=function(t){function e(t){var n;return c(this,e),p(n=l(this,e,[M(M({},t),{},{name:"stampEditor"})]),Cp),d(n,yp,null),d(n,mp,null),d(n,wp,null),d(n,bp,null),d(n,kp,null),d(n,_p,""),d(n,Ap,null),d(n,xp,!1),d(n,Sp,null),d(n,Ep,!1),d(n,Mp,!1),f(bp,n,t.bitmapUrl),f(kp,n,t.bitmapFile),n.defaultL10nId="pdfjs-editor-stamp-editor",n}return _(e,t),y(e,[{key:"altTextFinish",value:function(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),D(e,"altTextFinish",this,3)([])}},{key:"telemetryFinalData",get:function(){var t;return{type:"stamp",hasAltText:!(null===(t=this.altTextData)||void 0===t||!t.altText)}}},{key:"mlGuessAltText",value:(r=o(C().m(function t(){var e,n,i,r,a,s,o,l,u,c=arguments;return C().w(function(t){for(;;)switch(t.n){case 0:if(e=c.length>0&&void 0!==c[0]?c[0]:null,n=!(c.length>1&&void 0!==c[1])||c[1],!this.hasAltTextData()){t.n=1;break}return t.a(2,null);case 1:if(i=this._uiManager.mlManager){t.n=2;break}throw new Error("No ML.");case 2:return t.n=3,i.isEnabledFor("altText");case 3:if(t.v){t.n=4;break}throw new Error("ML isn't enabled for alt text.");case 4:return r=e||this.copyCanvas(null,null,!0).imageData,a=r.data,s=r.width,o=r.height,t.n=5,i.guess({name:"altText",request:{data:a,width:s,height:o,channels:a.length/(s*o)}});case 5:if(l=t.v){t.n=6;break}throw new Error("No response from the AI service.");case 6:if(!l.error){t.n=7;break}throw new Error("Error from the AI service.");case 7:if(!l.cancel){t.n=8;break}return t.a(2,null);case 8:if(l.output){t.n=9;break}throw new Error("No valid response from the AI service.");case 9:return u=l.output,t.n=10,this.setGuessedAltText(u);case 10:return n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),t.a(2,u)}},t,this)})),function(){return r.apply(this,arguments)})},{key:"remove",value:function(){var t;h(mp,this)&&(f(yp,this,null),this._uiManager.imageManager.deleteId(h(mp,this)),null===(t=h(Ap,this))||void 0===t||t.remove(),f(Ap,this,null),h(Sp,this)&&(clearTimeout(h(Sp,this)),f(Sp,this,null)));D(e,"remove",this,3)([])}},{key:"rebuild",value:function(){this.parent?(D(e,"rebuild",this,3)([]),null!==this.div&&(h(mp,this)&&null===h(Ap,this)&&i(Cp,this,Pp).call(this),this.isAttachedToDOM||this.parent.add(this))):h(mp,this)&&i(Cp,this,Pp).call(this)}},{key:"onceAdded",value:function(t){this._isDraggable=!0,t&&this.div.focus()}},{key:"isEmpty",value:function(){return!(h(wp,this)||h(yp,this)||h(bp,this)||h(kp,this)||h(mp,this)||h(xp,this))}},{key:"isResizable",get:function(){return!0}},{key:"render",value:function(){return this.div||(this._isCopy&&(t=this.x,n=this.y),D(e,"render",this,3)([]),this.div.hidden=!0,this.addAltTextButton(),h(xp,this)||(h(yp,this)?i(Cp,this,Dp).call(this):i(Cp,this,Pp).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this)),this.div;var t,n}},{key:"setCanvas",value:function(t,e){var n=this._uiManager.imageManager.getFromCanvas(t,e),r=n.id,a=n.bitmap;e.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(f(mp,this,r),a&&f(yp,this,a),f(xp,this,!1),i(Cp,this,Dp).call(this))}},{key:"_onResized",value:function(){this.onScaleChanging()}},{key:"onScaleChanging",value:function(){var t=this;if(this.parent){null!==h(Sp,this)&&clearTimeout(h(Sp,this));f(Sp,this,setTimeout(function(){f(Sp,t,null),i(Cp,t,Op).call(t)},200))}}},{key:"copyCanvas",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t||(t=224);var r=h(yp,this),a=r.width,s=r.height,o=new je,l=h(yp,this),u=a,c=s,d=null;if(e){var f,v;if(a>e||s>e){var p=Math.min(e/a,e/s);u=Math.floor(a*p),c=Math.floor(s*p)}var g=(d=document.createElement("canvas")).width=Math.ceil(u*o.sx),y=d.height=Math.ceil(c*o.sy);h(Ep,this)||(l=i(Cp,this,Lp).call(this,g,y));var m=d.getContext("2d");m.filter=this._uiManager.hcmFilter;var w="white",b="#cfcfd8";"none"!==this._uiManager.hcmFilter?b="black":null!==(f=(v=window).matchMedia)&&void 0!==f&&f.call(v,"(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",b="#42414d");var k=15*o.sx,_=15*o.sy,A=new OffscreenCanvas(2*k,2*_),x=A.getContext("2d");x.fillStyle=w,x.fillRect(0,0,2*k,2*_),x.fillStyle=b,x.fillRect(0,0,k,_),x.fillRect(k,_,k,_),m.fillStyle=m.createPattern(A,"repeat"),m.fillRect(0,0,g,y),m.drawImage(l,0,0,l.width,l.height,0,0,g,y)}var S=null;if(n){var E,M;if(o.symmetric&&l.width<t&&l.height<t)E=l.width,M=l.height;else if(l=h(yp,this),a>t||s>t){var C=Math.min(t/a,t/s);E=Math.floor(a*C),M=Math.floor(s*C),h(Ep,this)||(l=i(Cp,this,Lp).call(this,E,M))}var R=new OffscreenCanvas(E,M).getContext("2d",{willReadFrequently:!0});R.drawImage(l,0,0,l.width,l.height,0,0,E,M),S={width:E,height:M,data:R.getImageData(0,0,E,M).data}}return{canvas:d,width:u,height:c,imageData:S}}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();var n={annotationType:mt.STAMP,bitmapId:h(mp,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:h(Ep,this),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=i(Cp,this,Fp).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;var r=this.serializeAltText(!1),a=r.decorative,s=r.altText;if(!a&&s&&(n.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){var o,l=i(Cp,this,Np).call(this,n);if(l.isSame)return null;if(l.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(o=this._initialData.structParent)&&void 0!==o?o:-1}if(n.id=this.annotationElementId,null===e)return n;e.stamps||(e.stamps=new Map);var u=h(Ep,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(e.stamps.has(h(mp,this))){if(h(Ep,this)){var c=e.stamps.get(h(mp,this));u>c.area&&(c.area=u,c.serialized.bitmap.close(),c.serialized.bitmap=i(Cp,this,Fp).call(this,!1))}}else e.stamps.set(h(mp,this),{area:u,serialized:n}),n.bitmap=i(Cp,this,Fp).call(this,!1);return n}},{key:"renderAnnotationElement",value:function(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}],[{key:"initialize",value:function(t,e){Jr.initialize(t,e)}},{key:"isHandlingMimeForPasting",value:function(t){return ze.includes(t)}},{key:"paste",value:function(t,e){e.pasteEditor({mode:mt.STAMP},{bitmapFile:t.getAsFile()})}},{key:"computeTelemetryFinalData",value:function(t){var e,n,i=t.get("hasAltText");return{hasAltText:null!==(e=i.get(!0))&&void 0!==e?e:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}},{key:"deserialize",value:(n=o(C().m(function t(n,i,r){var a,s,o,l,u,c,h,d,v,p,g,y,m,w,b,k,_,A,x,S,E,M,R,T,I,L,O,F,N,W,B,j;return C().w(function(t){for(;;)switch(t.n){case 0:if(a=null,s=!1,!(n instanceof mh)){t.n=6;break}return u=(l=n).data,c=u.rect,h=u.rotation,d=u.id,v=u.structParent,p=u.popupRef,g=l.container,y=l.parent.page.pageNumber,(m=l.canvas)?(delete n.canvas,k=r.imageManager.getFromCanvas(g.id,m),w=k.id,b=k.bitmap,m.remove()):(s=!0,n._hasNoCanvas=!0),t.n=1,i._structTree.getAriaAttributes("".concat(pe).concat(d));case 1:if(B=o=t.v,W=null===B){t.n=2;break}W=void 0===o;case 2:if(!W){t.n=3;break}j=void 0,t.n=4;break;case 3:j=o.get("aria-label");case 4:if(N=j){t.n=5;break}N="";case 5:_=N,a=n={annotationType:mt.STAMP,bitmapId:w,bitmap:b,pageIndex:y-1,rect:c.slice(0),rotation:h,id:d,deleted:!1,accessibilityData:{decorative:!1,altText:_},isSvg:!1,structParent:v,popupRef:p};case 6:return t.n=7,D(e,"deserialize",this,2)([n,i,r]);case 7:return A=t.v,S=(x=n).rect,E=x.bitmap,M=x.bitmapUrl,R=x.bitmapId,T=x.isSvg,I=x.accessibilityData,s?(r.addMissingCanvas(n.id,A),f(xp,A,!0)):R&&r.imageManager.isValidId(R)?(f(mp,A,R),E&&f(yp,A,E)):f(bp,A,M),f(Ep,A,T),L=P(A.pageDimensions,2),O=L[0],F=L[1],A.width=(S[2]-S[0])/O,A.height=(S[3]-S[1])/F,A.annotationElementId=n.id||null,I&&(A.altTextData=I),A._initialData=a,f(Mp,A,!!a),t.a(2,A)}},t,this)})),function(t,e,i){return n.apply(this,arguments)})}]);var n,r}(Jr);function Tp(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(f(yp,this,t.bitmap),e||(f(mp,this,t.id),f(Ep,this,t.isSvg)),t.file&&f(_p,this,t.file.name),i(Cp,this,Dp).call(this)):this.remove()}function Ip(){if(f(wp,this,null),this._uiManager.enableWaiting(!1),h(Ap,this)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&h(yp,this))return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&h(yp,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(t){}}this.div.focus()}}function Pp(){var t=this;if(h(mp,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(h(mp,this)).then(function(e){return i(Cp,t,Tp).call(t,e,!0)}).finally(function(){return i(Cp,t,Ip).call(t)});if(h(bp,this)){var e=h(bp,this);return f(bp,this,null),this._uiManager.enableWaiting(!0),void f(wp,this,this._uiManager.imageManager.getFromUrl(e).then(function(e){return i(Cp,t,Tp).call(t,e)}).finally(function(){return i(Cp,t,Ip).call(t)}))}if(h(kp,this)){var n=h(kp,this);return f(kp,this,null),this._uiManager.enableWaiting(!0),void f(wp,this,this._uiManager.imageManager.getFromFile(n).then(function(e){return i(Cp,t,Tp).call(t,e)}).finally(function(){return i(Cp,t,Ip).call(t)}))}var r=document.createElement("input");r.type="file",r.accept=ze.join(",");var a=this._uiManager._signal;f(wp,this,new Promise(function(e){r.addEventListener("change",o(C().m(function n(){var a;return C().w(function(n){for(;;)switch(n.n){case 0:if(r.files&&0!==r.files.length){n.n=1;break}t.remove(),n.n=3;break;case 1:return t._uiManager.enableWaiting(!0),n.n=2,t._uiManager.imageManager.getFromFile(r.files[0]);case 2:a=n.v,t._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:t._uiManager.useNewAltTextFlow}}),i(Cp,t,Tp).call(t,a);case 3:e();case 4:return n.a(2)}},n)})),{signal:a}),r.addEventListener("cancel",function(){t.remove(),e()},{signal:a})}).finally(function(){return i(Cp,t,Ip).call(t)})),r.click()}function Dp(){var t,e=this.div,n=h(yp,this),r=n.width,a=n.height,s=P(this.pageDimensions,2),o=s[0],l=s[1],u=.75;if(this.width)r=this.width*o,a=this.height*l;else if(r>u*o||a>u*l){var c=Math.min(u*o/r,u*l/a);r*=c,a*=c}var d=P(this.parentDimensions,2),v=d[0],p=d[1];this.setDims(r*v/o,a*p/l),this._uiManager.enableWaiting(!1);var g=f(Ap,this,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),this.width=r/o,this.height=a/l,null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(e.hidden=!1),i(Cp,this,Op).call(this),h(Mp,this)||(this.parent.addUndoableEditor(this),f(Mp,this,!0)),this._reportTelemetry({action:"inserted_image"}),h(_p,this)&&this.div.setAttribute("aria-description",h(_p,this))}function Lp(t,e){for(var n=h(yp,this),i=n.width,r=n.height,a=h(yp,this);i>2*t||r>2*e;){var s=i,o=r;i>2*t&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));var l=new OffscreenCanvas(i,r);l.getContext("2d").drawImage(a,0,0,s,o,0,0,i,r),a=l.transferToImageBitmap()}return a}function Op(){var t=P(this.parentDimensions,2),e=t[0],n=t[1],r=this.width,a=this.height,s=new je,o=Math.ceil(r*e*s.sx),l=Math.ceil(a*n*s.sy),u=h(Ap,this);if(u&&(u.width!==o||u.height!==l)){u.width=o,u.height=l;var c=h(Ep,this)?h(yp,this):i(Cp,this,Lp).call(this,o,l),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(c,0,0,c.width,c.height,0,0,o,l)}}function Fp(t){if(t){if(h(Ep,this)){var e=this._uiManager.imageManager.getSvgUrl(h(mp,this));if(e)return e}var n=document.createElement("canvas"),i=h(yp,this);return n.width=i.width,n.height=i.height,n.getContext("2d").drawImage(h(yp,this),0,0),n.toDataURL()}if(h(Ep,this)){var r=P(this.pageDimensions,2),a=r[0],s=r[1],o=Math.round(this.width*a*be.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*be.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,l);return u.getContext("2d").drawImage(h(yp,this),0,0,h(yp,this).width,h(yp,this).height,0,0,o,l),u.transferToImageBitmap()}return nt.exports.cloneDeep(h(yp,this))}function Np(t){var e,n=this._initialData,i=n.pageIndex,r=n.accessibilityData.altText,a=t.pageIndex===i,s=((null===(e=t.accessibilityData)||void 0===e?void 0:e.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&s,isSameAltText:s}}w(Rp,"_type","stamp"),w(Rp,"_editorType",mt.STAMP);var Wp=new WeakMap,Bp=new WeakMap,jp=new WeakMap,zp=new WeakMap,Up=new WeakMap,Hp=new WeakMap,Gp=new WeakMap,Vp=new WeakMap,qp=new WeakMap,Xp=new WeakMap,Yp=new WeakMap,Kp=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,Zp=new WeakSet,$p=function(){return y(function t(e){var n=e.uiManager,i=e.pageIndex,r=e.div,a=e.structTreeLayer,s=e.accessibilityManager,o=e.annotationLayer,l=e.drawLayer,u=e.textLayer,v=e.viewport,g=e.l10n;c(this,t),p(this,Zp),d(this,Wp,void 0),d(this,Bp,!1),d(this,jp,null),d(this,zp,null),d(this,Up,null),d(this,Hp,new Map),d(this,Gp,!1),d(this,Vp,!1),d(this,qp,!1),d(this,Xp,null),d(this,Yp,null),d(this,Kp,null),d(this,Qp,null),d(this,Jp,void 0);var y=O(ag._.values());if(!t._initialized){t._initialized=!0;var w,b=m(y);try{for(b.s();!(w=b.n()).done;){w.value.initialize(g,n)}}catch(t){b.e(t)}finally{b.f()}}n.registerEditorTypes(y),f(Jp,this,n),this.pageIndex=i,this.div=r,f(Wp,this,s),f(jp,this,o),this.viewport=v,f(Kp,this,u),this.drawLayer=l,this._structTree=a,h(Jp,this).addLayer(this)},[{key:"isEmpty",get:function(){return 0===h(Hp,this).size}},{key:"isInvisible",get:function(){return this.isEmpty&&h(Jp,this).getMode()===mt.NONE}},{key:"updateToolbar",value:function(t){h(Jp,this).updateToolbar(t)}},{key:"updateMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h(Jp,this).getMode();switch(i(Zp,this,rg).call(this),t){case mt.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case mt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);var e,n=this.div.classList,r=m(ag._.values());try{for(r.s();!(e=r.n()).done;){var a=e.value;n.toggle("".concat(a._type,"Editing"),t===a._editorType)}}catch(t){r.e(t)}finally{r.f()}this.div.hidden=!1}},{key:"hasTextLayer",value:function(t){var e;return t===(null===(e=h(Kp,this))||void 0===e?void 0:e.div)}},{key:"setEditingState",value:function(t){h(Jp,this).setEditingState(t)}},{key:"addCommands",value:function(t){h(Jp,this).addCommands(t)}},{key:"cleanUndoStack",value:function(t){h(Jp,this).cleanUndoStack(t)}},{key:"toggleDrawing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!t)}},{key:"togglePointerEvents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!t)}},{key:"toggleAnnotationLayerPointerEvents",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(t=h(jp,this))||void 0===t||t.div.classList.toggle("disabled",!e)}},{key:"enable",value:(n=o(C().m(function t(){var e,n,i,r,a,s,o,l,u,c;return C().w(function(t){for(;;)switch(t.p=t.n){case 0:f(qp,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),e=new Set,n=m(h(Hp,this).values());try{for(n.s();!(i=n.n()).done;)(r=i.value).enableEditing(),r.show(!0),r.annotationElementId&&(h(Jp,this).removeChangedExistingAnnotation(r),e.add(r.annotationElementId))}catch(t){n.e(t)}finally{n.f()}if(h(jp,this)){t.n=1;break}return f(qp,this,!1),t.a(2);case 1:a=h(jp,this).getEditableAnnotations(),s=m(a),t.p=2,s.s();case 3:if((o=s.n()).done){t.n=9;break}if((l=o.value).hide(),!h(Jp,this).isDeletedAnnotationElement(l.data.id)){t.n=4;break}return t.a(3,8);case 4:if(!e.has(l.data.id)){t.n=5;break}return t.a(3,8);case 5:return t.n=6,this.deserialize(l);case 6:if(u=t.v){t.n=7;break}return t.a(3,8);case 7:this.addOrRebuild(u),u.enableEditing();case 8:t.n=3;break;case 9:t.n=11;break;case 10:t.p=10,c=t.v,s.e(c);case 11:return t.p=11,s.f(),t.f(11);case 12:f(qp,this,!1);case 13:return t.a(2)}},t,this,[[2,10,11,12]])})),function(){return n.apply(this,arguments)})},{key:"disable",value:function(){f(Vp,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);var t,e=new Map,n=new Map,r=m(h(Hp,this).values());try{for(r.s();!(t=r.n()).done;){var a,s=t.value;s.disableEditing(),s.annotationElementId&&(null===s.serialize()?(n.set(s.annotationElementId,s),null===(a=this.getEditableAnnotation(s.annotationElementId))||void 0===a||a.show(),s.remove()):e.set(s.annotationElementId,s))}}catch(t){r.e(t)}finally{r.f()}if(h(jp,this)){var o,l=m(h(jp,this).getEditableAnnotations());try{for(l.s();!(o=l.n()).done;){var u=o.value,c=u.data.id;if(!h(Jp,this).isDeletedAnnotationElement(c)){var d=n.get(c);d?(d.resetAnnotationElement(u),d.show(!1),u.show()):((d=e.get(c))&&(h(Jp,this).addChangedExistingAnnotation(d),d.renderAnnotationElement(u)&&d.show(!1)),u.show())}}}catch(t){l.e(t)}finally{l.f()}}i(Zp,this,rg).call(this),this.isEmpty&&(this.div.hidden=!0);var v,p=this.div.classList,g=m(ag._.values());try{for(g.s();!(v=g.n()).done;){var y=v.value;p.remove("".concat(y._type,"Editing"))}}catch(t){g.e(t)}finally{g.f()}this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),f(Vp,this,!1)}},{key:"getEditableAnnotation",value:function(t){var e;return(null===(e=h(jp,this))||void 0===e?void 0:e.getEditableAnnotation(t))||null}},{key:"setActiveEditor",value:function(t){h(Jp,this).getActive()!==t&&h(Jp,this).setActiveEditor(t)}},{key:"enableTextSelection",value:function(){var t;if(this.div.tabIndex=-1,null!==(t=h(Kp,this))&&void 0!==t&&t.div&&!h(Qp,this)){f(Qp,this,new AbortController);var e=h(Jp,this).combinedSignal(h(Qp,this));h(Kp,this).div.addEventListener("pointerdown",i(Zp,this,tg).bind(this),{signal:e}),h(Kp,this).div.classList.add("highlighting")}}},{key:"disableTextSelection",value:function(){var t;this.div.tabIndex=0,null!==(t=h(Kp,this))&&void 0!==t&&t.div&&h(Qp,this)&&(h(Qp,this).abort(),f(Qp,this,null),h(Kp,this).div.classList.remove("highlighting"))}},{key:"enableClick",value:function(){if(!h(zp,this)){f(zp,this,new AbortController);var t=h(Jp,this).combinedSignal(h(zp,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});var e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}}},{key:"disableClick",value:function(){var t;null===(t=h(zp,this))||void 0===t||t.abort(),f(zp,this,null)}},{key:"attach",value:function(t){h(Hp,this).set(t.id,t);var e=t.annotationElementId;e&&h(Jp,this).isDeletedAnnotationElement(e)&&h(Jp,this).removeDeletedAnnotationElement(t)}},{key:"detach",value:function(t){var e;h(Hp,this).delete(t.id),null===(e=h(Wp,this))||void 0===e||e.removePointerInTextLayer(t.contentDiv),!h(Vp,this)&&t.annotationElementId&&h(Jp,this).addDeletedAnnotationElement(t)}},{key:"remove",value:function(t){this.detach(t),h(Jp,this).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}},{key:"changeParent",value:function(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(h(Jp,this).addDeletedAnnotationElement(t.annotationElementId),Jr.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),null===(e=t.parent)||void 0===e||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}},{key:"add",value:function(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),h(Jp,this).addEditor(t),this.attach(t),!t.isAttachedToDOM){var e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!h(qp,this)),h(Jp,this).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}},{key:"moveEditorInDOM",value:function(t){var e,n=this;if(t.isAttachedToDOM){var i=document.activeElement;t.div.contains(i)&&!h(Up,this)&&(t._focusEventsAllowed=!1,f(Up,this,setTimeout(function(){f(Up,n,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",function(){t._focusEventsAllowed=!0},{once:!0,signal:h(Jp,n)._signal}),i.focus())},0))),t._structTreeParentId=null===(e=h(Wp,this))||void 0===e?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}}},{key:"addOrRebuild",value:function(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}},{key:"addUndoableEditor",value:function(t){this.addCommands({cmd:function(){return t._uiManager.rebuild(t)},undo:function(){t.remove()},mustExec:!1})}},{key:"getNextId",value:function(){return h(Jp,this).getId()}},{key:"combinedSignal",value:function(t){return h(Jp,this).combinedSignal(t)}},{key:"canCreateNewEmptyEditor",value:function(){var t;return null===(t=v(Zp,this,eg))||void 0===t?void 0:t.canCreateNewEmptyEditor()}},{key:"pasteEditor",value:(e=o(C().m(function t(e,n){var r,a,s,o,l;return C().w(function(t){for(;;)switch(t.n){case 0:return this.updateToolbar(e),t.n=1,h(Jp,this).updateMode(e.mode);case 1:r=i(Zp,this,ig).call(this),a=r.offsetX,s=r.offsetY,o=this.getNextId(),(l=i(Zp,this,ng).call(this,M({parent:this,id:o,x:a,y:s,uiManager:h(Jp,this),isCentered:!0},n)))&&this.add(l);case 2:return t.a(2)}},t,this)})),function(t,n){return e.apply(this,arguments)})},{key:"deserialize",value:(t=o(C().m(function t(e){var n,i,r;return C().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,null===(n=ag._.get(null!==(i=e.annotationType)&&void 0!==i?i:e.annotationEditorType))||void 0===n?void 0:n.deserialize(e,this,h(Jp,this));case 1:if(r=t.v){t.n=2;break}r=null;case 2:return t.a(2,r)}},t,this)})),function(e){return t.apply(this,arguments)})},{key:"createAndAddNewEditor",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getNextId(),a=i(Zp,this,ng).call(this,M({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:h(Jp,this),isCentered:e},n));return a&&this.add(a),a}},{key:"addNewEditor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(i(Zp,this,ig).call(this),!0,t)}},{key:"setSelected",value:function(t){h(Jp,this).setSelected(t)}},{key:"toggleSelected",value:function(t){h(Jp,this).toggleSelected(t)}},{key:"unselect",value:function(t){h(Jp,this).unselect(t)}},{key:"pointerup",value:function(t){var e,n=se.platform.isMac;if(!(0!==t.button||t.ctrlKey&&n)&&t.target===this.div&&h(Gp,this)&&(f(Gp,this,!1),null===(e=v(Zp,this,eg))||void 0===e||!e.isDrawer||!v(Zp,this,eg).supportMultipleDrawings))if(h(Bp,this)){var i=h(Jp,this).getMode();i!==mt.STAMP&&i!==mt.SIGNATURE?this.createAndAddNewEditor(t,!1):h(Jp,this).unselectAll()}else f(Bp,this,!0)}},{key:"pointerdown",value:function(t){var e;if(h(Jp,this).getMode()===mt.HIGHLIGHT&&this.enableTextSelection(),h(Gp,this))f(Gp,this,!1);else{var n=se.platform.isMac;if(!(0!==t.button||t.ctrlKey&&n)&&t.target===this.div)if(f(Gp,this,!0),null!==(e=v(Zp,this,eg))&&void 0!==e&&e.isDrawer)this.startDrawingSession(t);else{var i=h(Jp,this).getActive();f(Bp,this,!i||i.isEmpty())}}}},{key:"startDrawingSession",value:function(t){var e=this;if(this.div.focus({preventScroll:!0}),h(Xp,this))v(Zp,this,eg).startDrawing(this,h(Jp,this),!1,t);else{h(Jp,this).setCurrentDrawingSession(this),f(Xp,this,new AbortController);var n=h(Jp,this).combinedSignal(h(Xp,this));this.div.addEventListener("blur",function(t){var n=t.relatedTarget;n&&!e.div.contains(n)&&(f(Yp,e,null),e.commitOrRemove())},{signal:n}),v(Zp,this,eg).startDrawing(this,h(Jp,this),!1,t)}}},{key:"pause",value:function(t){var e=this;if(t){var n=document.activeElement;this.div.contains(n)&&f(Yp,this,n)}else h(Yp,this)&&setTimeout(function(){var t;null===(t=h(Yp,e))||void 0===t||t.focus(),f(Yp,e,null)},0)}},{key:"endDrawingSession",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return h(Xp,this)?(h(Jp,this).setCurrentDrawingSession(null),h(Xp,this).abort(),f(Xp,this,null),f(Yp,this,null),v(Zp,this,eg).endDrawing(t)):null}},{key:"findNewParent",value:function(t,e,n){var i=h(Jp,this).findParent(e,n);return null!==i&&i!==this&&(i.changeParent(t),!0)}},{key:"commitOrRemove",value:function(){return!!h(Xp,this)&&(this.endDrawingSession(),!0)}},{key:"onScaleChanging",value:function(){h(Xp,this)&&v(Zp,this,eg).onScaleChangingWhenDrawing(this)}},{key:"destroy",value:function(){var t;this.commitOrRemove(),(null===(t=h(Jp,this).getActive())||void 0===t?void 0:t.parent)===this&&(h(Jp,this).commitOrRemove(),h(Jp,this).setActiveEditor(null)),h(Up,this)&&(clearTimeout(h(Up,this)),f(Up,this,null));var e,n=m(h(Hp,this).values());try{for(n.s();!(e=n.n()).done;){var i,r=e.value;null===(i=h(Wp,this))||void 0===i||i.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove()}}catch(t){n.e(t)}finally{n.f()}this.div=null,h(Hp,this).clear(),h(Jp,this).removeLayer(this)}},{key:"render",value:function(t){var e=t.viewport;this.viewport=e,Be(this.div,e);var n,i=m(h(Jp,this).getEditors(this.pageIndex));try{for(i.s();!(n=i.n()).done;){var r=n.value;this.add(r),r.rebuild()}}catch(t){i.e(t)}finally{i.f()}this.updateMode()}},{key:"update",value:function(t){var e=t.viewport;h(Jp,this).commitOrRemove(),i(Zp,this,rg).call(this);var n=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Be(this.div,{rotation:r}),n!==r){var a,s=m(h(Hp,this).values());try{for(s.s();!(a=s.n()).done;){a.value.rotate(r)}}catch(t){s.e(t)}finally{s.f()}}}},{key:"pageDimensions",get:function(){var t=this.viewport.rawDims;return[t.pageWidth,t.pageHeight]}},{key:"scale",get:function(){return h(Jp,this).viewParameters.realScale}}]);var t,e,n}();function tg(t){var e=this;h(Jp,this).unselectAll();var n=t.target;if(n===h(Kp,this).div||("img"===n.getAttribute("role")||n.classList.contains("endOfContent"))&&h(Kp,this).div.contains(n)){var i=se.platform.isMac;if(0!==t.button||t.ctrlKey&&i)return;h(Jp,this).showAllEditors("highlight",!0,!0),h(Kp,this).div.classList.add("free"),this.toggleDrawing(),Pf.startHighlighting(this,"ltr"===h(Jp,this).direction,{target:h(Kp,this).div,x:t.x,y:t.y}),h(Kp,this).div.addEventListener("pointerup",function(){h(Kp,e).div.classList.remove("free"),e.toggleDrawing(!0)},{once:!0,signal:h(Jp,this)._signal}),t.preventDefault()}}function eg(t){return ag._.get(h(Jp,t).getMode())}function ng(t){var e=v(Zp,this,eg);return e?new e.prototype.constructor(t):null}function ig(){var t=this.div.getBoundingClientRect(),e=t.x,n=t.y,i=t.width,r=t.height,a=Math.max(0,e),s=Math.max(0,n),o=(a+Math.min(window.innerWidth,e+i))/2-e,l=(s+Math.min(window.innerHeight,n+r))/2-n,u=P(this.viewport.rotation%180==0?[o,l]:[l,o],2);return{offsetX:u[0],offsetY:u[1]}}function rg(){var t,e=m(h(Hp,this).values());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isEmpty()&&n.remove()}}catch(t){e.e(t)}finally{e.f()}}w($p,"_initialized",!1);var ag={_:new Map([Bh,Xv,Rp,Pf,gp].map(function(t){return[t._editorType,t]}))},sg=new WeakMap,og=new WeakMap,lg=new WeakMap,ug=new WeakSet,cg=function(){function t(e){var n=e.pageIndex;c(this,t),p(this,ug),d(this,sg,null),d(this,og,new Map),d(this,lg,new Map),this.pageIndex=n}return y(t,[{key:"setParent",value:function(t){if(h(sg,this)){if(h(sg,this)!==t){if(h(og,this).size>0){var e,n=m(h(og,this).values());try{for(n.s();!(e=n.n()).done;){var i=e.value;i.remove(),t.append(i)}}catch(t){n.e(t)}finally{n.f()}}f(sg,this,t)}}else f(sg,this,t)}},{key:"draw",value:function(e){var n,r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(pg._=(n=pg._,r=n++,n),r),l=i(ug,this,dg).call(this),u=t._svgFactory.createElement("defs");l.append(u);var c=t._svgFactory.createElement("path");u.append(c);var d="path_p".concat(this.pageIndex,"_").concat(o);c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),a&&h(lg,this).set(o,c);var f=s?i(ug,this,fg).call(this,u,d):null,v=t._svgFactory.createElement("use");return l.append(v),v.setAttribute("href","#".concat(d)),this.updateProperties(l,e),h(og,this).set(o,l),{id:o,clipPathId:"url(#".concat(f,")")}}},{key:"drawOutline",value:function(e,n){var r,a,s=(pg._=(r=pg._,a=r++,r),a),o=i(ug,this,dg).call(this),l=t._svgFactory.createElement("defs");o.append(l);var u=t._svgFactory.createElement("path");l.append(u);var c,d="path_p".concat(this.pageIndex,"_").concat(s);if(u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),n){var f=t._svgFactory.createElement("mask");l.append(f),c="mask_p".concat(this.pageIndex,"_").concat(s),f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");var v=t._svgFactory.createElement("rect");f.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");var p=t._svgFactory.createElement("use");f.append(p),p.setAttribute("href","#".concat(d)),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}var g=t._svgFactory.createElement("use");o.append(g),g.setAttribute("href","#".concat(d)),c&&g.setAttribute("mask","url(#".concat(c,")"));var y=g.cloneNode();return o.append(y),g.classList.add("mainOutline"),y.classList.add("secondaryOutline"),this.updateProperties(o,e),h(og,this).set(s,o),s}},{key:"finalizeDraw",value:function(t,e){h(lg,this).delete(t),this.updateProperties(t,e)}},{key:"updateProperties",value:function(e,n){if(n){var r=n.root,a=n.bbox,s=n.rootClass,o=n.path,l="number"==typeof e?h(og,this).get(e):e;if(l){if(r&&i(ug,this,vg).call(this,l,r),a&&hg.call(t,l,a),s)for(var u=l.classList,c=0,d=Object.entries(s);c<d.length;c++){var f=P(d[c],2),v=f[0],p=f[1];u.toggle(v,p)}if(o){var g=l.firstChild.firstChild;i(ug,this,vg).call(this,g,o)}}}}},{key:"updateParent",value:function(t,e){if(e!==this){var n=h(og,this).get(t);n&&(h(sg,e).append(n),h(og,this).delete(t),h(og,e).set(t,n))}}},{key:"remove",value:function(t){h(lg,this).delete(t),null!==h(sg,this)&&(h(og,this).get(t).remove(),h(og,this).delete(t))}},{key:"destroy",value:function(){f(sg,this,null);var t,e=m(h(og,this).values());try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}h(og,this).clear(),h(lg,this).clear()}}],[{key:"_svgFactory",get:function(){return Qt(this,"_svgFactory",new Ju)}}])}();function hg(t,e){var n=P(e,4),i=n[0],r=n[1],a=n[2],s=n[3],o=t.style;o.top="".concat(100*r,"%"),o.left="".concat(100*i,"%"),o.width="".concat(100*a,"%"),o.height="".concat(100*s,"%")}function dg(){var t=tt._svgFactory.create(1,1,!0);return h(sg,this).append(t),t.setAttribute("aria-hidden",!0),t}function fg(t,e){var n=tt._svgFactory.createElement("clipPath");t.append(n);var i="clip_".concat(e);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");var r=tt._svgFactory.createElement("use");return n.append(r),r.setAttribute("href","#".concat(e)),r.classList.add("clip"),i}function vg(t,e){for(var n=0,i=Object.entries(e);n<i.length;n++){var r=P(i[n],2),a=r[0],s=r[1];null===s?t.removeAttribute(a):t.setAttribute(a,s)}}tt=cg;var pg={_:0};globalThis._pdfjsTestingUtils={HighlightOutliner:Od},globalThis.pdfjsLib={AbortException:ie,AnnotationEditorLayer:$p,AnnotationEditorParamsType:wt,AnnotationEditorType:mt,AnnotationEditorUIManager:_i,AnnotationLayer:Ch,AnnotationMode:yt,AnnotationType:Ct,build:qu,ColorPicker:af,createValidAbsoluteUrl:Yt,DOMSVGFactory:Ju,DrawLayer:cg,FeatureTest:se,fetchData:ke,getDocument:ru,getFilenameFromUrl:Me,getPdfFilenameFromUrl:Ce,getUuid:ve,getXfaPageViewport:Oe,GlobalWorkerOptions:Do,ImageKind:Mt,InvalidPDFException:te,isDataScheme:Se,isPdfFile:Ee,isValidExplicitDest:Fa,MathClamp:ge,noContextMenu:Ie,normalizeUnicode:fe,OPS:Ot,OutputScale:je,PasswordResponses:jt,PDFDataRangeTransport:du,PDFDateString:De,PDFWorker:Au,PermissionFlag:bt,PixelsPerInch:be,RenderingCancelledException:xe,ResponseException:ee,setLayerDimensions:Be,shadow:Qt,SignatureExtractor:Qv,stopEvent:Pe,SupportedImageMimeTypes:ze,TextLayer:Gl,TouchManager:_r,updateUrlHash:Kt,Util:le,VerbosityLevel:Lt,version:Vu,XfaLayer:Zu},t.AbortException=ie,t.AnnotationEditorLayer=$p,t.AnnotationEditorParamsType=wt,t.AnnotationEditorType=mt,t.AnnotationEditorUIManager=_i,t.AnnotationLayer=Ch,t.AnnotationMode=yt,t.AnnotationType=Ct,t.ColorPicker=af,t.DOMSVGFactory=Ju,t.DrawLayer=cg,t.FeatureTest=se,t.GlobalWorkerOptions=Do,t.ImageKind=Mt,t.InvalidPDFException=te,t.MathClamp=ge,t.OPS=Ot,t.OutputScale=je,t.PDFDataRangeTransport=du,t.PDFDateString=De,t.PDFWorker=Au,t.PasswordResponses=jt,t.PermissionFlag=bt,t.PixelsPerInch=be,t.RenderingCancelledException=xe,t.ResponseException=ee,t.SignatureExtractor=Qv,t.SupportedImageMimeTypes=ze,t.TextLayer=Gl,t.TouchManager=_r,t.Util=le,t.VerbosityLevel=Lt,t.XfaLayer=Zu,t.build=qu,t.createValidAbsoluteUrl=Yt,t.fetchData=ke,t.getDocument=ru,t.getFilenameFromUrl=Me,t.getPdfFilenameFromUrl=Ce,t.getUuid=ve,t.getXfaPageViewport=Oe,t.isDataScheme=Se,t.isPdfFile=Ee,t.isValidExplicitDest=Fa,t.noContextMenu=Ie,t.normalizeUnicode=fe,t.setLayerDimensions=Be,t.shadow=Qt,t.stopEvent=Pe,t.updateUrlHash=Kt,t.version=Vu,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=pdf.js.map
